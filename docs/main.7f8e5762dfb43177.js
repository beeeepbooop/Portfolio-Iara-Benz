(self.webpackChunkportfolio_website=self.webpackChunkportfolio_website||[]).push([[179],{187:(ho,Ne,zr)=>{"use strict";function w(e){return"function"==typeof e}function Yi(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const $r=Yi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Xi(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class At{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(w(r))try{r()}catch(s){t=s instanceof $r?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{f(s)}catch(a){t=t??[],a instanceof $r?t=[...t,...a.errors]:t.push(a)}}if(t)throw new $r(t)}}add(t){var n;if(t&&t!==this)if(this.closed)f(t);else{if(t instanceof At){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Xi(n,t)}remove(t){const{_finalizers:n}=this;n&&Xi(n,t),t instanceof At&&t._removeParent(this)}}At.EMPTY=(()=>{const e=new At;return e.closed=!0,e})();const Wr=At.EMPTY;function y(e){return e instanceof At||e&&"closed"in e&&w(e.remove)&&w(e.add)&&w(e.unsubscribe)}function f(e){w(e)?e():e.unsubscribe()}const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},d={setTimeout(e,t,...n){const{delegate:r}=d;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=d;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function l(e){d.setTimeout(()=>{const{onUnhandledError:t}=p;if(!t)throw e;t(e)})}function u(){}const o=c("C",void 0,void 0);function c(e,t,n){return{kind:e,value:t,error:n}}let v=null;function C(e){if(p.useDeprecatedSynchronousErrorHandling){const t=!v;if(t&&(v={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=v;if(v=null,n)throw r}}else e()}class S extends At{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,y(t)&&t.add(this)):this.destination=he}static create(t,n,r){return new j(t,n,r)}next(t){this.isStopped?ae(function g(e){return c("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ae(function h(e){return c("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ae(o,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const x=Function.prototype.bind;function M(e,t){return x.call(e,t)}class P{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){G(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){G(r)}else G(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){G(n)}}}class j extends S{constructor(t,n,r){let i;if(super(),w(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&p.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&M(t.next,s),error:t.error&&M(t.error,s),complete:t.complete&&M(t.complete,s)}):i=t}this.destination=new P(i)}}function G(e){p.useDeprecatedSynchronousErrorHandling?function D(e){p.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=e)}(e):l(e)}function ae(e,t){const{onStoppedNotification:n}=p;n&&d.setTimeout(()=>n(e,t))}const he={closed:!0,next:u,error:function re(e){throw e},complete:u},ge="function"==typeof Symbol&&Symbol.observable||"@@observable";function le(e){return e}function De(e){return 0===e.length?le:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let de=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function F(e){return e&&e instanceof S||function O(e){return e&&w(e.next)&&w(e.error)&&w(e.complete)}(e)&&y(e)}(n)?n:new j(n,r,i);return C(()=>{const{operator:a,source:m}=this;s.add(a?a.call(s,m):m?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Se(r))((i,s)=>{const a=new j({next:m=>{try{n(m)}catch(_){s(_),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ge](){return this}pipe(...n){return De(n)(this)}toPromise(n){return new(n=Se(n))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return e.create=t=>new e(t),e})();function Se(e){var t;return null!==(t=e??p.Promise)&&void 0!==t?t:Promise}const L=Yi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let k=(()=>{class e extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new $(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new L}next(n){C(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){C(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){C(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Wr:(this.currentObservers=null,s.push(n),new At(()=>{this.currentObservers=null,Xi(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new de;return n.source=this,n}}return e.create=(t,n)=>new $(t,n),e})();class $ extends k{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Wr}}function R(e){return w(e?.lift)}function I(e){return t=>{if(R(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function B(e,t,n,r,i){return new H(e,t,n,r,i)}class H extends S{constructor(t,n,r,i,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=n?function(m){try{n(m)}catch(_){t.error(_)}}:super._next,this._error=i?function(m){try{i(m)}catch(_){t.error(_)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(m){t.error(m)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function z(e,t){return I((n,r)=>{let i=0;n.subscribe(B(r,s=>{r.next(e.call(t,s,i++))}))})}function rt(e){return this instanceof rt?(this.v=e,this):new rt(e)}function $n(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(A){r[A]&&(i[A]=function(N){return new Promise(function(V,q){s.push([A,N,V,q])>1||m(A,N)})})}function m(A,N){try{!function _(A){A.value instanceof rt?Promise.resolve(A.value.v).then(b,T):E(s[0][2],A)}(r[A](N))}catch(V){E(s[0][3],V)}}function b(A){m("next",A)}function T(A){m("throw",A)}function E(A,N){A(N),s.shift(),s.length&&m(s[0][0],s[0][1])}}function an(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Be(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(m,_){!function i(s,a,m,_){Promise.resolve(_).then(function(b){s({value:b,done:m})},a)}(m,_,(a=e[s](a)).done,a.value)})}}}const Xh=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function qh(e){return w(e?.then)}function Kh(e){return w(e[ge])}function Qh(e){return Symbol.asyncIterator&&w(e?.[Symbol.asyncIterator])}function Zh(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jh=function aC(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ef(e){return w(e?.[Jh])}function tf(e){return $n(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield rt(n.read());if(i)return yield rt(void 0);yield yield rt(r)}}finally{n.releaseLock()}})}function nf(e){return w(e?.getReader)}function vn(e){if(e instanceof de)return e;if(null!=e){if(Kh(e))return function lC(e){return new de(t=>{const n=e[ge]();if(w(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Xh(e))return function cC(e){return new de(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(qh(e))return function uC(e){return new de(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,l)})}(e);if(Qh(e))return rf(e);if(ef(e))return function hC(e){return new de(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(nf(e))return function fC(e){return rf(tf(e))}(e)}throw Zh(e)}function rf(e){return new de(t=>{(function dC(e,t){var n,r,i,s;return function je(e,t,n,r){return new(n||(n=Promise))(function(s,a){function m(T){try{b(r.next(T))}catch(E){a(E)}}function _(T){try{b(r.throw(T))}catch(E){a(E)}}function b(T){T.done?s(T.value):function i(s){return s instanceof n?s:new n(function(a){a(s)})}(T.value).then(m,_)}b((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=an(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Wn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Et(e,t,n=1/0){return w(t)?Et((r,i)=>z((s,a)=>t(r,s,i,a))(vn(e(r,i))),n):("number"==typeof t&&(n=t),I((r,i)=>function gC(e,t,n,r,i,s,a,m){const _=[];let b=0,T=0,E=!1;const A=()=>{E&&!_.length&&!b&&t.complete()},N=q=>b<r?V(q):_.push(q),V=q=>{s&&t.next(q),b++;let J=!1;vn(n(q,T++)).subscribe(B(t,oe=>{i?.(oe),s?N(oe):t.next(oe)},()=>{J=!0},void 0,()=>{if(J)try{for(b--;_.length&&b<r;){const oe=_.shift();a?Wn(t,a,()=>V(oe)):V(oe)}A()}catch(oe){t.error(oe)}}))};return e.subscribe(B(t,N,()=>{E=!0,A()})),()=>{m?.()}}(r,i,e,n)))}function Yr(e=1/0){return Et(le,e)}const On=new de(e=>e.complete());function cl(e){return e[e.length-1]}function qi(e){return function mC(e){return e&&w(e.schedule)}(cl(e))?e.pop():void 0}function sf(e,t=0){return I((n,r)=>{n.subscribe(B(r,i=>Wn(r,e,()=>r.next(i),t),()=>Wn(r,e,()=>r.complete(),t),i=>Wn(r,e,()=>r.error(i),t)))})}function af(e,t=0){return I((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function lf(e,t){if(!e)throw new Error("Iterable cannot be null");return new de(n=>{Wn(n,t,()=>{const r=e[Symbol.asyncIterator]();Wn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Dt(e,t){return t?function SC(e,t){if(null!=e){if(Kh(e))return function _C(e,t){return vn(e).pipe(af(t),sf(t))}(e,t);if(Xh(e))return function wC(e,t){return new de(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(qh(e))return function CC(e,t){return vn(e).pipe(af(t),sf(t))}(e,t);if(Qh(e))return lf(e,t);if(ef(e))return function bC(e,t){return new de(n=>{let r;return Wn(n,t,()=>{r=e[Jh](),Wn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void n.error(a)}s?n.complete():n.next(i)},0,!0)}),()=>w(r?.return)&&r.return()})}(e,t);if(nf(e))return function DC(e,t){return lf(tf(e),t)}(e,t)}throw Zh(e)}(e,t):vn(e)}function ul(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new j({next:()=>{r.unsubscribe(),e()}});return vn(t(...n)).subscribe(r)}function it(e){for(let t in e)if(e[t]===it)return t;throw Error("Could not find renamed property on target object.")}function ot(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ot).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function fl(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const EC=it({__forward_ref__:it});function dl(e){return e.__forward_ref__=dl,e.toString=function(){return ot(this())},e}function Oe(e){return gl(e)?e():e}function gl(e){return"function"==typeof e&&e.hasOwnProperty(EC)&&e.__forward_ref__===dl}function pl(e){return e&&!!e.\u0275providers}const cf="https://g.co/ng/security#xss";class pe extends Error{constructor(t,n){super(function go(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Ve(e){return"string"==typeof e?e:null==e?"":String(e)}function po(e,t){throw new pe(-201,!1)}function ln(e,t){null==e&&function tt(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Le(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function lr(e){return{providers:e.providers||[],imports:e.imports||[]}}function mo(e){return uf(e,vo)||uf(e,ff)}function uf(e,t){return e.hasOwnProperty(t)?e[t]:null}function hf(e){return e&&(e.hasOwnProperty(ml)||e.hasOwnProperty(LC))?e[ml]:null}const vo=it({\u0275prov:it}),ml=it({\u0275inj:it}),ff=it({ngInjectableDef:it}),LC=it({ngInjectorDef:it});var Ae=(()=>((Ae=Ae||{})[Ae.Default=0]="Default",Ae[Ae.Host=1]="Host",Ae[Ae.Self=2]="Self",Ae[Ae.SkipSelf=4]="SkipSelf",Ae[Ae.Optional=8]="Optional",Ae))();let vl;function cn(e){const t=vl;return vl=e,t}function df(e,t,n){const r=mo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ae.Optional?null:void 0!==t?t:void po(ot(e))}const at=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ki={},yl="__NG_DI_FLAG__",yo="ngTempTokenPath",BC=/\n/gm,gf="__source";let Qi;function Xr(e){const t=Qi;return Qi=e,t}function UC(e,t=Ae.Default){if(void 0===Qi)throw new pe(-203,!1);return null===Qi?df(e,void 0,t):Qi.get(e,t&Ae.Optional?null:void 0,t)}function Ee(e,t=Ae.Default){return(function NC(){return vl}()||UC)(Oe(e),t)}function Ke(e,t=Ae.Default){return Ee(e,_o(t))}function _o(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function _l(e){const t=[];for(let n=0;n<e.length;n++){const r=Oe(e[n]);if(Array.isArray(r)){if(0===r.length)throw new pe(900,!1);let i,s=Ae.Default;for(let a=0;a<r.length;a++){const m=r[a],_=HC(m);"number"==typeof _?-1===_?i=m.token:s|=_:i=m}t.push(Ee(i,s))}else t.push(Ee(r))}return t}function Zi(e,t){return e[yl]=t,e.prototype[yl]=t,e}function HC(e){return e[yl]}function cr(e){return{toString:e}.toString()}var yn=(()=>((yn=yn||{})[yn.OnPush=0]="OnPush",yn[yn.Default=1]="Default",yn))(),An=(()=>{return(e=An||(An={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",An;var e})();const Gn={},Ze=[],Co=it({\u0275cmp:it}),Cl=it({\u0275dir:it}),wl=it({\u0275pipe:it}),mf=it({\u0275mod:it}),Yn=it({\u0275fac:it}),Ji=it({__NG_ELEMENT_ID__:it});let WC=0;function Pn(e){return cr(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Ze,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||An.Emulated,id:"c"+WC++,styles:e.styles||Ze,_:null,setInput:null,schemas:e.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=e.dependencies,a=e.features;return i.inputs=_f(e.inputs,r),i.outputs=_f(e.outputs),a&&a.forEach(m=>m(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(vf).filter(yf):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Vt).filter(yf):null,i})}function vf(e){return nt(e)||Rt(e)}function yf(e){return null!==e}function wr(e){return cr(()=>({type:e.type,bootstrap:e.bootstrap||Ze,declarations:e.declarations||Ze,imports:e.imports||Ze,exports:e.exports||Ze,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function _f(e,t){if(null==e)return Gn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const Bt=Pn;function nt(e){return e[Co]||null}function Rt(e){return e[Cl]||null}function Vt(e){return e[wl]||null}function Jt(e,t){const n=e[mf]||null;if(!n&&!0===t)throw new Error(`Type ${ot(e)} does not have '\u0275mod' property.`);return n}function en(e){return Array.isArray(e)&&"object"==typeof e[1]}function Cn(e){return Array.isArray(e)&&!0===e[1]}function Sl(e){return 0!=(4&e.flags)}function rs(e){return e.componentOffset>-1}function To(e){return 1==(1&e.flags)}function wn(e){return null!==e.template}function XC(e){return 0!=(256&e[2])}function Dr(e,t){return e.hasOwnProperty(Yn)?e[Yn]:null}class QC{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Sr(){return Tf}function Tf(e){return e.type.prototype.ngOnChanges&&(e.setInput=JC),ZC}function ZC(){const e=Ef(this),t=e?.current;if(t){const n=e.previous;if(n===Gn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function JC(e,t,n,r){const i=this.declaredInputs[n],s=Ef(e)||function e0(e,t){return e[xf]=t}(e,{previous:Gn,current:null}),a=s.current||(s.current={}),m=s.previous,_=m[i];a[i]=new QC(_&&_.currentValue,t,m===Gn),e[r]=t}Sr.ngInherit=!0;const xf="__ngSimpleChanges__";function Ef(e){return e[xf]||null}function Mt(e){for(;Array.isArray(e);)e=e[0];return e}function tn(e,t){return Mt(t[e.index])}function Of(e,t){return e.data[t]}function nn(e,t){const n=t[e];return en(n)?n:n[0]}function Eo(e){return 64==(64&e[2])}function ur(e,t){return null==t?null:e[t]}function Af(e){e[18]=0}function xl(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ue={lFrame:Uf(null),bindingsEnabled:!0};function Rf(){return Ue.bindingsEnabled}function ie(){return Ue.lFrame.lView}function Qe(){return Ue.lFrame.tView}function It(){let e=kf();for(;null!==e&&64===e.type;)e=e.parent;return e}function kf(){return Ue.lFrame.currentTNode}function kn(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function El(){return Ue.lFrame.isParent}function ti(){return Ue.lFrame.bindingIndex++}function m0(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,Il(t)}function Il(e){Ue.lFrame.currentDirectiveIndex=e}function Al(e){Ue.lFrame.currentQueryIndex=e}function y0(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Bf(e,t,n){if(n&Ae.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&Ae.Host||(i=y0(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;t=i,e=s}const r=Ue.lFrame=Vf();return r.currentTNode=t,r.lView=e,!0}function Pl(e){const t=Vf(),n=e[1];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Vf(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?Uf(e):t}function Uf(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Hf(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const zf=Hf;function Rl(){const e=Hf();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function zt(){return Ue.lFrame.selectedIndex}function Tr(e){Ue.lFrame.selectedIndex=e}function ht(){const e=Ue.lFrame;return Of(e.tView,e.selectedIndex)}function Mo(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:m,ngAfterViewInit:_,ngAfterViewChecked:b,ngOnDestroy:T}=s;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),m&&((e.contentHooks||(e.contentHooks=[])).push(n,m),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,m)),_&&(e.viewHooks||(e.viewHooks=[])).push(-n,_),b&&((e.viewHooks||(e.viewHooks=[])).push(n,b),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,b)),null!=T&&(e.destroyHooks||(e.destroyHooks=[])).push(n,T)}}function Io(e,t,n){$f(e,t,3,n)}function Oo(e,t,n,r){(3&e[2])===n&&$f(e,t,n,r)}function kl(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function $f(e,t,n,r){const s=r??-1,a=t.length-1;let m=0;for(let _=void 0!==r?65535&e[18]:0;_<a;_++)if("number"==typeof t[_+1]){if(m=t[_],null!=r&&m>=r)break}else t[_]<0&&(e[18]+=65536),(m<s||-1==s)&&(E0(e,n,t,_),e[18]=(4294901760&e[18])+_+2),_++}function E0(e,t,n,r){const i=n[r]<0,s=n[r+1],m=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(m)}finally{}}}else try{s.call(m)}finally{}}class ss{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ll(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],a=n[r++],m=n[r++];e.setAttribute(t,a,m,s)}else{const s=i,a=n[++r];Gf(s)?e.setProperty(t,s,a):e.setAttribute(t,s,a),r++}}return r}function Wf(e){return 3===e||4===e||6===e}function Gf(e){return 64===e.charCodeAt(0)}function os(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Yf(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Yf(e,t,n,r,i){let s=0,a=e.length;if(-1===t)a=-1;else for(;s<e.length;){const m=e[s++];if("number"==typeof m){if(m===t){a=-1;break}if(m>t){a=s-1;break}}}for(;s<e.length;){const m=e[s];if("number"==typeof m)break;if(m===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Xf(e){return-1!==e}function Ao(e){return 32767&e}function Po(e,t){let n=function A0(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Nl=!0;function Ro(e){const t=Nl;return Nl=e,t}let P0=0;const Fn={};function ko(e,t){const n=Qf(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,jl(r.data,e),jl(t,null),jl(r.blueprint,null));const i=Bl(e,t),s=e.injectorIndex;if(Xf(i)){const a=Ao(i),m=Po(i,t),_=m[1].data;for(let b=0;b<8;b++)t[s+b]=m[a+b]|_[a+b]}return t[s+8]=i,s}function jl(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Qf(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Bl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=sd(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Vl(e,t,n){!function R0(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ji)&&(r=n[Ji]),null==r&&(r=n[Ji]=P0++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Zf(e,t,n){if(n&Ae.Optional||void 0!==e)return e;po()}function Jf(e,t,n,r){if(n&Ae.Optional&&void 0===r&&(r=null),!(n&(Ae.Self|Ae.Host))){const i=e[9],s=cn(void 0);try{return i?i.get(t,r,n&Ae.Optional):df(t,r,n&Ae.Optional)}finally{cn(s)}}return Zf(r,0,n)}function ed(e,t,n,r=Ae.Default,i){if(null!==e){if(1024&t[2]){const a=function j0(e,t,n,r,i){let s=e,a=t;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const m=td(s,a,n,r|Ae.Self,Fn);if(m!==Fn)return m;let _=s.parent;if(!_){const b=a[21];if(b){const T=b.get(n,Fn,r);if(T!==Fn)return T}_=sd(a),a=a[15]}s=_}return i}(e,t,n,r,Fn);if(a!==Fn)return a}const s=td(e,t,n,r,Fn);if(s!==Fn)return s}return Jf(t,n,r,i)}function td(e,t,n,r,i){const s=function L0(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Ji)?e[Ji]:void 0;return"number"==typeof t?t>=0?255&t:N0:t}(n);if("function"==typeof s){if(!Bf(t,e,r))return r&Ae.Host?Zf(i,0,r):Jf(t,n,r,i);try{const a=s(r);if(null!=a||r&Ae.Optional)return a;po()}finally{zf()}}else if("number"==typeof s){let a=null,m=Qf(e,t),_=-1,b=r&Ae.Host?t[16][6]:null;for((-1===m||r&Ae.SkipSelf)&&(_=-1===m?Bl(e,t):t[m+8],-1!==_&&rd(r,!1)?(a=t[1],m=Ao(_),t=Po(_,t)):m=-1);-1!==m;){const T=t[1];if(nd(s,m,T.data)){const E=F0(m,t,n,a,r,b);if(E!==Fn)return E}_=t[m+8],-1!==_&&rd(r,t[1].data[m+8]===b)&&nd(s,m,t)?(a=T,m=Ao(_),t=Po(_,t)):m=-1}}return i}function F0(e,t,n,r,i,s){const a=t[1],m=a.data[e+8],T=function Fo(e,t,n,r,i){const s=e.providerIndexes,a=t.data,m=1048575&s,_=e.directiveStart,T=s>>20,A=i?m+T:e.directiveEnd;for(let N=r?m:m+T;N<A;N++){const V=a[N];if(N<_&&n===V||N>=_&&V.type===n)return N}if(i){const N=a[_];if(N&&wn(N)&&N.type===n)return _}return null}(m,a,n,null==r?rs(m)&&Nl:r!=a&&0!=(3&m.type),i&Ae.Host&&s===m);return null!==T?xr(t,a,T,m):Fn}function xr(e,t,n,r){let i=e[n];const s=t.data;if(function M0(e){return e instanceof ss}(i)){const a=i;a.resolving&&function MC(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,`Circular dependency in DI detected for ${e}${n}`)}(function et(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ve(e)}(s[n]));const m=Ro(a.canSeeViewProviders);a.resolving=!0;const _=a.injectImpl?cn(a.injectImpl):null;Bf(e,r,Ae.Default);try{i=e[n]=a.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function x0(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const a=Tf(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==_&&cn(_),Ro(m),a.resolving=!1,zf()}}return i}function nd(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function rd(e,t){return!(e&Ae.Self||e&Ae.Host&&t)}class ri{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ed(this._tNode,this._lView,t,_o(r),n)}}function N0(){return new ri(It(),ie())}function Ul(e){return gl(e)?()=>{const t=Ul(Oe(e));return t&&t()}:Dr(e)}function sd(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const si="__parameters__";function ai(e,t,n){return cr(()=>{const r=function Hl(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return m.annotation=a,m;function m(_,b,T){const E=_.hasOwnProperty(si)?_[si]:Object.defineProperty(_,si,{value:[]})[si];for(;E.length<=T;)E.push(null);return(E[T]=E[T]||[]).push(a),_}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Fe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Er(e,t){e.forEach(n=>Array.isArray(n)?Er(n,t):t(n))}function ad(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function No(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const us=Zi(ai("Optional"),8),hs=Zi(ai("SkipSelf"),4);var Xt=(()=>((Xt=Xt||{})[Xt.Important=1]="Important",Xt[Xt.DashCase=2]="DashCase",Xt))();const Kl=new Map;let uw=0;const Zl="__ngContext__";function Lt(e,t){en(t)?(e[Zl]=t[20],function fw(e){Kl.set(e[20],e)}(t)):e[Zl]=t}function ec(e,t){return undefined(e,t)}function ps(e){const t=e[3];return Cn(t)?t[3]:t}function tc(e){return Md(e[13])}function nc(e){return Md(e[4])}function Md(e){for(;null!==e&&!Cn(e);)e=e[4];return e}function ui(e,t,n,r,i){if(null!=r){let s,a=!1;Cn(r)?s=r:en(r)&&(a=!0,r=r[0]);const m=Mt(r);0===e&&null!==n?null==i?kd(t,n,m):Mr(t,n,m,i||null,!0):1===e&&null!==n?Mr(t,n,m,i||null,!0):2===e?function cc(e,t,n){const r=Uo(e,t);r&&function Pw(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,m,a):3===e&&t.destroyNode(m),null!=s&&function Fw(e,t,n,r,i){const s=n[7];s!==Mt(n)&&ui(t,e,r,s,i);for(let m=10;m<n.length;m++){const _=n[m];ms(_[1],_,e,t,r,s)}}(t,e,s,n,i)}}function ic(e,t,n){return e.createElement(t,n)}function Od(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,xl(i,-1)),n.splice(r,1)}function sc(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Od(i,r),t>0&&(e[n-1][4]=r[4]);const s=No(e,10+t);!function Sw(e,t){ms(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Ad(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&ms(e,t,n,3,null,null),function Ew(e){let t=e[13];if(!t)return oc(e[1],e);for(;t;){let n=null;if(en(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)en(t)&&oc(t[1],t),t=t[3];null===t&&(t=e),en(t)&&oc(t[1],t),n=t&&t[4]}t=n}}(t)}}function oc(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function Aw(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ss)){const s=n[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const m=i[s[a]],_=s[a+1];try{_.call(m)}finally{}}else try{s.call(i)}finally{}}}}(e,t),function Ow(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),s+=2}else{const a=r[i=n[s+1]];n[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&Cn(t[3])){n!==t[3]&&Od(n,t);const r=t[19];null!==r&&r.detachView(e)}!function dw(e){Kl.delete(e[20])}(t)}}function Pd(e,t,n){return function Rd(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===An.None||s===An.Emulated)return null}return tn(r,n)}}(e,t.parent,n)}function Mr(e,t,n,r,i){e.insertBefore(t,n,r,i)}function kd(e,t,n){e.appendChild(t,n)}function Fd(e,t,n,r,i){null!==r?Mr(e,t,n,r,i):kd(e,t,n)}function Uo(e,t){return e.parentNode(t)}let fc,Wo,jd=function Nd(e,t,n){return 40&e.type?tn(e,n):null};function Ho(e,t,n,r){const i=Pd(e,r,t),s=t[11],m=function Ld(e,t,n){return jd(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let _=0;_<n.length;_++)Fd(s,i,n[_],m,!1);else Fd(s,i,n,m,!1)}function zo(e,t){if(null!==t){const n=t.type;if(3&n)return tn(t,e);if(4&n)return lc(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return zo(e,r);{const i=e[t.index];return Cn(i)?lc(-1,i):Mt(i)}}if(32&n)return ec(t,e)()||Mt(e[t.index]);{const r=Vd(e,t);return null!==r?Array.isArray(r)?r[0]:zo(ps(e[16]),r):zo(e,t.next)}}return null}function Vd(e,t){return null!==t?e[16][6].projection[t.projection]:null}function lc(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return zo(r,i)}return t[7]}function uc(e,t,n,r,i,s,a){for(;null!=n;){const m=r[n.index],_=n.type;if(a&&0===t&&(m&&Lt(Mt(m),r),n.flags|=2),32!=(32&n.flags))if(8&_)uc(e,t,n.child,r,i,s,!1),ui(t,e,i,m,s);else if(32&_){const b=ec(n,r);let T;for(;T=b();)ui(t,e,i,T,s);ui(t,e,i,m,s)}else 16&_?Ud(e,t,r,n,i,s):ui(t,e,i,m,s);n=a?n.projectionNext:n.next}}function ms(e,t,n,r,i,s){uc(n,r,e.firstChild,t,i,s,!1)}function Ud(e,t,n,r,i,s){const a=n[16],_=a[6].projection[r.projection];if(Array.isArray(_))for(let b=0;b<_.length;b++)ui(t,e,i,_[b],s);else uc(e,t,_,a[3],i,s,!0)}function Hd(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function zd(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Ll(e,t,r),null!==i&&Hd(e,t,i),null!==s&&function Nw(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}function Yd(e){return function dc(){if(void 0===Wo&&(Wo=null,at.trustedTypes))try{Wo=at.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Wo}()?.createScriptURL(e)||e}class Xd{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cf})`}}function hr(e){return e instanceof Xd?e.changingThisBreaksApplicationSecurity:e}function vs(e,t){const n=function Yw(e){return e instanceof Xd&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${cf})`)}return n===t}const Qw=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var yt=(()=>((yt=yt||{})[yt.NONE=0]="NONE",yt[yt.HTML=1]="HTML",yt[yt.STYLE=2]="STYLE",yt[yt.SCRIPT=3]="SCRIPT",yt[yt.URL=4]="URL",yt[yt.RESOURCE_URL=5]="RESOURCE_URL",yt))();function yc(e){const t=_s();return t?t.sanitize(yt.URL,e)||"":vs(e,"URL")?hr(e):function gc(e){return(e=String(e)).match(Qw)?e:"unsafe:"+e}(Ve(e))}function tg(e){const t=_s();if(t)return Yd(t.sanitize(yt.RESOURCE_URL,e)||"");if(vs(e,"ResourceURL"))return Yd(hr(e));throw new pe(904,!1)}function _s(){const e=ie();return e&&e[12]}const Yo=new Fe("ENVIRONMENT_INITIALIZER"),rg=new Fe("INJECTOR",-1),ig=new Fe("INJECTOR_DEF_TYPES");class sg{get(t,n=Ki){if(n===Ki){const r=new Error(`NullInjectorError: No provider for ${ot(t)}!`);throw r.name="NullInjectorError",r}return n}}function ub(...e){return{\u0275providers:og(0,e),\u0275fromNgModule:!0}}function og(e,...t){const n=[],r=new Set;let i;return Er(t,s=>{const a=s;_c(a,n,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&ag(i,n),n}function ag(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];Cc(i,s=>{t.push(s)})}}function _c(e,t,n,r){if(!(e=Oe(e)))return!1;let i=null,s=hf(e);const a=!s&&nt(e);if(s||a){if(a&&!a.standalone)return!1;i=e}else{const _=e.ngModule;if(s=hf(_),!s)return!1;i=_}const m=r.has(i);if(a){if(m)return!1;if(r.add(i),a.dependencies){const _="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const b of _)_c(b,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!m){let b;r.add(i);try{Er(s.imports,T=>{_c(T,t,n,r)&&(b||(b=[]),b.push(T))})}finally{}void 0!==b&&ag(b,t)}if(!m){const b=Dr(i)||(()=>new i);t.push({provide:i,useFactory:b,deps:Ze},{provide:ig,useValue:i,multi:!0},{provide:Yo,useValue:()=>Ee(i),multi:!0})}const _=s.providers;null==_||m||Cc(_,T=>{t.push(T)})}}return i!==e&&void 0!==e.providers}function Cc(e,t){for(let n of e)pl(n)&&(n=n.\u0275providers),Array.isArray(n)?Cc(n,t):t(n)}const hb=it({provide:String,useValue:it});function wc(e){return null!==e&&"object"==typeof e&&hb in e}function Or(e){return"function"==typeof e}const bc=new Fe("Set Injector scope."),Xo={},db={};let Dc;function qo(){return void 0===Dc&&(Dc=new sg),Dc}class Zn{}class ug extends Zn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tc(t,a=>this.processProvider(a)),this.records.set(rg,hi(void 0,this)),i.has("environment")&&this.records.set(Zn,hi(void 0,this));const s=this.records.get(bc);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ig.multi,Ze,Ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Xr(this),r=cn(void 0);try{return t()}finally{Xr(n),cn(r)}}get(t,n=Ki,r=Ae.Default){this.assertNotDestroyed(),r=_o(r);const i=Xr(this),s=cn(void 0);try{if(!(r&Ae.SkipSelf)){let m=this.records.get(t);if(void 0===m){const _=function yb(e){return"function"==typeof e||"object"==typeof e&&e instanceof Fe}(t)&&mo(t);m=_&&this.injectableDefInScope(_)?hi(Sc(t),Xo):null,this.records.set(t,m)}if(null!=m)return this.hydrate(t,m)}return(r&Ae.Self?qo():this.parent).get(t,n=r&Ae.Optional&&n===Ki?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[yo]=a[yo]||[]).unshift(ot(t)),i)throw a;return function zC(e,t,n,r){const i=e[yo];throw t[gf]&&i.unshift(t[gf]),e.message=function $C(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=ot(t);if(Array.isArray(t))i=t.map(ot).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let m=t[a];s.push(a+":"+("string"==typeof m?JSON.stringify(m):ot(m)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(BC,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[yo]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{cn(s),Xr(i)}}resolveInjectorInitializers(){const t=Xr(this),n=cn(void 0);try{const r=this.get(Yo.multi,Ze,Ae.Self);for(const i of r)i()}finally{Xr(t),cn(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(ot(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(t){let n=Or(t=Oe(t))?t:Oe(t&&t.provide);const r=function pb(e){return wc(e)?hi(void 0,e.useValue):hi(function hg(e,t,n){let r;if(Or(e)){const i=Oe(e);return Dr(i)||Sc(i)}if(wc(e))r=()=>Oe(e.useValue);else if(function cg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(..._l(e.deps||[]));else if(function lg(e){return!(!e||!e.useExisting)}(e))r=()=>Ee(Oe(e.useExisting));else{const i=Oe(e&&(e.useClass||e.provide));if(!function mb(e){return!!e.deps}(e))return Dr(i)||Sc(i);r=()=>new i(..._l(e.deps))}return r}(e),Xo)}(t);if(Or(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=hi(void 0,Xo,!0),i.factory=()=>_l(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Xo&&(n.value=db,n.value=n.factory()),"object"==typeof n.value&&n.value&&function vb(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Oe(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Sc(e){const t=mo(e),n=null!==t?t.factory:Dr(e);if(null!==n)return n;if(e instanceof Fe)throw new pe(204,!1);if(e instanceof Function)return function gb(e){const t=e.length;if(t>0)throw function cs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new pe(204,!1);const n=function kC(e){const t=e&&(e[vo]||e[ff]);if(t){const n=function FC(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new pe(204,!1)}function hi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Tc(e,t){for(const n of e)Array.isArray(n)?Tc(n,t):n&&pl(n)?Tc(n.\u0275providers,t):t(n)}class _b{}class fg{}class wb{resolveComponentFactory(t){throw function Cb(e){const t=Error(`No component factory found for ${ot(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Cs=(()=>{class e{}return e.NULL=new wb,e})();function bb(){return fi(It(),ie())}function fi(e,t){return new fr(tn(e,t))}let fr=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=bb,e})();class gg{}let Ko=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function Sb(){const e=ie(),n=nn(It().index,e);return(en(n)?n:e)[11]}(),e})(),Tb=(()=>{class e{}return e.\u0275prov=Le({token:e,providedIn:"root",factory:()=>null}),e})();class Qo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const xb=new Qo("15.1.5"),xc={};function Mc(e){return e.ngOriginalError}class di{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Mc(t);for(;n&&Mc(n);)n=Mc(n);return n||null}}function Jn(e){return e instanceof Function?e():e}function mg(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const vg="ng-template";function Nb(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==mg(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function yg(e){return 4===e.type&&e.value!==vg}function jb(e,t,n){return t===(4!==e.type||n?e.value:vg)}function Bb(e,t,n){let r=4;const i=e.attrs||[],s=function Hb(e){for(let t=0;t<e.length;t++)if(Wf(e[t]))return t;return e.length}(i);let a=!1;for(let m=0;m<t.length;m++){const _=t[m];if("number"!=typeof _){if(!a)if(4&r){if(r=2|1&r,""!==_&&!jb(e,_,n)||""===_&&1===t.length){if(bn(r))return!1;a=!0}}else{const b=8&r?_:t[++m];if(8&r&&null!==e.attrs){if(!Nb(e.attrs,b,n)){if(bn(r))return!1;a=!0}continue}const E=Vb(8&r?"class":_,i,yg(e),n);if(-1===E){if(bn(r))return!1;a=!0;continue}if(""!==b){let A;A=E>s?"":i[E+1].toLowerCase();const N=8&r?A:null;if(N&&-1!==mg(N,b,0)||2&r&&b!==A){if(bn(r))return!1;a=!0}}}}else{if(!a&&!bn(r)&&!bn(_))return!1;if(a&&bn(_))continue;a=!1,r=_|1&r}}return bn(r)||a}function bn(e){return 0==(1&e)}function Vb(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const a=t[i];if(a===e)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let m=t[++i];for(;"string"==typeof m;)m=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function zb(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function _g(e,t,n=!1){for(let r=0;r<t.length;r++)if(Bb(e,t[r],n))return!0;return!1}function Cg(e,t){return e?":not("+t.trim()+")":t}function Wb(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const m=e[++n];i+="["+a+(m.length>0?'="'+m+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!bn(a)&&(t+=Cg(s,i),i=""),r=a,s=s||!bn(r);n++}return""!==i&&(t+=Cg(s,i)),t}const He={};function pi(e){wg(Qe(),ie(),zt()+e,!1)}function wg(e,t,n,r){if(!r)if(3==(3&t[2])){const s=e.preOrderCheckHooks;null!==s&&Io(t,s,n)}else{const s=e.preOrderHooks;null!==s&&Oo(t,s,0,n)}Tr(n)}function Tg(e,t=null,n=null,r){const i=xg(e,t,n,r);return i.resolveInjectorInitializers(),i}function xg(e,t=null,n=null,r,i=new Set){const s=[n||Ze,ub(e)];return r=r||("object"==typeof e?void 0:ot(e)),new ug(s,t||qo(),r||null,i)}let Ln=(()=>{class e{static create(n,r){if(Array.isArray(n))return Tg({name:""},r,n,"");{const i=n.name??"";return Tg({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Ki,e.NULL=new sg,e.\u0275prov=Le({token:e,providedIn:"any",factory:()=>Ee(rg)}),e.__NG_ELEMENT_ID__=-1,e})();function Pe(e,t=Ae.Default){const n=ie();return null===n?Ee(e,t):ed(It(),n,Oe(e),t)}function kg(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const a=e.data[s];Al(n[r]),a.contentQueries(2,t[s],s)}}}function Jo(e,t,n,r,i,s,a,m,_,b,T){const E=t.blueprint.slice();return E[0]=i,E[2]=76|r,(null!==T||e&&1024&e[2])&&(E[2]|=1024),Af(E),E[3]=E[15]=e,E[8]=n,E[10]=a||e&&e[10],E[11]=m||e&&e[11],E[12]=_||e&&e[12]||null,E[9]=b||e&&e[9]||null,E[6]=s,E[20]=function hw(){return uw++}(),E[21]=T,E[16]=2==t.type?e[16]:E,E}function vi(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Rc(e,t,n,r,i){const s=kf(),a=El(),_=e.data[t]=function vD(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=_),null!==s&&(a?null==s.child&&null!==_.parent&&(s.child=_):null===s.next&&(s.next=_)),_}(e,t,n,r,i),function p0(){return Ue.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const a=function is(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return kn(s,!0),s}function ws(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function kc(e,t,n){Pl(t);try{const r=e.viewQuery;null!==r&&$c(1,r,n);const i=e.template;null!==i&&Fg(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&kg(e,t),e.staticViewQueries&&$c(2,e.viewQuery,n);const s=e.components;null!==s&&function gD(e,t){for(let n=0;n<t.length;n++)LD(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Rl()}}function ea(e,t,n,r){const i=t[2];if(128!=(128&i)){Pl(t);try{Af(t),function Lf(e){return Ue.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Fg(e,t,n,2,r);const a=3==(3&i);if(a){const b=e.preOrderCheckHooks;null!==b&&Io(t,b,null)}else{const b=e.preOrderHooks;null!==b&&Oo(t,b,0,null),kl(t,0)}if(function kD(e){for(let t=tc(e);null!==t;t=nc(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r];512&i[2]||xl(i[3],1),i[2]|=512}}}(t),function RD(e){for(let t=tc(e);null!==t;t=nc(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];Eo(r)&&ea(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&kg(e,t),a){const b=e.contentCheckHooks;null!==b&&Io(t,b)}else{const b=e.contentHooks;null!==b&&Oo(t,b,1),kl(t,1)}!function fD(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Tr(~i);else{const s=i,a=n[++r],m=n[++r];m0(a,s),m(2,t[s])}}}finally{Tr(-1)}}(e,t);const m=e.components;null!==m&&function dD(e,t){for(let n=0;n<t.length;n++)FD(e,t[n])}(t,m);const _=e.viewQuery;if(null!==_&&$c(2,_,r),a){const b=e.viewCheckHooks;null!==b&&Io(t,b)}else{const b=e.viewHooks;null!==b&&Oo(t,b,2),kl(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,xl(t[3],-1))}finally{Rl()}}}function Fg(e,t,n,r,i){const s=zt(),a=2&r;try{Tr(-1),a&&t.length>22&&wg(e,t,22,!1),n(r,i)}finally{Tr(s)}}function Fc(e,t,n){if(Sl(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}function Lc(e,t,n){Rf()&&(function DD(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;rs(n)&&function OD(e,t,n){const r=tn(t,e),i=Lg(n),s=e[10],a=ta(e,Jo(e,i,null,n.onPush?32:16,r,t,s,s.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||ko(n,t),Lt(r,t);const a=n.initialInputs;for(let m=i;m<s;m++){const _=e.data[m],b=xr(t,e,m,n);Lt(b,t),null!==a&&AD(0,m-i,b,_,0,a),wn(_)&&(nn(n.index,t)[8]=xr(t,e,m,n))}}(e,t,n,tn(n,t)),64==(64&n.flags)&&Hg(e,t,n))}function Nc(e,t,n=tn){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],m=-1===a?n(t,e):e[a];e[i++]=m}}}function Lg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=jc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function jc(e,t,n,r,i,s,a,m,_,b){const T=22+r,E=T+i,A=function pD(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:He);return n}(T,E),N="function"==typeof b?b():b;return A[1]={type:e,blueprint:A,template:n,queries:null,viewQuery:m,declTNode:t,data:A.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:_,consts:N,incompleteFirstPass:!1}}function jg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?Bg(n,t,i,s):r.hasOwnProperty(i)&&Bg(n,t,r[i],s)}return n}function Bg(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function sn(e,t,n,r,i,s,a,m){const _=tn(t,n);let T,b=t.inputs;!m&&null!=b&&(T=b[r])?(Wc(e,n,T,r,i),rs(t)&&Vg(n,t.index)):3&t.type&&(r=function _D(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,t.value||"",r):i,s.setProperty(_,r,i))}function Vg(e,t){const n=nn(t,e);16&n[2]||(n[2]|=32)}function Bc(e,t,n,r){let i=!1;if(Rf()){const s=null===r?null:{"":-1},a=function TD(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];if(_g(t,a.selectors,!1))if(r||(r=[]),wn(a))if(null!==a.findHostDirectiveDefs){const m=[];i=i||new Map,a.findHostDirectiveDefs(a,m,i),r.unshift(...m,a),Vc(e,t,m.length)}else r.unshift(a),Vc(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(e,n);let m,_;null===a?m=_=null:[m,_]=a,null!==m&&(i=!0,Ug(e,t,n,m,s,_)),s&&function xD(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new pe(-301,!1);r.push(t[i],s)}}}(n,r,s)}return n.mergedAttrs=os(n.mergedAttrs,n.attrs),i}function Ug(e,t,n,r,i,s){for(let b=0;b<r.length;b++)Vl(ko(n,t),e,r[b].type);!function MD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let b=0;b<r.length;b++){const T=r[b];T.providersResolver&&T.providersResolver(T)}let a=!1,m=!1,_=ws(e,t,r.length,null);for(let b=0;b<r.length;b++){const T=r[b];n.mergedAttrs=os(n.mergedAttrs,T.hostAttrs),ID(e,n,t,_,T),ED(_,T,i),null!==T.contentQueries&&(n.flags|=4),(null!==T.hostBindings||null!==T.hostAttrs||0!==T.hostVars)&&(n.flags|=64);const E=T.type.prototype;!a&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!m&&(E.ngOnChanges||E.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),m=!0),_++}!function yD(e,t,n){const i=t.directiveEnd,s=e.data,a=t.attrs,m=[];let _=null,b=null;for(let T=t.directiveStart;T<i;T++){const E=s[T],A=n?n.get(E):null,V=A?A.outputs:null;_=jg(E.inputs,T,_,A?A.inputs:null),b=jg(E.outputs,T,b,V);const q=null===_||null===a||yg(t)?null:PD(_,T,a);m.push(q)}null!==_&&(_.hasOwnProperty("class")&&(t.flags|=8),_.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=m,t.inputs=_,t.outputs=b}(e,n,s)}function Hg(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=function v0(){return Ue.lFrame.currentDirectiveIndex}();try{Tr(s);for(let m=r;m<i;m++){const _=e.data[m],b=t[m];Il(m),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&SD(_,b)}}finally{Tr(-1),Il(a)}}function SD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Vc(e,t,n){t.componentOffset=n,(e.components||(e.components=[])).push(t.index)}function ED(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;wn(t)&&(n[""]=e)}}function ID(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=Dr(i.type)),a=new ss(s,wn(i),Pe);e.blueprint[r]=a,n[r]=a,function wD(e,t,n,r,i){const s=i.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const m=~t.index;(function bD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=m&&a.push(m),a.push(n,r,s)}}(e,t,r,ws(e,n,i.hostVars,He),i)}function Nn(e,t,n,r,i,s){const a=tn(e,t);!function Uc(e,t,n,r,i,s,a){if(null==s)e.removeAttribute(t,i,n);else{const m=null==a?Ve(s):a(s,r||"",i);e.setAttribute(t,i,m,n)}}(t[11],a,s,e.value,n,r,i)}function AD(e,t,n,r,i,s){const a=s[t];if(null!==a){const m=r.setInput;for(let _=0;_<a.length;){const b=a[_++],T=a[_++],E=a[_++];null!==m?r.setInput(n,E,b,T):n[T]=E}}}function PD(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const a=e[s];for(let m=0;m<a.length;m+=2)if(a[m]===t){r.push(s,a[m+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function zg(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}function FD(e,t){const n=nn(t,e);if(Eo(n)){const r=n[1];48&n[2]?ea(r,n,r.template,n[8]):n[5]>0&&Hc(n)}}function Hc(e){for(let r=tc(e);null!==r;r=nc(r))for(let i=10;i<r.length;i++){const s=r[i];if(Eo(s))if(512&s[2]){const a=s[1];ea(a,s,a.template,s[8])}else s[5]>0&&Hc(s)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=nn(n[r],e);Eo(i)&&i[5]>0&&Hc(i)}}function LD(e,t){const n=nn(t,e),r=n[1];(function ND(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),kc(r,n,n[8])}function ta(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function zc(e){for(;e;){e[2]|=32;const t=ps(e);if(XC(e)&&!t)return e;e=t}return null}function na(e,t,n,r=!0){const i=t[10];i.begin&&i.begin();try{ea(e,t,e.template,n)}catch(a){throw r&&Yg(t,a),a}finally{i.end&&i.end()}}function $c(e,t,n){Al(0),t(e,n)}function $g(e){return e[7]||(e[7]=[])}function Wg(e){return e.cleanup||(e.cleanup=[])}function Yg(e,t){const n=e[9],r=n?n.get(di,null):null;r&&r.handleError(t)}function Wc(e,t,n,r,i){for(let s=0;s<n.length;){const a=n[s++],m=n[s++],_=t[a],b=e.data[a];null!==b.setInput?b.setInput(_,i,r,m):_[m]=i}}function ra(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const m=t[a];"number"==typeof m?s=m:1==s?i=fl(i,m):2==s&&(r=fl(r,m+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function ia(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Mt(s)),Cn(s))for(let m=10;m<s.length;m++){const _=s[m],b=_[1].firstChild;null!==b&&ia(_[1],_,b,r)}const a=n.type;if(8&a)ia(e,t,n.child,r);else if(32&a){const m=ec(n,t);let _;for(;_=m();)r.push(_)}else if(16&a){const m=Vd(t,n);if(Array.isArray(m))r.push(...m);else{const _=ps(t[16]);ia(_[1],_,m,r,!0)}}n=i?n.projectionNext:n.next}return r}class bs{get rootNodes(){const t=this._lView,n=t[1];return ia(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Cn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(sc(t,r),No(n,r))}this._attachedToViewContainer=!1}Ad(this._lView[1],this._lView)}onDestroy(t){!function Ng(e,t,n,r){const i=$g(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Wg(e).push(r,i.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){zc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){na(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xw(e,t){ms(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=t}}class jD extends bs{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;na(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class Xg extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=nt(t);return new Ds(n,this.ngModule)}}function qg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class VD{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=_o(r);const i=this.injector.get(t,xc,r);return i!==xc||n===xc?i:this.parentInjector.get(t,n,r)}}class Ds extends fg{get inputs(){return qg(this.componentDef.inputs)}get outputs(){return qg(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Gb(e){return e.map(Wb).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof Zn?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new VD(t,s):t,m=a.get(gg,null);if(null===m)throw new pe(407,!1);const _=a.get(Tb,null),b=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",E=r?function mD(e,t,n){return e.selectRootElement(t,n===An.ShadowDom)}(b,r,this.componentDef.encapsulation):ic(b,T,function BD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(T)),A=this.componentDef.onPush?288:272,N=jc(0,null,null,1,0,null,null,null,null,null),V=Jo(null,N,null,A,null,null,m,b,_,a,null);let q,J;Pl(V);try{const oe=this.componentDef;let ye,te=null;oe.findHostDirectiveDefs?(ye=[],te=new Map,oe.findHostDirectiveDefs(oe,ye,te),ye.push(oe)):ye=[oe];const ke=function HD(e,t){const n=e[1];return e[22]=t,vi(n,22,2,"#host",null)}(V,E),st=function zD(e,t,n,r,i,s,a,m){const _=i[1];!function $D(e,t,n,r){for(const i of e)t.mergedAttrs=os(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(ra(t,t.mergedAttrs,!0),null!==n&&zd(r,n,t))}(r,e,t,a);const b=s.createRenderer(t,n),T=Jo(i,Lg(n),null,n.onPush?32:16,i[e.index],e,s,b,m||null,null,null);return _.firstCreatePass&&Vc(_,e,r.length-1),ta(i,T),i[e.index]=T}(ke,E,oe,ye,V,m,b);J=Of(N,22),E&&function GD(e,t,n,r){if(r)Ll(e,n,["ng-version",xb.full]);else{const{attrs:i,classes:s}=function Yb(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!bn(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Ll(e,n,i),s&&s.length>0&&Hd(e,n,s.join(" "))}}(b,oe,E,r),void 0!==n&&function YD(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(J,this.ngContentSelectors,n),q=function WD(e,t,n,r,i,s){const a=It(),m=i[1],_=tn(a,i);Ug(m,i,a,n,null,r);for(let T=0;T<n.length;T++)Lt(xr(i,m,a.directiveStart+T,a),i);Hg(m,i,a),_&&Lt(_,i);const b=xr(i,m,a.directiveStart+a.componentOffset,a);if(e[8]=i[8]=b,null!==s)for(const T of s)T(b,t);return Fc(m,a,e),b}(st,oe,ye,te,V,[XD]),kc(N,V,null)}finally{Rl()}return new UD(this.componentType,q,fi(J,V),V,J)}}class UD extends _b{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new jD(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;Wc(s[1],s,i,t,n),Vg(s,this._tNode.index)}}get injector(){return new ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function XD(){const e=It();Mo(ie()[1],e)}function Yc(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Nt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Xc(e,t,n,r){const i=ie();return Nt(i,ti(),t)&&(Qe(),Nn(ht(),i,e,t,n,r)),Xc}function Ei(e,t,n){const r=ie();return Nt(r,ti(),t)&&sn(Qe(),ht(),r,e,t,r[11],n,!1),Ei}function qc(e,t,n,r,i){const a=i?"class":"style";Wc(e,n,t.inputs[a],a,r)}function we(e,t,n,r){const i=ie(),s=Qe(),a=22+e,m=i[11],_=i[a]=ic(m,t,function T0(){return Ue.lFrame.currentNamespace}()),b=s.firstCreatePass?function hS(e,t,n,r,i,s,a){const m=t.consts,b=vi(t,e,2,i,ur(m,s));return Bc(t,n,b,ur(m,a)),null!==b.attrs&&ra(b,b.attrs,!1),null!==b.mergedAttrs&&ra(b,b.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,b),b}(a,s,i,0,t,n,r):s.data[a];return kn(b,!0),zd(m,_,b),32!=(32&b.flags)&&Ho(s,i,_,b),0===function a0(){return Ue.lFrame.elementDepthCount}()&&Lt(_,i),function l0(){Ue.lFrame.elementDepthCount++}(),To(b)&&(Lc(s,i,b),Fc(s,b,i)),null!==r&&Nc(i,b),we}function be(){let e=It();El()?function Ml(){Ue.lFrame.isParent=!1}():(e=e.parent,kn(e,!1));const t=e;!function c0(){Ue.lFrame.elementDepthCount--}();const n=Qe();return n.firstCreatePass&&(Mo(n,e),Sl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function I0(e){return 0!=(8&e.flags)}(t)&&qc(n,t,ie(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function O0(e){return 0!=(16&e.flags)}(t)&&qc(n,t,ie(),t.stylesWithoutHost,!1),be}function ve(e,t,n,r){return we(e,t,n,r),be(),ve}function la(e){return!!e&&"function"==typeof e.then}const dp=function fp(e){return!!e&&"function"==typeof e.subscribe};function Ts(e,t,n,r){const i=ie(),s=Qe(),a=It();return function pp(e,t,n,r,i,s,a){const m=To(r),b=e.firstCreatePass&&Wg(e),T=t[8],E=$g(t);let A=!0;if(3&r.type||a){const q=tn(r,t),J=a?a(q):q,oe=E.length,ye=a?ke=>a(Mt(ke[r.index])):r.index;let te=null;if(!a&&m&&(te=function gS(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===n&&i[s+1]===r){const m=t[7],_=i[s+2];return m.length>_?m[_]:null}"string"==typeof a&&(s+=2)}return null}(e,t,i,r.index)),null!==te)(te.__ngLastListenerFn__||te).__ngNextListenerFn__=s,te.__ngLastListenerFn__=s,A=!1;else{s=vp(r,t,T,s,!1);const ke=n.listen(J,i,s);E.push(s,ke),b&&b.push(i,ye,oe,oe+1)}}else s=vp(r,t,T,s,!1);const N=r.outputs;let V;if(A&&null!==N&&(V=N[i])){const q=V.length;if(q)for(let J=0;J<q;J+=2){const st=t[V[J]][V[J+1]].subscribe(s),vt=E.length;E.push(s,st),b&&b.push(i,r.index,vt,-(vt+1))}}}(s,i,i[11],a,e,t,r),Ts}function mp(e,t,n,r){try{return!1!==n(r)}catch(i){return Yg(e,i),!1}}function vp(e,t,n,r,i){return function s(a){if(a===Function)return r;zc(e.componentOffset>-1?nn(e.index,t):t);let _=mp(t,0,r,a),b=s.__ngNextListenerFn__;for(;b;)_=mp(t,0,b,a)&&_,b=b.__ngNextListenerFn__;return i&&!1===_&&(a.preventDefault(),a.returnValue=!1),_}}function Zc(e,t,n){return Jc(e,"",t,"",n),Zc}function Jc(e,t,n,r,i){const s=ie(),a=function _i(e,t,n,r){return Nt(e,ti(),n)?t+Ve(n)+r:He}(s,t,n,r);return a!==He&&sn(Qe(),ht(),s,e,a,s[11],i,!1),Jc}function Ce(e,t=""){const n=ie(),r=Qe(),i=e+22,s=r.firstCreatePass?vi(r,i,1,t,null):r.data[i],a=n[i]=function rc(e,t){return e.createText(t)}(n[11],t);Ho(r,n,a,s),kn(s,!1)}const Oi="en-US";let cm=Oi;class Ai{}class Fm{}class Lm extends Ai{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xg(this);const r=Jt(t);this._bootstrapComponents=Jn(r.bootstrap),this._r3Injector=xg(t,n,[{provide:Ai,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],ot(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class hu extends Fm{constructor(t){super(),this.moduleType=t}create(t){return new Lm(this.moduleType,t)}}class ox extends Ai{constructor(t,n,r){super(),this.componentFactoryResolver=new Xg(this),this.instance=null;const i=new ug([...t,{provide:Ai,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],n||qo(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function pa(e,t,n=null){return new ox(e,t,n).injector}let ax=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=og(0,n.type),i=r.length>0?pa([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Le({token:e,providedIn:"environment",factory:()=>new e(Ee(Zn))}),e})();function Nm(e){e.getStandaloneInjector=t=>t.get(ax).getOrCreateStandaloneInjector(e)}function ma(e,t,n){const r=function Ht(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}()+e,i=ie();return i[r]===He?function jn(e,t,n){return e[t]=n}(i,r,n?t.call(n):t()):function Ss(e,t){return e[t]}(i,r)}function du(e){return t=>{setTimeout(e,void 0,t)}}const Wt=class Px extends k{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),a=r;if(t&&"object"==typeof t){const _=t;i=_.next?.bind(_),s=_.error?.bind(_),a=_.complete?.bind(_)}this.__isAsync&&(s=du(s),i&&(i=du(i)),a&&(a=du(a)));const m=super.subscribe({next:i,error:s,complete:a});return t instanceof At&&t.add(m),m}};let tr=(()=>{class e{}return e.__NG_ELEMENT_ID__=Lx,e})();const kx=tr,Fx=class extends kx{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tViews,i=Jo(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(r)),kc(r,i,t),new bs(i)}};function Lx(){return function va(e,t){return 4&e.type?new Fx(t,e,fi(e,t)):null}(It(),ie())}let Tn=(()=>{class e{}return e.__NG_ELEMENT_ID__=Nx,e})();function Nx(){return function Qm(e,t){let n;const r=t[e.index];if(Cn(r))n=r;else{let i;if(8&e.type)i=Mt(r);else{const s=t[11];i=s.createComment("");const a=tn(e,t);Mr(s,Uo(s,a),i,function Rw(e,t){return e.nextSibling(t)}(s,a),!1)}t[e.index]=n=zg(r,t,i,e),ta(t,n)}return new qm(n,e,t)}(It(),ie())}const jx=Tn,qm=class extends jx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return fi(this._hostTNode,this._hostLView)}get injector(){return new ri(this._hostTNode,this._hostLView)}get parentInjector(){const t=Bl(this._hostTNode,this._hostLView);if(Xf(t)){const n=Po(t,this._hostLView),r=Ao(t);return new ri(n[1].data[r+8],n)}return new ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Km(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedView(n||{},s);return this.insert(a,i),a}createComponent(t,n,r,i,s){const a=t&&!function ls(e){return"function"==typeof e}(t);let m;if(a)m=n;else{const E=n||{};m=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const _=a?t:new Ds(nt(t)),b=r||this.parentInjector;if(!s&&null==_.ngModule){const A=(a?b:this.parentInjector).get(Zn,null);A&&(s=A)}const T=_.create(b,i,void 0,s);return this.insert(T.hostView,m),T}insert(t,n){const r=t._lView,i=r[1];if(function o0(e){return Cn(e[3])}(r)){const T=this.indexOf(t);if(-1!==T)this.detach(T);else{const E=r[3],A=new qm(E,E[6],E[3]);A.detach(A.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function Mw(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],ad(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function Iw(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(a,t);const m=t[19];null!==m&&m.insertView(e),t[2]|=64}(i,r,a,s);const m=lc(s,a),_=r[11],b=Uo(_,a[7]);return null!==b&&function Tw(e,t,n,r,i,s){r[0]=i,r[6]=t,ms(e,r,n,1,i,s)}(i,a[6],_,r,b,m),t.attachToViewContainerRef(),ad(pu(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Km(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);r&&(No(pu(this._lContainer),n),Ad(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);return r&&null!=No(pu(this._lContainer),n)?new bs(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Km(e){return e[8]}function pu(e){return e[8]||(e[8]=[])}function _a(...e){}const Ca=new Fe("Application Initializer");let wa=(()=>{class e{constructor(n){this.appInits=n,this.resolve=_a,this.reject=_a,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(la(s))n.push(s);else if(dp(s)){const a=new Promise((m,_)=>{s.subscribe({complete:m,error:_})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Ee(Ca,8))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fs=new Fe("AppId",{providedIn:"root",factory:function Sv(){return`${Tu()}${Tu()}${Tu()}`}});function Tu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tv=new Fe("Platform Initializer"),xv=new Fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ev=new Fe("appBootstrapListener");let fE=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const nr=new Fe("LocaleId",{providedIn:"root",factory:()=>Ke(nr,Ae.Optional|Ae.SkipSelf)||function dE(){return typeof $localize<"u"&&$localize.locale||Oi}()});class pE{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Mv=(()=>{class e{compileModuleSync(n){return new hu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Jn(Jt(n).declarations).reduce((a,m)=>{const _=nt(m);return _&&a.push(new Ds(_)),a},[]);return new pE(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const yE=(()=>Promise.resolve(0))();function xu(e){typeof Zone>"u"?yE.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class _t{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function _E(){let e=at.requestAnimationFrame,t=at.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function bE(e){const t=()=>{!function wE(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(at,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Mu(e),e.isCheckStableRunning=!0,Eu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Mu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,a,m)=>{try{return Av(e),n.invokeTask(i,s,a,m)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Pv(e)}},onInvoke:(n,r,i,s,a,m,_)=>{try{return Av(e),n.invoke(i,s,a,m,_)}finally{e.shouldCoalesceRunChangeDetection&&t(),Pv(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Mu(e),Eu(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_t.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new pe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,t,CE,_a,_a);try{return s.runTask(a,n,r)}finally{s.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const CE={};function Eu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Mu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Av(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Pv(e){e._nesting--,Eu(e)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wt,this.onMicrotaskEmpty=new Wt,this.onStable=new Wt,this.onError=new Wt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Rv=new Fe(""),ba=new Fe("");let Au,Iu=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Au||(function SE(e){Au=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),xu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Ee(_t),Ee(Ou),Ee(ba))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})(),Ou=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Au?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),gr=null;const kv=new Fe("AllowMultipleToken"),Pu=new Fe("PlatformDestroyListeners");class Fv{constructor(t,n){this.name=t,this.token=n}}function Nv(e,t,n=[]){const r=`Platform: ${t}`,i=new Fe(r);return(s=[])=>{let a=Ru();if(!a||a.injector.get(kv,!1)){const m=[...n,...s,{provide:i,useValue:!0}];e?e(m):function EE(e){if(gr&&!gr.get(kv,!1))throw new pe(400,!1);gr=e;const t=e.get(Bv);(function Lv(e){const t=e.get(Tv,null);t&&t.forEach(n=>n())})(e)}(function jv(e=[],t){return Ln.create({name:t,providers:[{provide:bc,useValue:"platform"},{provide:Pu,useValue:new Set([()=>gr=null])},...e]})}(m,r))}return function IE(e){const t=Ru();if(!t)throw new pe(401,!1);return t}()}}function Ru(){return gr?.get(Bv)??null}let Bv=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Uv(e,t){let n;return n="noop"===e?new DE:("zone.js"===e?void 0:e)||new _t(t),n}(r?.ngZone,function Vv(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:_t,useValue:i}];return i.run(()=>{const a=Ln.create({providers:s,parent:this.injector,name:n.moduleType.name}),m=n.create(a),_=m.injector.get(di,null);if(!_)throw new pe(402,!1);return i.runOutsideAngular(()=>{const b=i.onError.subscribe({next:T=>{_.handleError(T)}});m.onDestroy(()=>{Sa(this._modules,m),b.unsubscribe()})}),function Hv(e,t,n){try{const r=n();return la(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(_,i,()=>{const b=m.injector.get(wa);return b.runInitializers(),b.donePromise.then(()=>(function um(e){ln(e,"Expected localeId to be defined"),"string"==typeof e&&(cm=e.toLowerCase().replace(/_/g,"-"))}(m.injector.get(nr,Oi)||Oi),this._moduleDoBootstrap(m),m))})})}bootstrapModule(n,r=[]){const i=zv({},r);return function TE(e,t,n){const r=new hu(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Da);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new pe(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Pu,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Ee(Ln))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function zv(e,t){return Array.isArray(t)?t.reduce(zv,e):{...e,...t}}let Da=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new de(m=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{m.next(this._stable),m.complete()})}),a=new de(m=>{let _;this._zone.runOutsideAngular(()=>{_=this._zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),xu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,m.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{m.next(!1)}))});return()=>{_.unsubscribe(),b.unsubscribe()}});this.isStable=function TC(...e){const t=qi(e),n=function yC(e,t){return"number"==typeof cl(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?vn(r[0]):Yr(n)(Dt(r,t)):On}(s,a.pipe(function xC(e={}){const{connector:t=(()=>new k),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let a,m,_,b=0,T=!1,E=!1;const A=()=>{m?.unsubscribe(),m=void 0},N=()=>{A(),a=_=void 0,T=E=!1},V=()=>{const q=a;N(),q?.unsubscribe()};return I((q,J)=>{b++,!E&&!T&&A();const oe=_=_??t();J.add(()=>{b--,0===b&&!E&&!T&&(m=ul(V,i))}),oe.subscribe(J),!a&&b>0&&(a=new j({next:ye=>oe.next(ye),error:ye=>{E=!0,A(),m=ul(N,n,ye),oe.error(ye)},complete:()=>{T=!0,A(),m=ul(N,r),oe.complete()}}),vn(q).subscribe(a))})(s)}}()))}bootstrap(n,r){const i=n instanceof fg;if(!this._injector.get(wa).done)throw!i&&function qr(e){const t=nt(e)||Rt(e)||Vt(e);return null!==t&&t.standalone}(n),new pe(405,false);let a;a=i?n:this._injector.get(Cs).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const m=function xE(e){return e.isBoundToModule}(a)?void 0:this._injector.get(Ai),b=a.create(Ln.NULL,[],r||a.selector,m),T=b.location.nativeElement,E=b.injector.get(Rv,null);return E?.registerApplication(T),b.onDestroy(()=>{this.detachView(b.hostView),Sa(this.components,b),E?.unregisterApplication(T)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Sa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Ev,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Sa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new pe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Ee(_t),Ee(Zn),Ee(di))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Sa(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let ku=(()=>{class e{}return e.__NG_ELEMENT_ID__=AE,e})();function AE(e){return function PE(e,t,n){if(rs(e)&&!n){const r=nn(e.index,t);return new bs(r,r)}return 47&e.type?new bs(t[16],t):null}(It(),ie(),16==(16&e))}class Qv{constructor(){}supports(t){return t instanceof Map||Yc(t)}create(){return new UE}}class UE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Yc(t)))throw new pe(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const s=i._prev,a=i._next;return s&&(s._next=a),a&&(a._prev=s),i._next=null,i._prev=null,i}const r=new HE(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class HE{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jv(){return new Ls([new Qv])}let Ls=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Jv()),deps:[[e,new hs,new us]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new pe(901,!1)}}return e.\u0275prov=Le({token:e,providedIn:"root",factory:Jv}),e})();const WE=Nv(null,"core",[]);let GE=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Ee(Da))},e.\u0275mod=wr({type:e}),e.\u0275inj=lr({}),e})();function Bu(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let Vu=null;function pr(){return Vu}class qE{}const Kt=new Fe("DocumentToken");let Uu=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return function KE(){return Ee(ey)}()},providedIn:"platform"}),e})();const QE=new Fe("Location Initialized");let ey=(()=>{class e extends Uu{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pr().getBaseHref(this._doc)}onPopState(n){const r=pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){ty()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){ty()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Ee(Kt))},e.\u0275prov=Le({token:e,factory:function(){return function ZE(){return new ey(Ee(Kt))}()},providedIn:"platform"}),e})();function ty(){return!!window.history.pushState}function Hu(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function ny(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function ir(e){return e&&"?"!==e[0]?"?"+e:e}let Lr=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return Ke(iy)},providedIn:"root"}),e})();const ry=new Fe("appBaseHref");let iy=(()=>{class e extends Lr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ke(Kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Hu(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const a=this.prepareExternalUrl(i+ir(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){const a=this.prepareExternalUrl(i+ir(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ee(Uu),Ee(ry,8))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),JE=(()=>{class e extends Lr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Hu(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let a=this.prepareExternalUrl(i+ir(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){let a=this.prepareExternalUrl(i+ir(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ee(Uu),Ee(ry,8))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})(),zu=(()=>{class e{constructor(n){this._subject=new Wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function n1(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(ny(sy(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ir(r))}normalize(n){return e.stripTrailingSlash(function t1(e,t){return e&&new RegExp(`^${e}([/;?#]|$)`).test(t)?t.substring(e.length):t}(this._basePath,sy(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ir(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=ir,e.joinWithSlash=Hu,e.stripTrailingSlash=ny,e.\u0275fac=function(n){return new(n||e)(Ee(Lr))},e.\u0275prov=Le({token:e,factory:function(){return function e1(){return new zu(Ee(Lr))}()},providedIn:"root"}),e})();function sy(e){return e.replace(/\/index.html$/,"")}let yy=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new W1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){_y("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){_y("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(Pe(Tn),Pe(tr))},e.\u0275dir=Bt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class W1{constructor(){this.$implicit=null,this.ngIf=null}}function _y(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ot(t)}'.`)}let wy=(()=>{class e{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,s]=n.split("."),a=-1===i.indexOf("-")?void 0:Xt.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,i,a)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(Pe(fr),Pe(Ls),Pe(Ko))},e.\u0275dir=Bt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),Dy=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=wr({type:e}),e.\u0275inj=lr({}),e})();let CM=(()=>{class e{}return e.\u0275prov=Le({token:e,providedIn:"root",factory:()=>new wM(Ee(Kt),window)}),e})();class wM{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function bM(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ty(this.window.history)||Ty(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ty(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class KM extends qE{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ah extends KM{static makeCurrent(){!function XE(e){Vu||(Vu=e)}(new ah)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function QM(){return Vs=Vs||document.querySelector("base"),Vs?Vs.getAttribute("href"):null}();return null==n?null:function ZM(e){ja=ja||document.createElement("a"),ja.setAttribute("href",e);const t=ja.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function B1(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let ja,Vs=null;const Oy=new Fe("TRANSITION_ID"),eI=[{provide:Ca,useFactory:function JM(e,t,n){return()=>{n.get(wa).donePromise.then(()=>{const r=pr(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Oy,Kt,Ln],multi:!0}];let nI=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();const Ba=new Fe("EventManagerPlugins");let Va=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Ee(Ba),Ee(_t))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();class Ay{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=pr().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Py=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})(),Us=(()=>{class e extends Py{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Ry),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Ry))}}return e.\u0275fac=function(n){return new(n||e)(Ee(Kt))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();function Ry(e){pr().remove(e)}const lh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ch=/%COMP%/g;function uh(e,t){return t.flat(100).map(n=>n.replace(ch,e))}function Ly(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let hh=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case An.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new lI(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case An.ShadowDom:return new cI(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=uh(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Ee(Va),Ee(Us),Ee(Fs))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();class fh{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(lh[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(jy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(jy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=lh[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=lh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Xt.DashCase|Xt.Important)?t.style.setProperty(n,r,i&Xt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Xt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Ly(r)):this.eventManager.addEventListener(t,n,Ly(r))}}function jy(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class lI extends fh{constructor(t,n,r,i){super(t),this.component=r;const s=uh(i+"-"+r.id,r.styles);n.addStyles(s),this.contentAttr=function sI(e){return"_ngcontent-%COMP%".replace(ch,e)}(i+"-"+r.id),this.hostAttr=function oI(e){return"_nghost-%COMP%".replace(ch,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class cI extends fh{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=uh(i.id,i.styles);for(let a=0;a<s.length;a++){const m=document.createElement("style");m.textContent=s[a],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let uI=(()=>{class e extends Ay{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(Ee(Kt))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();const By=["alt","control","meta","shift"],hI={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let dI=(()=>{class e extends Ay{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pr().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let a="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),a="code."),By.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),a+=b+".")}),a+=s,0!=r.length||0===s.length)return null;const _={};return _.domEventName=i,_.fullKey=a,_}static matchEventFullKeyCode(n,r){let i=hI[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),By.forEach(a=>{a!==i&&(0,fI[a])(n)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Ee(Kt))},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();const vI=Nv(WE,"browser",[{provide:xv,useValue:"browser"},{provide:Tv,useValue:function gI(){ah.makeCurrent()},multi:!0},{provide:Kt,useFactory:function mI(){return function Uw(e){fc=e}(document),document},deps:[]}]),Hy=new Fe(""),zy=[{provide:ba,useClass:class tI{addToWindow(t){at.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},at.getAllAngularTestabilities=()=>t.getAllTestabilities(),at.getAllAngularRootElements=()=>t.getAllRootElements(),at.frameworkStabilizers||(at.frameworkStabilizers=[]),at.frameworkStabilizers.push(r=>{const i=at.getAllAngularTestabilities();let s=i.length,a=!1;const m=function(_){a=a||_,s--,0==s&&r(a)};i.forEach(function(_){_.whenStable(m)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?pr().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Rv,useClass:Iu,deps:[_t,Ou,ba]},{provide:Iu,useClass:Iu,deps:[_t,Ou,ba]}],$y=[{provide:bc,useValue:"root"},{provide:di,useFactory:function pI(){return new di},deps:[]},{provide:Ba,useClass:uI,multi:!0,deps:[Kt,_t,xv]},{provide:Ba,useClass:dI,multi:!0,deps:[Kt]},{provide:hh,useClass:hh,deps:[Va,Us,Fs]},{provide:gg,useExisting:hh},{provide:Py,useExisting:Us},{provide:Us,useClass:Us,deps:[Kt]},{provide:Va,useClass:Va,deps:[Ba,_t]},{provide:class DM{},useClass:nI,deps:[]},[]];let yI=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Fs,useValue:n.appId},{provide:Oy,useExisting:Fs},eI]}}}return e.\u0275fac=function(n){return new(n||e)(Ee(Hy,12))},e.\u0275mod=wr({type:e}),e.\u0275inj=lr({providers:[...$y,...zy],imports:[Dy,GE]}),e})(),Wy=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Ee(Kt))},e.\u0275prov=Le({token:e,factory:function(n){let r=null;return r=n?new n:function CI(){return new Wy(Ee(Kt))}(),r},providedIn:"root"}),e})();function Ie(...e){return Dt(e,qi(e))}typeof window<"u"&&window;class In extends k{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Ua=Yi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:MI}=Array,{getPrototypeOf:II,prototype:OI,keys:AI}=Object;const{isArray:kI}=Array;function Xy(...e){const t=qi(e),n=function vC(e){return w(cl(e))?e.pop():void 0}(e),{args:r,keys:i}=function PI(e){if(1===e.length){const t=e[0];if(MI(t))return{args:t,keys:null};if(function RI(e){return e&&"object"==typeof e&&II(e)===OI}(t)){const n=AI(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Dt([],t);const s=new de(function jI(e,t,n=le){return r=>{qy(t,()=>{const{length:i}=e,s=new Array(i);let a=i,m=i;for(let _=0;_<i;_++)qy(t,()=>{const b=Dt(e[_],t);let T=!1;b.subscribe(B(r,E=>{s[_]=E,T||(T=!0,m--),m||r.next(n(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,t,i?a=>function NI(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,a):le));return n?s.pipe(function LI(e){return z(t=>function FI(e,t){return kI(t)?e(...t):e(t)}(e,t))}(n)):s}function qy(e,t,n){e?Wn(n,e,t):t()}function ph(...e){return function BI(){return Yr(1)}()(Dt(e,qi(e)))}function Ky(e){return new de(t=>{vn(e()).subscribe(t)})}function Hs(e,t){const n=w(e)?e:()=>e,r=i=>i.error(n());return new de(t?i=>t.schedule(r,0,i):r)}function mh(){return I((e,t)=>{let n=null;e._refCount++;const r=B(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class Qy extends de{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,R(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new At;const n=this.getSubject();t.add(this.source.subscribe(B(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=At.EMPTY)}return t}refCount(){return mh()(this)}}function Un(e,t){return I((n,r)=>{let i=null,s=0,a=!1;const m=()=>a&&!i&&r.complete();n.subscribe(B(r,_=>{i?.unsubscribe();let b=0;const T=s++;vn(e(_,T)).subscribe(i=B(r,E=>r.next(t?t(_,E,T,b++):E),()=>{i=null,m()}))},()=>{a=!0,m()}))})}function zs(e){return e<=0?()=>On:I((t,n)=>{let r=0;t.subscribe(B(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function vr(e,t){return I((n,r)=>{let i=0;n.subscribe(B(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Ha(e){return I((t,n)=>{let r=!1;t.subscribe(B(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Zy(e=UI){return I((t,n)=>{let r=!1;t.subscribe(B(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function UI(){return new Ua}function yr(e,t){const n=arguments.length>=2;return r=>r.pipe(e?vr((i,s)=>e(i,s,r)):le,zs(1),n?Ha(t):Zy(()=>new Ua))}function Nr(e,t){return w(t)?Et(e,t,1):Et(e,1)}function jt(e,t,n){const r=w(e)||t||n?{next:e,error:t,complete:n}:e;return r?I((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let m=!0;i.subscribe(B(s,_=>{var b;null===(b=r.next)||void 0===b||b.call(r,_),s.next(_)},()=>{var _;m=!1,null===(_=r.complete)||void 0===_||_.call(r),s.complete()},_=>{var b;m=!1,null===(b=r.error)||void 0===b||b.call(r,_),s.error(_)},()=>{var _,b;m&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(b=r.finalize)||void 0===b||b.call(r)}))}):le}function _r(e){return I((t,n)=>{let s,r=null,i=!1;r=t.subscribe(B(n,void 0,void 0,a=>{s=vn(e(a,_r(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function HI(e,t,n,r,i){return(s,a)=>{let m=n,_=t,b=0;s.subscribe(B(a,T=>{const E=b++;_=m?e(_,T,E):(m=!0,T),r&&a.next(_)},i&&(()=>{m&&a.next(_),a.complete()})))}}function Jy(e,t){return I(HI(e,t,arguments.length>=2,!0))}function vh(e){return e<=0?()=>On:I((t,n)=>{let r=[];t.subscribe(B(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function e_(e,t){const n=arguments.length>=2;return r=>r.pipe(e?vr((i,s)=>e(i,s,r)):le,vh(1),n?Ha(t):Zy(()=>new Ua))}function yh(e){return I((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const ze="primary",$s=Symbol("RouteTitle");class WI{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ki(e){return new WI(e)}function GI(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],m=e[s];if(a.startsWith(":"))i[a.substring(1)]=m;else if(a!==m.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Hn(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!t_(e[i],t[i]))return!1;return!0}function t_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}return e===t}function n_(e){return Array.prototype.concat.apply([],e)}function r_(e){return e.length>0?e[e.length-1]:null}function Ot(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Cr(e){return dp(e)?e:la(e)?Dt(Promise.resolve(e)):Ie(e)}const za=!1,XI={exact:function o_(e,t,n){if(!Br(e.segments,t.segments)||!$a(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!o_(e.children[r],t.children[r],n))return!1;return!0},subset:a_},i_={exact:function qI(e,t){return Hn(e,t)},subset:function KI(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t_(e[n],t[n]))},ignored:()=>!0};function s_(e,t,n){return XI[n.paths](e.root,t.root,n.matrixParams)&&i_[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function a_(e,t,n){return l_(e,t,t.segments,n)}function l_(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!Br(i,n)||t.hasChildren()||!$a(i,n,r))}if(e.segments.length===n.length){if(!Br(e.segments,n)||!$a(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!a_(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(Br(e.segments,i)&&$a(e.segments,i,r)&&e.children[ze])&&l_(e.children[ze],t,s,r)}}function $a(e,t,n){return t.every((r,i)=>i_[n](e[i].parameters,r.parameters))}class jr{constructor(t=new Ye([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return JI.serialize(this)}}class Ye{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Ot(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wa(this)}}class Ws{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ki(this.parameters)),this._parameterMap}toString(){return h_(this)}}function Br(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Gs=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return new _h},providedIn:"root"}),e})();class _h{parse(t){const n=new lO(t);return new jr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ys(t.root,!0)}`,r=function nO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Ga(n)}=${Ga(i)}`).join("&"):`${Ga(n)}=${Ga(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function eO(e){return encodeURI(e)}(t.fragment)}`:""}`}}const JI=new _h;function Wa(e){return e.segments.map(t=>h_(t)).join("/")}function Ys(e,t){if(!e.hasChildren())return Wa(e);if(t){const n=e.children[ze]?Ys(e.children[ze],!1):"",r=[];return Ot(e.children,(i,s)=>{s!==ze&&r.push(`${s}:${Ys(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function ZI(e,t){let n=[];return Ot(e.children,(r,i)=>{i===ze&&(n=n.concat(t(r,i)))}),Ot(e.children,(r,i)=>{i!==ze&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===ze?[Ys(e.children[ze],!1)]:[`${i}:${Ys(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ze]?`${Wa(e)}/${n[0]}`:`${Wa(e)}/(${n.join("//")})`}}function c_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ga(e){return c_(e).replace(/%3B/gi,";")}function Ch(e){return c_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ya(e){return decodeURIComponent(e)}function u_(e){return Ya(e.replace(/\+/g,"%20"))}function h_(e){return`${Ch(e.path)}${function tO(e){return Object.keys(e).map(t=>`;${Ch(t)}=${Ch(e[t])}`).join("")}(e.parameters)}`}const rO=/^[^\/()?;=#]+/;function Xa(e){const t=e.match(rO);return t?t[0]:""}const iO=/^[^=?&#]+/,oO=/^[^&#]+/;class lO{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ze]=new Ye(t,n)),r}parseSegment(){const t=Xa(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new pe(4009,za);return this.capture(t),new Ws(Ya(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Xa(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Xa(this.remaining);i&&(r=i,this.capture(r))}t[Ya(n)]=Ya(r)}parseQueryParam(t){const n=function sO(e){const t=e.match(iO);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function aO(e){const t=e.match(oO);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=u_(n),s=u_(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(s)}else t[i]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xa(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new pe(4010,za);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ze);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[ze]:new Ye([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new pe(4011,za)}}function wh(e){return e.segments.length>0?new Ye([],{[ze]:e}):e}function qa(e){const t={};for(const r of Object.keys(e.children)){const s=qa(e.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function cO(e){if(1===e.numberOfChildren&&e.children[ze]){const t=e.children[ze];return new Ye(e.segments.concat(t.segments),t.children)}return e}(new Ye(e.segments,t))}function Vr(e){return e instanceof jr}function fO(e,t,n,r,i){if(0===n.length)return Fi(t.root,t.root,t.root,r,i);const s=function g_(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new d_(!0,0,e);let t=0,n=!1;const r=e.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const m={};return Ot(s.outlets,(_,b)=>{m[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:m}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((m,_)=>{0==_&&"."===m||(0==_&&""===m?n=!0:".."===m?t++:""!=m&&i.push(m))}),i):[...i,s]},[]);return new d_(n,t,r)}(n);return s.toRoot()?Fi(t.root,t.root,new Ye([],{}),r,i):function a(_){const b=function gO(e,t,n,r){if(e.isAbsolute)return new Li(t.root,!0,0);if(-1===r)return new Li(n,n===t.root,0);return function p_(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new pe(4005,!1);i=r.segments.length}return new Li(r,!1,i-s)}(n,r+(Xs(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,t,e.snapshot?._urlSegment,_),T=b.processChildren?Ni(b.segmentGroup,b.index,s.commands):Dh(b.segmentGroup,b.index,s.commands);return Fi(t.root,b.segmentGroup,T,r,i)}(e.snapshot?._lastPathIndex)}function Xs(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function qs(e){return"object"==typeof e&&null!=e&&e.outlets}function Fi(e,t,n,r,i){let a,s={};r&&Ot(r,(_,b)=>{s[b]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),a=e===t?n:f_(e,t,n);const m=wh(qa(a));return new jr(m,s,i)}function f_(e,t,n){const r={};return Ot(e.children,(i,s)=>{r[s]=i===t?n:f_(i,t,n)}),new Ye(e.segments,r)}class d_{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Xs(r[0]))throw new pe(4003,!1);const i=r.find(qs);if(i&&i!==r_(r))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Li{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function Dh(e,t,n){if(e||(e=new Ye([],{})),0===e.segments.length&&e.hasChildren())return Ni(e,t,n);const r=function mO(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const a=e.segments[i],m=n[r];if(qs(m))break;const _=`${m}`,b=r<n.length-1?n[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!v_(_,b,a))return s;r+=2}else{if(!v_(_,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new Ye(e.segments.slice(0,r.pathIndex),{});return s.children[ze]=new Ye(e.segments.slice(r.pathIndex),e.children),Ni(s,0,i)}return r.match&&0===i.length?new Ye(e.segments,{}):r.match&&!e.hasChildren()?Sh(e,t,n):r.match?Ni(e,0,i):Sh(e,t,n)}function Ni(e,t,n){if(0===n.length)return new Ye(e.segments,{});{const r=function pO(e){return qs(e[0])?e[0].outlets:{[ze]:e}}(n),i={};return!r[ze]&&e.children[ze]&&1===e.numberOfChildren&&0===e.children[ze].segments.length?Ni(e.children[ze],t,n):(Ot(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=Dh(e.children[a],t,s))}),Ot(e.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Ye(e.segments,i))}}function Sh(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(qs(s)){const _=vO(s.outlets);return new Ye(r,_)}if(0===i&&Xs(n[0])){r.push(new Ws(e.segments[t].path,m_(n[0]))),i++;continue}const a=qs(s)?s.outlets[ze]:`${s}`,m=i<n.length-1?n[i+1]:null;a&&m&&Xs(m)?(r.push(new Ws(a,m_(m))),i+=2):(r.push(new Ws(a,{})),i++)}return new Ye(r,{})}function vO(e){const t={};return Ot(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=Sh(new Ye([],{}),0,n))}),t}function m_(e){const t={};return Ot(e,(n,r)=>t[r]=`${n}`),t}function v_(e,t,n){return e==n.path&&Hn(t,n.parameters)}const Ks="imperative";class zn{constructor(t,n){this.id=t,this.url=n}}class Th extends zn{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ur extends zn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ka extends zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class y_ extends zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class __ extends zn{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yO extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _O extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CO extends zn{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wO extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bO extends zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DO{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SO{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TO{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xO{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EO{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MO{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C_{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let OO=(()=>{class e{createUrlTree(n,r,i,s,a,m){return fO(n||r.root,i,s,a,m)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})(),AO=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(t){return OO.\u0275fac(t)},providedIn:"root"}),e})();class w_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=xh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=xh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Eh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Eh(t,this._root).map(n=>n.value)}}function xh(e,t){if(e===t.value)return t;for(const n of t.children){const r=xh(e,n);if(r)return r}return null}function Eh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Eh(e,n);if(r.length)return r.unshift(t),r}return[]}class or{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function ji(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class b_ extends w_{constructor(t,n){super(t),this.snapshot=n,Mh(this,t)}toString(){return this.snapshot.toString()}}function D_(e,t){const n=function PO(e,t){const a=new Qa([],{},{},"",{},ze,t,null,e.root,-1,{});return new T_("",new or(a,[]))}(e,t),r=new In([new Ws("",{})]),i=new In({}),s=new In({}),a=new In({}),m=new In(""),_=new Bi(r,i,a,m,s,ze,t,n.root);return _.snapshot=n.root,new b_(new or(_,[]),n)}class Bi{constructor(t,n,r,i,s,a,m,_){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=m,this.title=this.data?.pipe(z(b=>b[$s]))??Ie(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(z(t=>ki(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(z(t=>ki(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function S_(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function RO(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Qa{get title(){return this.data?.[$s]}constructor(t,n,r,i,s,a,m,_,b,T,E){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=m,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=T,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class T_ extends w_{constructor(t,n){super(n),this.url=t,Mh(this,n)}toString(){return x_(this._root)}}function Mh(e,t){t.value._routerState=e,t.children.forEach(n=>Mh(e,n))}function x_(e){const t=e.children.length>0?` { ${e.children.map(x_).join(", ")} } `:"";return`${e.value}${t}`}function Ih(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Hn(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Hn(t.params,n.params)||e.params.next(n.params),function YI(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Hn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Hn(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Oh(e,t){const n=Hn(e.params,t.params)&&function QI(e,t){return Br(e,t)&&e.every((n,r)=>Hn(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Oh(e.parent,t.parent))}function Qs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function FO(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Qs(e,r,i);return Qs(e,r)})}(e,t,n);return new or(r,i)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(m=>Qs(e,m)),a}}const r=function LO(e){return new Bi(new In(e.url),new In(e.params),new In(e.queryParams),new In(e.fragment),new In(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(s=>Qs(e,s));return new or(r,i)}}const Ah="ngNavigationCancelingError";function E_(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=Vr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=M_(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function M_(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Ah]=!0,r.cancellationCode=t,n&&(r.url=n),r}function I_(e){return O_(e)&&Vr(e.url)}function O_(e){return e&&e[Ah]}class NO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zs,this.attachRef=null}}let Zs=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new NO,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Za=!1;let Ph=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.parentContexts=Ke(Zs),this.location=Ke(Tn),this.changeDetector=Ke(ku),this.environmentInjector=Ke(Zn)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,Za);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,Za);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,Za);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new pe(4013,Za);this._activatedRoute=n;const i=this.location,a=n.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,_=new jO(n,m,i.injector);if(r&&function BO(e){return!!e.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(a);this.activated=i.createComponent(b,i.length,_)}else this.activated=i.createComponent(a,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Bt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]}),e})();class jO{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Bi?this.route:t===Zs?this.childContexts:this.parent.get(t,n)}}let Rh=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Pn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Nm],decls:1,vars:0,template:function(n,r){1&n&&ve(0,"router-outlet")},dependencies:[Ph],encapsulation:2}),e})();function A_(e,t){return e.providers&&!e._injector&&(e._injector=pa(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Fh(e){const t=e.children&&e.children.map(Fh),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ze&&(n.component=Rh),n}function pn(e){return e.outlet||ze}function P_(e,t){const n=e.filter(r=>pn(r)===t);return n.push(...e.filter(r=>pn(r)!==t)),n}function Js(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class $O{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Ih(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=ji(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Ot(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=ji(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:m})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=ji(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=ji(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new MO(s.value.snapshot))}),t.children.length&&this.forwardEvent(new xO(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(Ih(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(m.contexts),a.attachRef=m.componentRef,a.route=m.route.value,a.outlet&&a.outlet.attach(m.componentRef,m.route.value),Ih(m.route.value),this.activateChildRoutes(t,null,a.children)}else{const m=Js(i.snapshot),_=m?.get(Cs)??null;a.attachRef=null,a.route=i,a.resolver=_,a.injector=m,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class R_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ja{constructor(t,n){this.component=t,this.route=n}}function WO(e,t,n){const r=e._root;return eo(r,t?t._root:null,n,[r.value])}function Vi(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function RC(e){return null!==mo(e)}(e)?t.get(e):e:r}function eo(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ji(t);return e.children.forEach(a=>{(function YO(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=t?t.value:null,m=n?n.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const _=function XO(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Br(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Br(e.url,t.url)||!Hn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(e,t)||!Hn(e.queryParams,t.queryParams);default:return!Oh(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new R_(r)):(s.data=a.data,s._resolvedData=a._resolvedData),eo(e,t,s.component?m?m.children:null:n,r,i),_&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new Ja(m.outlet.component,a))}else a&&to(t,m,i),i.canActivateChecks.push(new R_(r)),eo(e,null,s.component?m?m.children:null:n,r,i)})(a,s[a.value.outlet],n,r.concat([a.value]),i),delete s[a.value.outlet]}),Ot(s,(a,m)=>to(a,n.getContext(m),i)),i}function to(e,t,n){const r=ji(e),i=e.value;Ot(r,(s,a)=>{to(s,i.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new Ja(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function no(e){return"function"==typeof e}function Lh(e){return e instanceof Ua||"EmptyError"===e?.name}const el=Symbol("INITIAL_VALUE");function Ui(){return Un(e=>Xy(e.map(t=>t.pipe(zs(1),function VI(...e){const t=qi(e);return I((n,r)=>{(t?ph(e,n,t):ph(e,n)).subscribe(r)})}(el)))).pipe(z(t=>{for(const n of t)if(!0!==n){if(n===el)return el;if(!1===n||n instanceof jr)return n}return!0}),vr(t=>t!==el),zs(1)))}function k_(e){return function ce(...e){return De(e)}(jt(t=>{if(Vr(t))throw E_(0,t)}),z(t=>!0===t))}const Nh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F_(e,t,n,r,i){const s=jh(e,t,n);return s.matched?function hA(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?Ie(i.map(a=>{const m=Vi(a,e);return Cr(function eA(e){return e&&no(e.canMatch)}(m)?m.canMatch(t,n):e.runInContext(()=>m(t,n)))})).pipe(Ui(),k_()):Ie(!0)}(r=A_(t,r),t,n).pipe(z(a=>!0===a?s:{...Nh})):Ie(s)}function jh(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Nh}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||GI)(n,e,t);if(!i)return{...Nh};const s={};Ot(i.posParams,(m,_)=>{s[_]=m.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function tl(e,t,n,r){if(n.length>0&&function gA(e,t,n){return n.some(r=>nl(e,t,r)&&pn(r)!==ze)}(e,n,r)){const s=new Ye(t,function dA(e,t,n,r){const i={};i[ze]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&pn(s)!==ze){const a=new Ye([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,i[pn(s)]=a}return i}(e,t,r,new Ye(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function pA(e,t,n){return n.some(r=>nl(e,t,r))}(e,n,r)){const s=new Ye(e.segments,function fA(e,t,n,r,i){const s={};for(const a of r)if(nl(e,n,a)&&!i[pn(a)]){const m=new Ye([],{});m._sourceSegment=e,m._segmentIndexShift=t.length,s[pn(a)]=m}return{...i,...s}}(e,t,n,r,e.children));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const i=new Ye(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function nl(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function L_(e,t,n,r){return!!(pn(e)===r||r!==ze&&nl(t,n,e))&&("**"===e.path||jh(t,e,n).matched)}function N_(e,t,n){return 0===t.length&&!e.children[n]}const rl=!1;class il{constructor(t){this.segmentGroup=t||null}}class j_{constructor(t){this.urlTree=t}}function ro(e){return Hs(new il(e))}function B_(e){return Hs(new j_(e))}class _A{constructor(t,n,r,i,s){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const t=tl(this.urlTree.root,[],[],this.config).segmentGroup,n=new Ye(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,ze).pipe(z(s=>this.createUrlTree(qa(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_r(s=>{if(s instanceof j_)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof il?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ze).pipe(z(i=>this.createUrlTree(qa(i),t.queryParams,t.fragment))).pipe(_r(i=>{throw i instanceof il?this.noMatchError(i):i}))}noMatchError(t){return new pe(4002,rl)}createUrlTree(t,n,r){const i=wh(t);return new jr(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(z(s=>new Ye([],s))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Dt(i).pipe(Nr(s=>{const a=r.children[s],m=P_(n,s);return this.expandSegmentGroup(t,m,a,s).pipe(z(_=>({segment:_,outlet:s})))}),Jy((s,a)=>(s[a.outlet]=a.segment,s),{}),e_())}expandSegment(t,n,r,i,s,a){return Dt(r).pipe(Nr(m=>this.expandSegmentAgainstRoute(t,n,r,m,i,s,a).pipe(_r(b=>{if(b instanceof il)return Ie(null);throw b}))),yr(m=>!!m),_r((m,_)=>{if(Lh(m))return N_(n,i,s)?Ie(new Ye([],{})):ro(n);throw m}))}expandSegmentAgainstRoute(t,n,r,i,s,a,m){return L_(i,n,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,s,a):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a):ro(n):ro(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?B_(s):this.lineralizeSegments(r,s).pipe(Et(a=>{const m=new Ye(a,{});return this.expandSegment(t,m,n,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){const{matched:m,consumedSegments:_,remainingSegments:b,positionalParamSegments:T}=jh(n,i,s);if(!m)return ro(n);const E=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?B_(E):this.lineralizeSegments(i,E).pipe(Et(A=>this.expandSegment(t,n,r,A.concat(b),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){return"**"===r.path?(t=A_(r,t),r.loadChildren?(r._loadedRoutes?Ie({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(z(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ye(i,{})))):Ie(new Ye(i,{}))):F_(n,r,i,t).pipe(Un(({matched:a,consumedSegments:m,remainingSegments:_})=>a?this.getChildConfig(t=r._injector??t,r,i).pipe(Et(T=>{const E=T.injector??t,A=T.routes,{segmentGroup:N,slicedSegments:V}=tl(n,m,_,A),q=new Ye(N.segments,N.children);if(0===V.length&&q.hasChildren())return this.expandChildren(E,A,q).pipe(z(te=>new Ye(m,te)));if(0===A.length&&0===V.length)return Ie(new Ye(m,{}));const J=pn(r)===s;return this.expandSegment(E,q,A,V,J?ze:s,!0).pipe(z(ye=>new Ye(m.concat(ye.segments),ye.children)))})):ro(n)))}getChildConfig(t,n,r){return n.children?Ie({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Ie({routes:n._loadedRoutes,injector:n._loadedInjector}):function uA(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?Ie(!0):Ie(i.map(a=>{const m=Vi(a,e);return Cr(function KO(e){return e&&no(e.canLoad)}(m)?m.canLoad(t,n):e.runInContext(()=>m(t,n)))})).pipe(Ui(),k_())}(t,n,r).pipe(Et(i=>i?this.configLoader.loadChildren(t,n).pipe(jt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function vA(e){return Hs(M_(rl,3))}())):Ie({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ie(r);if(i.numberOfChildren>1||!i.children[ze])return Hs(new pe(4e3,rl));i=i.children[ze]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const s=this.createSegmentGroup(t,n.root,r,i);return new jr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Ot(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[s]=n[m]}else r[s]=i}),r}createSegmentGroup(t,n,r,i){const s=this.createSegments(t,n.segments,r,i);let a={};return Ot(n.children,(m,_)=>{a[_]=this.createSegmentGroup(t,m,r,i)}),new Ye(s,a)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new pe(4001,rl);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class wA{}class SA{constructor(t,n,r,i,s,a,m){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=a,this.urlSerializer=m}recognize(){const t=tl(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ze).pipe(z(n=>{if(null===n)return null;const r=new Qa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ze,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new or(r,n),s=new T_(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const n=t.value,r=S_(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return Dt(Object.keys(r.children)).pipe(Nr(i=>{const s=r.children[i],a=P_(n,i);return this.processSegmentGroup(t,a,s,i)}),Jy((i,s)=>i&&s?(i.push(...s),i):null),function zI(e,t=!1){return I((n,r)=>{let i=0;n.subscribe(B(r,s=>{const a=e(s,i++);(a||t)&&r.next(s),!a&&r.complete()}))})}(i=>null!==i),Ha(null),e_(),z(i=>{if(null===i)return null;const s=U_(i);return function TA(e){e.sort((t,n)=>t.value.outlet===ze?-1:n.value.outlet===ze?1:t.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(t,n,r,i,s){return Dt(n).pipe(Nr(a=>this.processSegmentAgainstRoute(a._injector??t,a,r,i,s)),yr(a=>!!a),_r(a=>{if(Lh(a))return N_(r,i,s)?Ie([]):Ie(null);throw a}))}processSegmentAgainstRoute(t,n,r,i,s){if(n.redirectTo||!L_(n,r,i,s))return Ie(null);let a;if("**"===n.path){const m=i.length>0?r_(i).parameters:{},_=z_(r)+i.length;a=Ie({snapshot:new Qa(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$_(n),pn(n),n.component??n._loadedComponent??null,n,H_(r),_,W_(n)),consumedSegments:[],remainingSegments:[]})}else a=F_(r,n,i,t).pipe(z(({matched:m,consumedSegments:_,remainingSegments:b,parameters:T})=>{if(!m)return null;const E=z_(r)+_.length;return{snapshot:new Qa(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$_(n),pn(n),n.component??n._loadedComponent??null,n,H_(r),E,W_(n)),consumedSegments:_,remainingSegments:b}}));return a.pipe(Un(m=>{if(null===m)return Ie(null);const{snapshot:_,consumedSegments:b,remainingSegments:T}=m;t=n._injector??t;const E=n._loadedInjector??t,A=function xA(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:N,slicedSegments:V}=tl(r,b,T,A.filter(J=>void 0===J.redirectTo));if(0===V.length&&N.hasChildren())return this.processChildren(E,A,N).pipe(z(J=>null===J?null:[new or(_,J)]));if(0===A.length&&0===V.length)return Ie([new or(_,[])]);const q=pn(n)===s;return this.processSegment(E,A,N,V,q?ze:s).pipe(z(J=>null===J?null:[new or(_,J)]))}))}}function EA(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function U_(e){const t=[],n=new Set;for(const r of e){if(!EA(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=U_(r.children);t.push(new or(r.value,i))}return t.filter(r=>!n.has(r))}function H_(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function z_(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function $_(e){return e.data||{}}function W_(e){return e.resolve||{}}function G_(e){return"string"==typeof e.title||null===e.title}function Bh(e){return Un(t=>{const n=e(t);return n?Dt(n).pipe(z(()=>t)):Ie(t)})}const Hi=new Fe("ROUTES");let Vh=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ie(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Cr(n.loadComponent()).pipe(z(X_),jt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),yh(()=>{this.componentLoaders.delete(n)})),i=new Qy(r,()=>new k).pipe(mh());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(z(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,T=!1;Array.isArray(m)?b=m:(_=m.create(n).injector,b=n_(_.get(Hi,[],Ae.Self|Ae.Optional)));return{routes:b.map(Fh),injector:_}}),yh(()=>{this.childrenLoaders.delete(r)})),a=new Qy(s,()=>new k).pipe(mh());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(n){return Cr(n()).pipe(z(X_),Et(i=>i instanceof Fm||Array.isArray(i)?Ie(i):Dt(this.compiler.compileModuleAsync(i))))}}return e.\u0275fac=function(n){return new(n||e)(Ee(Ln),Ee(Mv))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function X_(e){return function LA(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let ol=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new k,this.configLoader=Ke(Vh),this.environmentInjector=Ke(Zn),this.urlSerializer=Ke(Gs),this.rootContexts=Ke(Zs),this.navigationId=0,this.afterPreactivation=()=>Ie(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new SO(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new DO(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new In({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ks,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vr(r=>0!==r.id),z(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),Un(r=>{let i=!1,s=!1;return Ie(r).pipe(jt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Un(a=>{const m=n.browserUrlTree.toString(),_=!n.navigated||a.extractedUrl.toString()!==m||m!==n.currentUrlTree.toString();if(!_&&"reload"!==(a.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const T="";return this.events.next(new y_(a.id,n.serializeUrl(r.rawUrl),T,0)),n.rawUrlTree=a.rawUrl,a.resolve(null),On}if(n.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return q_(a.source)&&(n.browserUrlTree=a.extractedUrl),Ie(a).pipe(Un(T=>{const E=this.transitions?.getValue();return this.events.next(new Th(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),E!==this.transitions?.getValue()?On:Promise.resolve(T)}),function CA(e,t,n,r){return Un(i=>function yA(e,t,n,r,i){return new _A(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(z(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),jt(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function IA(e,t,n,r,i){return Et(s=>function DA(e,t,n,r,i,s,a="emptyOnly"){return new SA(e,t,n,r,i,a,s).recognize().pipe(Un(m=>null===m?function bA(e){return new de(t=>t.error(e))}(new wA):Ie(m)))}(e,t,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(z(a=>({...s,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),jt(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!T.extras.skipLocationChange){const A=n.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);n.setBrowserUrl(A,T)}n.browserUrlTree=T.urlAfterRedirects}const E=new yO(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(E)}));if(_&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:T,extractedUrl:E,source:A,restoredState:N,extras:V}=a,q=new Th(T,this.urlSerializer.serialize(E),A,N);this.events.next(q);const J=D_(E,this.rootComponentType).snapshot;return Ie(r={...a,targetSnapshot:J,urlAfterRedirects:E,extras:{...V,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new y_(a.id,n.serializeUrl(r.extractedUrl),T,1)),n.rawUrlTree=a.rawUrl,a.resolve(null),On}}),jt(a=>{const m=new _O(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(m)}),z(a=>r={...a,guards:WO(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function nA(e,t){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?Ie({...n,guardsResult:!0}):function rA(e,t,n,r){return Dt(e).pipe(Et(i=>function cA(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Ie(s.map(m=>{const _=Js(t)??i,b=Vi(m,_);return Cr(function JO(e){return e&&no(e.canDeactivate)}(b)?b.canDeactivate(e,t,n,r):_.runInContext(()=>b(e,t,n,r))).pipe(yr())})).pipe(Ui()):Ie(!0)}(i.component,i.route,n,t,r)),yr(i=>!0!==i,!0))}(a,r,i,e).pipe(Et(m=>m&&function qO(e){return"boolean"==typeof e}(m)?function iA(e,t,n,r){return Dt(t).pipe(Nr(i=>ph(function oA(e,t){return null!==e&&t&&t(new TO(e)),Ie(!0)}(i.route.parent,r),function sA(e,t){return null!==e&&t&&t(new EO(e)),Ie(!0)}(i.route,r),function lA(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function GO(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>Ky(()=>Ie(a.guards.map(_=>{const b=Js(a.node)??n,T=Vi(_,b);return Cr(function ZO(e){return e&&no(e.canActivateChild)}(T)?T.canActivateChild(r,e):b.runInContext(()=>T(r,e))).pipe(yr())})).pipe(Ui())));return Ie(s).pipe(Ui())}(e,i.path,n),function aA(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Ie(!0);const i=r.map(s=>Ky(()=>{const a=Js(t)??n,m=Vi(s,a);return Cr(function QO(e){return e&&no(e.canActivate)}(m)?m.canActivate(t,e):a.runInContext(()=>m(t,e))).pipe(yr())}));return Ie(i).pipe(Ui())}(e,i.route,n))),yr(i=>!0!==i,!0))}(r,s,e,t):Ie(m)),z(m=>({...n,guardsResult:m})))})}(this.environmentInjector,a=>this.events.next(a)),jt(a=>{if(r.guardsResult=a.guardsResult,Vr(a.guardsResult))throw E_(0,a.guardsResult);const m=new CO(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(m)}),vr(a=>!!a.guardsResult||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Bh(a=>{if(a.guards.canActivateChecks.length)return Ie(a).pipe(jt(m=>{const _=new wO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),Un(m=>{let _=!1;return Ie(m).pipe(function OA(e,t){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ie(n);let s=0;return Dt(i).pipe(Nr(a=>function AA(e,t,n,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!G_(i)&&(s[$s]=i.title),function PA(e,t,n,r){const i=function RA(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ie({});const s={};return Dt(i).pipe(Et(a=>function kA(e,t,n,r){const i=Js(t)??r,s=Vi(e,i);return Cr(s.resolve?s.resolve(t,n):i.runInContext(()=>s(t,n)))}(e[a],t,n,r).pipe(yr(),jt(m=>{s[a]=m}))),vh(1),function $I(e){return z(()=>e)}(s),_r(a=>Lh(a)?On:Hs(a)))}(s,e,t,r).pipe(z(a=>(e._resolvedData=a,e.data=S_(e,n).resolve,i&&G_(i)&&(e.data[$s]=i.title),null)))}(a.route,r,e,t)),jt(()=>s++),vh(1),Et(a=>s===i.length?Ie(n):On))})}(n.paramsInheritanceStrategy,this.environmentInjector),jt({next:()=>_=!0,complete:()=>{_||(n.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),jt(m=>{const _=new bO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}))}),Bh(a=>{const m=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(jt(T=>{_.component=T}),z(()=>{})));for(const T of _.children)b.push(...m(T));return b};return Xy(m(a.targetSnapshot.root)).pipe(Ha(),zs(1))}),Bh(()=>this.afterPreactivation()),z(a=>{const m=function kO(e,t,n){const r=Qs(e,t._root,n?n._root:void 0);return new b_(r,t)}(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:m}}),jt(a=>{n.currentUrlTree=a.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),n.routerState=a.targetRouterState,"deferred"===n.urlUpdateStrategy&&(a.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,a),n.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>z(r=>(new $O(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,a=>this.events.next(a)),jt({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Ur(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),yh(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),_r(a=>{if(s=!0,O_(a)){I_(a)||(n.navigated=!0,n.restoreHistory(r,!0));const m=new Ka(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(m),I_(a)){const _=n.urlHandlingStrategy.merge(a.url,n.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||q_(r.source)};n.scheduleNavigation(_,Ks,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const m=new __(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(n.errorHandler(a))}catch(_){r.reject(_)}}return On}))}))}cancelNavigationTransition(n,r,i){const s=new Ka(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function q_(e){return e!==Ks}let K_=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ze);return r}getResolvedTitleForRoute(n){return n.data[$s]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return Ke(NA)},providedIn:"root"}),e})(),NA=(()=>{class e extends K_{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(Ee(Wy))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jA=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return Ke(VA)},providedIn:"root"}),e})();class BA{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let VA=(()=>{class e extends BA{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function id(e){return cr(()=>{const t=e.prototype.constructor,n=t[Yn]||Ul(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[Yn]||Ul(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(e)))(r||e)}}(),e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const al=new Fe("",{providedIn:"root",factory:()=>({})});let HA=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:function(){return Ke(zA)},providedIn:"root"}),e})(),zA=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function $A(e){throw e}function WA(e,t,n){return t.parse("/")}const GA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let on=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ke(fE),this.isNgZoneEnabled=!1,this.options=Ke(al,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$A,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||WA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ke(HA),this.routeReuseStrategy=Ke(jA),this.urlCreationStrategy=Ke(AO),this.titleStrategy=Ke(K_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=n_(Ke(Hi,{optional:!0})??[]),this.navigationTransitions=Ke(ol),this.urlSerializer=Ke(Gs),this.location=Ke(zu),this.isNgZoneEnabled=Ke(_t)instanceof _t&&_t.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=D_(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ks,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(s.state=_)}const m=this.parseUrl(n);this.scheduleNavigation(m,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Fh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:m,preserveFragment:_}=r,b=_?this.currentUrlTree.fragment:a;let T=null;switch(m){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,T,b??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Vr(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ks,null,r)}navigate(n,r={skipLocationChange:!1}){return function XA(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new pe(4008,!1)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...GA}:!1===r?{...YA}:r,Vr(n))return s_(this.currentUrlTree,n,i);const s=this.parseUrl(n);return s_(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let m,_,b,T;return a?(m=a.resolve,_=a.reject,b=a.promise):b=new Promise((E,A)=>{m=E,_=A}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:m,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(E=>Promise.reject(E))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ll=(()=>{class e{constructor(n,r,i,s,a,m){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new k;const _=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=n.events.subscribe(b=>{b instanceof Ur&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(n){this._preserveFragment=Bu(n)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(n){this._skipLocationChange=Bu(n)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(n){this._replaceUrl=Bu(n)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function ng(e,t,n){return function cb(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?tg:yc}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(n){return new(n||e)(Pe(on),Pe(Bi),function Lo(e){return function k0(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Wf(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===t)return n[i+1];i+=2}}}return null}(It(),e)}("tabindex"),Pe(Ko),Pe(fr),Pe(Lr))},e.\u0275dir=Bt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&Ts("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&n&&Xc("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Sr]}),e})();class Z_{}let QA=(()=>{class e{constructor(n,r,i,s,a){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(vr(n=>n instanceof Ur),Nr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=pa(s.providers,n,`Route: ${s.path}`));const a=s._injector??n,m=s._loadedInjector??a;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(a,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(m,s.children??s._loadedRoutes))}return Dt(i).pipe(Yr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ie(null);const s=i.pipe(Et(a=>null===a?Ie(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));return r.loadComponent&&!r._loadedComponent?Dt([s,this.loader.loadComponent(r)]).pipe(Yr()):s})}}return e.\u0275fac=function(n){return new(n||e)(Ee(on),Ee(Mv),Ee(Zn),Ee(Z_),Ee(Vh))},e.\u0275prov=Le({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Uh=new Fe("");let J_=(()=>{class e{constructor(n,r,i,s,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Th?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ur&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof C_&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new C_(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function Rg(){throw new Error("invalid")}()},e.\u0275prov=Le({token:e,factory:e.\u0275fac}),e})();function Hr(e,t){return{\u0275kind:e,\u0275providers:t}}function tC(){const e=Ke(Ln);return t=>{const n=e.get(Da);if(t!==n.components[0])return;const r=e.get(on),i=e.get(nC);1===e.get(zh)&&r.initialNavigation(),e.get(rC,null,Ae.Optional)?.setUpPreloading(),e.get(Uh,null,Ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const nC=new Fe("",{factory:()=>new k}),zh=new Fe("",{providedIn:"root",factory:()=>1});const rC=new Fe("");function nP(e){return Hr(0,[{provide:rC,useExisting:QA},{provide:Z_,useExisting:e}])}const iC=new Fe("ROUTER_FORROOT_GUARD"),rP=[zu,{provide:Gs,useClass:_h},on,Zs,{provide:Bi,useFactory:function eC(e){return e.routerState.root},deps:[on]},Vh,[]];function iP(){return new Fv("Router",on)}let sC=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[rP,[],{provide:Hi,multi:!0,useValue:n},{provide:iC,useFactory:lP,deps:[[on,new us,new hs]]},{provide:al,useValue:r||{}},r?.useHash?{provide:Lr,useClass:JE}:{provide:Lr,useClass:iy},{provide:Uh,useFactory:()=>{const e=Ke(CM),t=Ke(_t),n=Ke(al),r=Ke(ol),i=Ke(Gs);return n.scrollOffset&&e.setOffset(n.scrollOffset),new J_(i,r,e,t,n)}},r?.preloadingStrategy?nP(r.preloadingStrategy).\u0275providers:[],{provide:Fv,multi:!0,useFactory:iP},r?.initialNavigation?cP(r):[],[{provide:oC,useFactory:tC},{provide:Ev,multi:!0,useExisting:oC}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Hi,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(Ee(iC,8))},e.\u0275mod=wr({type:e}),e.\u0275inj=lr({imports:[Rh]}),e})();function lP(e){return"guarded"}function cP(e){return["disabled"===e.initialNavigation?Hr(3,[{provide:Ca,multi:!0,useFactory:()=>{const t=Ke(on);return()=>{t.setUpLocationChangeListener()}}},{provide:zh,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Hr(2,[{provide:zh,useValue:0},{provide:Ca,multi:!0,deps:[Ln],useFactory:t=>{const n=t.get(QE,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const s=t.get(on),a=t.get(nC);(function r(i){t.get(on).events.pipe(vr(a=>a instanceof Ur||a instanceof Ka||a instanceof __),z(a=>a instanceof Ur||a instanceof Ka&&(0===a.code||1===a.code)&&null),vr(a=>null!==a),zs(1)).subscribe(()=>{i()})})(()=>{i(!0)}),t.get(ol).afterPreactivation=()=>(i(!0),a.closed?Ie(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const oC=new Fe("");class so{}so.\u0275fac=function(t){return new(t||so)},so.\u0275cmp=Pn({type:so,selectors:[["app-topbar"]],decls:13,vars:0,consts:[[1,"linkbox","font-menu"],["routerLink","/home",1,"home"],["routerLink","/about"],["routerLink","/work"],["routerLink","/contact"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"a2",1),Ce(2,"iara benz"),be(),ve(3,"br")(4,"br"),we(5,"a1",2),Ce(6,"about"),be(),ve(7,"br"),we(8,"a1",3),Ce(9,"work"),be(),ve(10,"br"),we(11,"a1",4),Ce(12,"contact"),be()())},dependencies:[ll],styles:['.linkbox[_ngcontent-%COMP%]{padding:2vh 2vw 0 0;text-align:right;position:fixed;top:0;right:0;z-index:9999}a1[_ngcontent-%COMP%]:link   view[_ngcontent-%COMP%]{color:#000}a1[_ngcontent-%COMP%]:visited{color:#000}a1[_ngcontent-%COMP%]{position:relative;color:#000;text-decoration:none;cursor:pointer}a1[_ngcontent-%COMP%]:hover{color:#000}a1[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:100%;height:1px;bottom:0;left:0;background-color:#000;transform:scaleX(1);transition:transform .3s ease;transform-origin:bottom right}a1[_ngcontent-%COMP%]:hover:before{transform:scaleX(0);transform-origin:bottom right}a1[_ngcontent-%COMP%]:link   view[_ngcontent-%COMP%]{color:#234da1}a2[_ngcontent-%COMP%]:visited{color:#234da1}a2[_ngcontent-%COMP%]{position:relative;color:#234da1;text-decoration:none;cursor:pointer}a2[_ngcontent-%COMP%]:hover{color:#234da1}a2[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:100%;height:1px;bottom:0;left:0;background-color:#234da1;transform:scaleX(1);transition:transform .3s ease;transform-origin:bottom right}a2[_ngcontent-%COMP%]:hover:before{transform:scaleX(0);transform-origin:bottom right}']});class oo{constructor(){this.title="portfolio-website"}}oo.\u0275fac=function(t){return new(t||oo)},oo.\u0275cmp=Pn({type:oo,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"content"]],template:function(t,n){1&t&&(we(0,"div",0),ve(1,"app-topbar")(2,"router-outlet"),be())},dependencies:[Ph,so],styles:[".content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]});class ao{}ao.\u0275fac=function(t){return new(t||ao)},ao.\u0275cmp=Pn({type:ao,selectors:[["app-about"]],decls:16,vars:0,consts:[[1,"about-content"],[1,"about","header"],[1,"font-top"],[1,"about-info"],[1,"about-text"],[1,"image-container"],["src","assets/iara_benz.webp","alt","",1,"about-image"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"div",1)(2,"p",2),Ce(3," about "),be()(),we(4,"div",3)(5,"div",4)(6,"p"),Ce(7," Hello! My name is Iara Benz, and I recently graduated from Pforzheim with a Bachelor of Arts after studying visual communication. I love design and art, and hope to spread that love to others. Even when I'm not working, I love being creative through drawing and am always ready to learn something new. "),ve(8,"br")(9,"br"),Ce(10," I'm well versed in the design essentials \u2013 Adobe Photoshop, InDesign, Illustrator, and XD. Whether it's creating visual concepts or user-friendly interfaces, these are my tools of choice to bring my creative ideas to life. Outside of these basics, I also have experience with most other Adobe Creative Cloud programs, Figma, Webflow and Blender. Coding is another discipline that fascinates me, and that I'm eager to pursue further. I've already gained experience with Angular, CSS, and HTML, and I'm always looking forward to expanding my coding horizons. "),ve(11,"br")(12,"br"),Ce(13," This portfolio offers a glimpse into my work and serves as a visual chronicle of my growth and passion. "),be()(),we(14,"div",5),ve(15,"img",6),be()()())},styles:[".font-top[_ngcontent-%COMP%]{font-size:100px;font-family:Space Grotesk,sans-serif;font-weight:700;text-align:left;height:max-content;align-items:left;align-content:left;color:#234da1}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-content:left}.about-text[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-weight:lighter;justify-content:left;align-items:left;font-size:30px;width:60%;height:100px;padding:0 4vw 0 0}.image-container[_ngcontent-%COMP%]{width:40%}.about-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-content:left}.about-content[_ngcontent-%COMP%]{padding:2vh 2vw 2vh 2vw}.about-image[_ngcontent-%COMP%]{width:100%}"]});class lo{}lo.\u0275fac=function(t){return new(t||lo)},lo.\u0275cmp=Pn({type:lo,selectors:[["app-contact"]],decls:36,vars:0,consts:[[1,"contact-content"],[1,"header"],[1,"font-top"],[1,"contact-info"],[1,"contact-text"],["href","mailto:iara.benz@hotmail.com",1,"mail"],["href","https://www.linkedin.com/in/iara-benz-8124ba166/",1,"mail"],["href","https://b-iara.itch.io/",1,"mail"],["href","https://github.com/beeeepbooop/Portfolio-Iara-Benz",1,"mail"],[1,"kreis"],["src","assets/Kreis_contact.svg","alt","",1,"rotate"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"div",1)(2,"p",2),Ce(3," contact "),be()(),we(4,"div",3)(5,"div",4),ve(6,"h1"),we(7,"p"),Ce(8," If my portfolio interests you please feel free to contact me via E-Mail: "),ve(9,"br")(10,"br"),we(11,"a",5),Ce(12,"E-mail me"),be(),ve(13,"br")(14,"br"),Ce(15," or linkedin: "),ve(16,"br")(17,"br"),we(18,"a",6),Ce(19,"my linkedin"),be(),ve(20,"br")(21,"br"),Ce(22," and feel free to check out my games: "),ve(23,"br")(24,"br"),we(25,"a",7),Ce(26,"my games"),be(),ve(27,"br")(28,"br"),Ce(29," and check out how i built this website using angular, html & css: "),ve(30,"br")(31,"br"),we(32,"a",8),Ce(33,"my github"),be()()(),we(34,"div",9),ve(35,"img",10),be()()())},styles:['.font-top[_ngcontent-%COMP%]{font-size:100px;font-family:Space Grotesk,sans-serif;font-weight:700;text-align:left;height:max-content;align-items:left;align-content:left;color:#234da1}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-content:left}.contact-text[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-weight:lighter;justify-content:left;align-items:left;font-size:30px;width:45%;padding:0 2vw 1vh 0}.contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-content:left;width:100%}.contact-content[_ngcontent-%COMP%]{padding:2vh 2vw 0 2vw;width:140vw;overflow-y:hidden!important;height:96.3dvh}a[_ngcontent-%COMP%]:link   view[_ngcontent-%COMP%]{color:#234da1}a[_ngcontent-%COMP%]:visited{color:#234da1}a[_ngcontent-%COMP%]{position:relative;color:#234da1;text-decoration:none}a[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:100%;height:2px;bottom:-5%;left:0;background-color:#234da1;transform:scaleX(1);transition:transform .3s ease;transform-origin:bottom left}a[_ngcontent-%COMP%]:hover:before{transform:scaleX(0);transform-origin:bottom left}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.kreis[_ngcontent-%COMP%]{mix-blend-mode:multiply;background-blend-mode:multiply;width:40%}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 35s infinite linear;margin-top:30dvh}']});class co{constructor(){this.currentImage="",this.imageCounter=0}ngOnInit(){this.currentImage=this.imageSources[0]}previousImage(){this.imageCounter>0?this.imageCounter--:this.imageCounter=this.imageSources.length-1,this.currentImage=this.imageSources[this.imageCounter]}nextImage(){this.imageCounter<this.imageSources.length-1?this.imageCounter++:this.imageCounter=0,this.currentImage=this.imageSources[this.imageCounter]}}co.\u0275fac=function(t){return new(t||co)},co.\u0275cmp=Pn({type:co,selectors:[["app-image-viewer"]],inputs:{imageSources:"imageSources"},decls:9,vars:1,consts:[[1,"image-viewer-container"],[1,"btn-container"],[1,"image-change-btn","btn-prev",3,"click"],[1,"fa","fa-angle-left","fa-3x","btn-icon-left"],[1,"image-container"],["alt","",1,"display-image",3,"src"],[1,"image-change-btn","btn-next",3,"click"],[1,"fa","fa-angle-right","fa-3x","btn-icon-right"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"div",1)(2,"div",2),Ts("click",function(){return n.previousImage()}),ve(3,"i",3),be()(),we(4,"div",4),ve(5,"img",5),be(),we(6,"div",1)(7,"div",6),Ts("click",function(){return n.nextImage()}),ve(8,"i",7),be()()()),2&t&&(pi(5),Zc("src",n.currentImage,yc))},styles:[".image-viewer-container[_ngcontent-%COMP%]{position:relative;align-items:center;display:flex;flex-direction:row;background-repeat:no-repeat;background-size:contain;margin-left:1.78dvw;width:-moz-fit-content;width:fit-content;height:100%;max-height:100dvh}.image-container[_ngcontent-%COMP%]{height:100%;width:100%;max-width:100%;max-height:100%}.display-image[_ngcontent-%COMP%]{height:auto;width:auto;max-width:100%;max-height:100%}.image-change-btn[_ngcontent-%COMP%]{display:inline-block;border-radius:50%;padding:1em;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background-color:#d0d1e64d}.image-change-btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#adafd149}.btn-container[_ngcontent-%COMP%]{height:100%;width:0%;display:flex;justify-content:center;text-align:center}.btn-prev[_ngcontent-%COMP%]{position:absolute;left:1%;align-self:center;text-align:center;height:1em;width:1em;color:#fff;display:flex;justify-content:center;align-items:center}.btn-next[_ngcontent-%COMP%]{position:absolute;right:1%;align-self:center;height:1em;width:1em;color:#fff;display:flex;justify-content:center;align-items:center}.btn-icon-left[_ngcontent-%COMP%]{margin-right:25%}.btn-icon-right[_ngcontent-%COMP%]{margin-left:25%}"]});const $h=function(){return{height:"80dvh","max-height":"80dvh"}};class uo{constructor(){this.kleinsteImages=["assets/Das_kleinste_Mockup_1.webp","assets/Das_kleinste_Mockup_2.webp","assets/Das_kleinste_Mockup_3.webp","assets/Das_kleinste_Mockup_4.webp","assets/Das_kleinste_Mockup_5.webp","assets/Das_kleinste_Mockup_6.webp"],this.risoImages=["assets/Traum (1).webp","assets/Traum (2).webp","assets/Traum (3).webp","assets/Traum (4).webp","assets/Traum (5).webp","assets/Traum (6).webp","assets/Traum (7).webp","assets/Traum (8).webp","assets/Traum (9).webp","assets/Traum (10).webp"],this.verschwindenImages=["assets/Verschwinden_Magazine (1).webp","assets/Verschwinden_Magazine (2).webp","assets/Verschwinden_Magazine (3).webp","assets/Verschwinden_Magazine (4).webp","assets/Verschwinden_Magazine (5).webp","assets/Verschwinden_Magazine (6).webp","assets/Verschwinden_Magazine (7).webp","assets/Verschwinden_Magazine (8).webp","assets/Verschwinden_Magazine (9).webp","assets/Verschwinden_Magazine (10).webp","assets/Verschwinden_Magazine (11).webp","assets/Verschwinden_Magazine (12).webp","assets/Verschwinden_Magazine (13).webp","assets/Verschwinden_Magazine (14).webp","assets/Verschwinden_Magazine (15).webp","assets/Verschwinden_Magazine (16).webp","assets/Verschwinden_Magazine (17).webp","assets/Verschwinden_Magazine (18).webp","assets/Verschwinden_Magazine (19).webp","assets/Verschwinden_Magazine (20).webp","assets/Verschwinden_Magazine (21).webp","assets/Verschwinden_Magazine (23).webp","assets/Verschwinden_Magazine (24).webp","assets/Verschwinden_Magazine (25).webp","assets/Verschwinden_Magazine (26).webp"],this.typoImages=["assets/Typo__Innenseiten (1).webp","assets/Typo__Innenseiten (2).webp","assets/Typo__Innenseiten (3).webp","assets/Typo__Innenseiten (4).webp","assets/Typo__Innenseiten (5).webp","assets/Typo__Innenseiten (6).webp","assets/Typo__Innenseiten (7).webp","assets/Typo__Innenseiten (8).webp","assets/Typo__Innenseiten (9).webp","assets/Typo__Innenseiten (10).webp","assets/Typo__Innenseiten (11).webp","assets/Typo__Innenseiten (12).webp","assets/Typo__Innenseiten (13).webp","assets/Typo__Innenseiten (14).webp","assets/Typo__Innenseiten (15).webp","assets/Typo__Innenseiten (16).webp","assets/Typo__Innenseiten (17).webp","assets/Typo__Innenseiten (18).webp","assets/Typo__Innenseiten (19).webp","assets/Typo__Innenseiten (20).webp","assets/Typo__Innenseiten (21).webp","assets/Typo__Innenseiten (23).webp","assets/Typo__Innenseiten (24).webp","assets/Typo__Innenseiten (25).webp"]}}uo.\u0275fac=function(t){return new(t||uo)},uo.\u0275cmp=Pn({type:uo,selectors:[["app-work"]],decls:188,vars:9,consts:[[1,"work","header"],[1,"font-top"],[1,"work-content"],[1,"line"],[1,"work","projects"],[1,"project-text"],["ngxConveyer","",1,"project_images_scroll_bar"],["src","assets/Iara_Benz_Bilder_1.webp","alt","",1,"side-scroll-image"],["src","assets/Iara_Benz_Bilder_2.webp","alt","",1,"side-scroll-image"],["src","assets/Iara_Benz_Bilder_3.webp","alt","",1,"side-scroll-image"],["src","assets/Iara_Benz_Bilder_4.webp","alt","",1,"side-scroll-image"],["src","assets/Iara_Benz_Bilder_5.webp","alt","",1,"side-scroll-image"],["src","assets/Iara_Benz_Bilder_6.webp","alt","",1,"side-scroll-image"],["src","assets/UI_Screen_1.webp","alt","",1,"side-scroll-image"],["src","assets/UI_Plakat.webp","alt","",1,"side-scroll-image"],["src","assets/UI_Screen_2.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste_Mockup_1.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste_Mockup_2.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste_Mockup_3.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste_Mockup_4.webp","alt","",1,"side-scroll-image"],["src","assets/Das_kleinste_Mockup_5.webp","alt","",1,"side-scroll-image"],[1,"project_images_scroll"],["controls","","src","assets/Buns_Adventures.mp4",1,"video"],[1,"image-viewer",3,"imageSources","ngStyle"],["href","https://b-iara.itch.io/help-your-friend",1,"hyf_b"],["src","assets/HYF_Screenshot_Game.webp","alt","",1,"side-scroll-image"],["src","assets/HYF_Endbild.webp","alt","",1,"side-scroll-image"],["src","assets/HYF_Screenshot_Start.webp","alt","",1,"side-scroll-image"],["href","https://b-iara.itch.io/short-ghost-game",1,"gg_b"],["src","assets/Ghost_szene_lang.webp","alt","",1,"side-scroll-image"],["src","assets/Ghost_Ende.gif","alt","",1,"side-scroll-image"],[1,"uppercase"],["src","assets/LOWA_Plakate.webp","alt","",1,"side-scroll-image"],["src","assets/LOWA_Schuhkarton.webp","alt","",1,"side-scroll-image"],["src","assets/LOWA_Tshirt.webp","alt","",1,"side-scroll-image"],["src","assets/KiR_Ansicht_Aussen.webp","alt","",1,"side-scroll-image"],["src","assets/KiR_Ansicht_Dreesen_Innen.webp","alt","",1,"side-scroll-image"],["src","assets/KiR_Ansicht_Foyer_Innen.webp","alt","",1,"side-scroll-image"],["src","assets/KiR_Ansicht_Obergeschoss.webp","alt","",1,"side-scroll-image"],["src","assets/CD_Briefb\xf6gen.webp","alt","",1,"side-scroll-image"],["src","assets/CD_Fahne.webp","alt","",1,"side-scroll-image"],["src","assets/CD_Malbuch.gif","alt","",1,"side-scroll-image"],["src","assets/CD_Visitenkarte.webp","alt","",1,"side-scroll-image"],["src","assets/CD_Ortschild.gif","alt","",1,"side-scroll-image"],["src","assets/CD_Wegweiser.webp","alt","",1,"side-scroll-image"],["src","assets/CF_Familie.webp","alt","",1,"side-scroll-image"],["src","assets/CF_Sitzbank.webp","alt","",1,"side-scroll-image"],["src","assets/CF_Spaziergang.webp","alt","",1,"side-scroll-image"],[3,"imageSources","ngStyle"],["src","assets/Portrait1.webp","alt","",1,"side-scroll-image"],["src","assets/Portrait2.webp","alt","",1,"side-scroll-image"],["src","assets/Portrait3.webp","alt","",1,"side-scroll-image"],["src","assets/Portrait4.webp","alt","",1,"side-scroll-image"],["src","assets/Portrait5.webp","alt","",1,"side-scroll-image"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"p",1),Ce(2," work "),be()(),we(3,"div",2),ve(4,"hr",3),we(5,"div",4)(6,"div",5)(7,"h1"),Ce(8," bachelor: "),ve(9,"br"),Ce(10," was wir "),ve(11,"br"),Ce(12," nicht sehen "),be(),we(13,"p"),Ce(14," Mental illnesses can be hidden, complex, and uncomfortable. However, in order to break stigmas and create a positive world, it is vital to face them head-on. This led to \"Was wir nicht sehen\" (transl. what we don't see), a concept for a video game that was designed as part of my bachelor's thesis. It tackles the topic of depression by letting players step into the mind of a person with depression. The players guide the character through her negative feelings and help her in overcoming her struggles. This game playfully addresses the importance of mental health and its acceptance. "),be()(),we(15,"div",6),ve(16,"img",7)(17,"img",8)(18,"img",9)(19,"img",10)(20,"img",11)(21,"img",12),be()(),ve(22,"hr",3),we(23,"div",4)(24,"div",5)(25,"h1"),Ce(26,"ui/ux design: bodily"),be(),we(27,"p"),Ce(28,' "Bodily" is an app concept that aims to solve the problems of online shopping. This app aims to revolutionize the online shopping industry by making it smarter, simpler, and more sustainable. Through the use of Body-IDs consumers can instantly know whether an item of clothing from third-party retailers will fit themselves and their friends, thus avoiding the environmentally damaging and time-consuming process of often returning ill-fitting clothing. The app design is defined by simple shapes and vibrant characters, creating a user-friendly interface and brand. '),be()(),we(29,"div",6),ve(30,"img",13)(31,"img",14)(32,"img",15),be()(),ve(33,"hr",3),we(34,"div",4)(35,"div",5)(36,"h1"),Ce(37,"illustration: "),ve(38,"br"),Ce(39," das kleinste "),ve(40,"br"),Ce(41," von allem "),be(),we(42,"p"),Ce(43," \u201eDas Kleinste von Allem\u201c (transl. The Smallest of Everything) is a lighthearted children's book about a tiny spider who begins a journey into the vast world around itself in search of anything that is even smaller than itself. In the short book, the spider overcomes new challenges, allowing itself to gain more confidence and new perspectives. This story book should encourage its young readers to be brave, choose their own path and enjoy their differences. The book design is simple and effective through the use of adorable characters and its limited color scheme. Also, the hand-lettered text is easy to read by young children. "),be()(),we(44,"div",6),ve(45,"img",16)(46,"img",17)(47,"img",18)(48,"img",19)(49,"img",20)(50,"img",21),be()(),ve(51,"hr",3),we(52,"div",4)(53,"div",5)(54,"h1"),Ce(55," animation: bun's "),ve(56,"br"),Ce(57,"adventures"),be(),we(58,"p"),Ce(59,' "Bun\'s Adventures!" is a concept for an animated children\'s show about the little adventurous bunny "Bun", who is always up to new and exciting antics with his friends. Shown here is a hand-animated intro scene for the show, that gives viewers insights into Bun\'s life and the show. In order to not be too visually stimulating for its young viewers, the show has been deliberately kept simple, with easily recognizable characters, limited colors and the use of empty space. '),be()(),we(60,"div",22),ve(61,"video",23),be()(),ve(62,"hr",3),we(63,"div",4)(64,"div",5)(65,"h1"),Ce(66,"risograph "),ve(67,"br"),Ce(68," zine: (t)raum"),be(),we(69,"p"),Ce(70," In the process of exploring paths between remembered, invented and existing spaces through drawings, this short risograph zine was created. In this entirely handmade zine, the surreal landscapes and experiences of our dreams were examined and documented. The short booklet depicts a typical morning routine with not so typical absurdities in the form of two-colored illustrations. "),be()(),ve(71,"app-image-viewer",24),be(),ve(72,"hr",3),we(73,"div",4)(74,"div",5)(75,"h1"),Ce(76,"game design: help your "),ve(77,"br"),Ce(78," friend "),be(),we(79,"p"),Ce(80," This short point & click adventure mini-game was illustrated, written and programmed by me with the use of Ren'Py, a python based game engine. Throughout this lighthearted game, the player can interact with their surroundings and game's main character, allowing them to gain new insights in their friend's life and help her recover her lost earring. "),ve(81,"br")(82,"br"),we(83,"a",25),Ce(84," try the game "),be()()(),we(85,"div",6),ve(86,"img",26)(87,"img",27)(88,"img",28),be()(),ve(89,"hr",3),we(90,"div",4)(91,"div",5)(92,"h1"),Ce(93,"game design: short ghost "),ve(94,"br"),Ce(95," game"),be(),we(96,"p"),Ce(97," Help a lost ghost safely find its way back home while eluding various obstacles, in this short jump & run style game. This short mini-game was both illustrated and programmed by me using p5.js. "),ve(98,"br")(99,"br"),we(100,"a",29),Ce(101," try the game "),be()()(),we(102,"div",6),ve(103,"img",30)(104,"img",31),be()(),ve(105,"hr",3),we(106,"div",4)(107,"div",5)(108,"h1"),Ce(109,"ad design: "),ve(110,"br"),Ce(111," 100th anniversary"),be(),we(112,"p",32),Ce(113," for their 100th anniversary, the shoe company LOWA was looking for a new ad campaign. this potential concept was created to celebrate the longstanding company and the memories that their loyal customers had with their shoes. this design mixes the impression such memories can make with the actual shoe imprints in order to create a new, striking ad campaign. "),be()(),we(114,"div",6),ve(115,"img",33)(116,"img",34)(117,"img",35),be()(),ve(118,"hr",3),we(119,"div",4)(120,"div",5)(121,"h1"),Ce(122,"interior "),ve(123,"br"),Ce(124," design: drees "),ve(125,"br"),Ce(126," & sommer"),be(),we(127,"p"),Ce(128," In the scope of a student competition, me and my two teammates, were tasked with creating a communicative design for the new Drees & Sommer building, that appeals both to the daily workers and guests. We focused on presenting the mission statements of the company through the use of interactive columns, innovative light and appealing typography. Our design ultimately won third place in the competition. "),be()(),we(129,"div",6),ve(130,"img",36)(131,"img",37)(132,"img",38)(133,"img",39),be()(),ve(134,"hr",3),we(135,"div",4)(136,"div",5)(137,"h1"),Ce(138," corporate "),ve(139,"br"),Ce(140," design: h\xf6fen "),ve(141,"br"),Ce(142," an der enz "),be(),we(143,"p"),Ce(144," The local municipality of \u201cH\xf6fen an der Enz\u201d, in the black forest, was searching for a brand-new identity that would freshen up their public image and breathe new life into their tranquil community. In this concept, all vital aspects of the area were simplified into colorful shapes and utilized alongside lively typography and playful photography in order to bring a more fun, youthful and family-oriented flair to this small town. "),be()(),we(145,"div",6),ve(146,"img",40)(147,"img",41)(148,"img",42)(149,"img",43)(150,"img",44)(151,"img",45)(152,"img",46)(153,"img",47)(154,"img",48),be()(),ve(155,"hr",3),we(156,"div",4)(157,"div",5)(158,"h2"),Ce(159,"magazine design: verschwinden"),be(),we(160,"p"),Ce(161," In this experimental magazine, images and texts become intertwined and form new meanings. With this abstract form of story-telling, the concept of \u201cVerschwinden\u201d (transl. disappearing) is analyzed and documented through the use of exploratory typography and photography. "),be()(),ve(162,"app-image-viewer",49),be(),ve(163,"hr",3),we(164,"div",4)(165,"div",5)(166,"h2"),Ce(167,"magazine & "),ve(168,"br"),Ce(169," font design: virus"),be(),we(170,"p"),Ce(171,' Using my self-made monotype font "Virus", this magazine visualizes an experimental exploration of computer viruses through distorted typography and composition. The magazine itself depicts what it means to have been ravaged by an unknown and invisible computer virus, as shown through the severe distortions and eligibility of the pages and texts. '),be()(),ve(172,"app-image-viewer",49),be(),ve(173,"hr",3),we(174,"div",4)(175,"div",5)(176,"h1"),Ce(177,"visual arts: "),ve(178,"br"),Ce(179," self-portraits\u200d "),be(),we(180,"p"),Ce(181," This is a small selection of self-portraits from 2020-2023 that analyze the self on a visual level through a variety of different mediums. "),be()(),we(182,"div",6),ve(183,"img",50)(184,"img",51)(185,"img",52)(186,"img",53)(187,"img",54),be()()()),2&t&&(pi(71),Ei("imageSources",n.risoImages)("ngStyle",ma(6,$h)),pi(91),Ei("imageSources",n.verschwindenImages)("ngStyle",ma(7,$h)),pi(10),Ei("imageSources",n.typoImages)("ngStyle",ma(8,$h)))},dependencies:[wy,co],styles:[".font-top[_ngcontent-%COMP%]{font-size:100px;font-family:Space Grotesk,sans-serif;font-weight:700;text-align:left;height:max-content;color:#234da1}.work-content[_ngcontent-%COMP%]{padding:0 0 0vh;max-width:100dvw}.work[_ngcontent-%COMP%]{padding:2vh 2vw 0 2vw}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-items:baseline;align-content:baseline;max-width:100dvw}.projects[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.project-text[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-weight:lighter;justify-content:left;align-items:left;align-items:center;width:410px;font-size:large}p[_ngcontent-%COMP%]{font:600;width:400px;padding:0 2vw 0 0;align-self:center}h1[_ngcontent-%COMP%]{position:relative;font-size:80px;width:700px;transform:translateY(-10px);z-index:500;line-height:1.2;overflow:visible}h2[_ngcontent-%COMP%]{position:relative;font-size:80px;width:550px;transform:translateY(-50px);z-index:500;line-height:1.2;overflow:visible;color:#234da1;mix-blend-mode:multiply;pointer-events:none}.project-images[_ngcontent-%COMP%]{padding:0 2vw;transform:translate(-200px)}hr.line[_ngcontent-%COMP%]{border:1px solid #000000;margin:3vh 1vw 3vh 1vw}.project_images_scroll[_ngcontent-%COMP%]{overflow-x:scroll;display:flex;flex-direction:row;position:relative;align-items:left;align-items:baseline;align-content:baseline;padding:1.5dvh}.project_images_scroll_bar[_ngcontent-%COMP%]{overflow-x:scroll;display:flex;flex-direction:row;position:relative;align-items:left;align-items:baseline;align-content:baseline;padding:1.5dvh;overflow-y:hidden}.project_images_scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.project_images_scroll_bar[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:15px;background:#dbdce2}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgb(110,140,200);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgb(35,77,161)}.side-scroll-image[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]{padding:1dvw;height:650px}.side-scroll-image[_ngcontent-%COMP%]:hover{scale:1.05}.slider[_ngcontent-%COMP%]{width:500px;height:300px;margin-left:auto;margin-right:auto;margin-top:0;text-align:center;overflow:hidden}.image-container[_ngcontent-%COMP%]{width:1500px;height:300px;clear:both;position:relative;transition:left 2s}.slide[_ngcontent-%COMP%]{float:left;margin:0;padding:0;position:relative}#slide-1[_ngcontent-%COMP%]:target ~ .image-container[_ngcontent-%COMP%]{left:0}#slide-2[_ngcontent-%COMP%]:target ~ .image-container[_ngcontent-%COMP%]{left:-500px}#slide-3[_ngcontent-%COMP%]:target ~ .image-container[_ngcontent-%COMP%]{left:-1000px}.buttons[_ngcontent-%COMP%]{position:relative;top:-20px}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;height:15px;width:15px;border-radius:50px}.uppercase[_ngcontent-%COMP%]{text-transform:none}.hyf_b[_ngcontent-%COMP%]{background-color:#6872b0;border:none;color:#fff;padding:10px 20px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;transition-duration:.4s;border-radius:25px}.hyf_b[_ngcontent-%COMP%]:hover{background-color:#8e96cb}.gg_b[_ngcontent-%COMP%]{background-color:#612869;border:none;color:#fff;padding:10px 20px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;transition-duration:.4s;border-radius:25px}.gg_b[_ngcontent-%COMP%]:hover{background-color:#926398}"]});var mn=zr(621);function hP(e,t){1&e&&(we(0,"div",12)(1,"p",13),Ce(2," Move around "),ve(3,"br"),Ce(4," the images "),be(),ve(5,"i",14),be())}class $i{constructor(){this.showTutorial=!0}ngOnInit(){document.body.onmousemove=function(t){document.documentElement.style.setProperty("--x",t.clientX+window.scrollX+"px"),document.documentElement.style.setProperty("--y",t.clientY+window.scrollY+"px")},this._canvas=new mn.fabric.Canvas("fabricSurface",{backgroundColor:"#fdf5eb",selection:!1,preserveObjectStacking:!0,width:window.innerWidth,height:window.innerHeight,hoverCursor:"grab",moveCursor:"grabbing"}),this._canvas.on("object:moving",t=>{t.target&&(t.target.opacity=.5,t.target.angle=5,this.showTutorial=!1,console.dir(this.showTutorial))}),this._canvas.on("object:modified",t=>{t.target&&(t.target.opacity=1,t.target.angle=0)}),mn.fabric.Image.fromURL("../assets/CD_Malbuch.gif",t=>{t.set({left:780,top:280,angle:0}),t.scaleToWidth(250),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/HYF_Screenshot_Start.webp",t=>{t.set({left:860,top:700,angle:0}),t.scaleToWidth(350),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/CD_Fahne.webp",t=>{t.set({left:1600,top:350,angle:0}),t.scaleToWidth(300),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Ghost_Ende.gif",t=>{t.set({left:1450,top:30,angle:0}),t.scaleToWidth(300),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Iara_Benz_Bilder_2.webp",t=>{t.set({left:1080,top:160,angle:0}),t.scaleToWidth(400),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/KiR_Ansicht_Aussen.webp",t=>{t.set({left:410,top:240,angle:0}),t.scaleToWidth(300),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Traum (5).webp",t=>{t.set({left:1300,top:450,angle:0}),t.scaleToWidth(350),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Typo__Innenseiten (1).webp",t=>{t.set({left:80,top:340,angle:0}),t.scaleToWidth(370),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/UI_Screen_1.webp",t=>{t.set({left:500,top:550,angle:0}),t.scaleToWidth(400),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Portrait2.webp",t=>{t.set({left:960,top:420,angle:0}),t.scaleToWidth(300),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)}),mn.fabric.Image.fromURL("../assets/Das_kleinste.webp",t=>{t.set({left:1680,top:620,angle:0}),t.scaleToWidth(180),t.hasBorders=t.hasControls=!1,this._canvas?.add(t)})}}$i.\u0275fac=function(t){return new(t||$i)},$i.\u0275cmp=Pn({type:$i,selectors:[["app-home"]],decls:17,vars:1,consts:[[1,"content"],[1,"canvas"],["id","fabricSurface"],[1,"home"],[1,"header"],[1,"font-top"],["class","move-info",4,"ngIf"],[1,"info"],[1,"font-bottom-l"],[1,"font-bottom-s"],["href","/work",1,"link"],["src","assets/Kreis.svg","alt","",1,"kreis","rotate"],[1,"move-info"],[1,"font-middle"],[1,"fa","fa-angle-down","fa-2x","arrow",2,"color","#1e30a1"]],template:function(t,n){1&t&&(we(0,"div",0)(1,"div",1),ve(2,"canvas",2),be(),we(3,"div",3)(4,"div",4)(5,"p",5),Ce(6," Iara Benz "),be()(),function up(e,t,n,r,i,s,a,m){const _=ie(),b=Qe(),T=e+22,E=b.firstCreatePass?function lS(e,t,n,r,i,s,a,m,_){const b=t.consts,T=vi(t,e,4,a||null,ur(b,m));Bc(t,n,T,ur(b,_)),Mo(t,T);const E=T.tViews=jc(2,T,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,b);return null!==t.queries&&(t.queries.template(t,T),E.queries=t.queries.embeddedTView(T)),T}(T,b,_,t,n,r,i,s,a):b.data[T];kn(E,!1);const A=_[11].createComment("");Ho(b,_,A,E),Lt(A,_),ta(_,_[T]=zg(A,_,A,E)),To(E)&&Lc(b,_,E),null!=a&&Nc(_,E,m)}(7,hP,6,0,"div",6),we(8,"div",7)(9,"h2",8),Ce(10," design "),ve(11,"br"),Ce(12," portfolio "),be(),we(13,"p",9)(14,"a",10),Ce(15,"check out my work!"),be()()(),ve(16,"img",11),be()()),2&t&&(pi(7),Ei("ngIf",n.showTutorial))},dependencies:[yy],styles:['.font-top[_ngcontent-%COMP%]{font-size:200px;font-family:Space Grotesk,sans-serif;font-weight:700;text-align:left;height:max-content;align-items:left;align-content:left;padding:0 1vw 2vh 2vw;color:#234da1}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;align-items:left;align-content:left}.canvas[_ngcontent-%COMP%]{margin:-10px;overflow-y:hidden;overflow-x:hidden}.home[_ngcontent-%COMP%]{transform:translateY(-930px);pointer-events:none;mix-blend-mode:multiply}.info[_ngcontent-%COMP%]{transform:translateY(200px)}p[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-weight:lighter;justify-content:left;align-items:left;width:-moz-fit-content;width:fit-content}.font-bottom-l[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;line-height:95%;font-size:100px;width:60%;height:80px;padding:0 0 0 2dvw;color:#000}.font-bottom-s[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:45px;width:max-content;height:80px;padding:4dvh 0 0 2dvw;color:#234da1}.content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.content[_ngcontent-%COMP%]{overflow-y:clip!important;height:99.4dvh}html[_ngcontent-%COMP%]{overflow-y:clip!important;cursor:none}.link[_ngcontent-%COMP%]{color:#234da1;pointer-events:all}a[_ngcontent-%COMP%]{position:relative;color:#234da1;text-decoration:none}a[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:100%;height:2px;bottom:-5%;left:0;background-color:#234da1;transform:scaleX(0);transition:transform .3s ease;transform-origin:bottom left}a[_ngcontent-%COMP%]:hover:before{transform:scaleX(1);transform-origin:bottom left}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.kreis[_ngcontent-%COMP%]{scale:30%;mix-blend-mode:multiply;background-blend-mode:multiply}.rotate[_ngcontent-%COMP%]{margin-top:-1450px;margin-right:-1700px;animation:_ngcontent-%COMP%_rotation 35s infinite linear}.move-info[_ngcontent-%COMP%]{display:flex;padding:-200dvh 0;padding-left:4dvw;width:max-content;height:max-content;transform:translateY(-100px);pointer-events:all;position:absolute}.disable[_ngcontent-%COMP%]{opacity:0}.font-middle[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:25px;width:max-content;height:max-content;color:#234da1;pointer-events:all}.arrow[_ngcontent-%COMP%]{padding-top:3.7dvh;margin-left:-1dvw}']});const fP=[{path:"about",component:ao},{path:"contact",component:lo},{path:"work",component:uo},{path:"home",component:$i},{path:"",component:$i}];class Wi{}Wi.\u0275fac=function(t){return new(t||Wi)},Wi.\u0275mod=wr({type:Wi}),Wi.\u0275inj=lr({imports:[Dy,sC.forRoot(fP),sC]});class Gi{}Gi.\u0275fac=function(t){return new(t||Gi)},Gi.\u0275mod=wr({type:Gi,bootstrap:[oo]}),Gi.\u0275inj=lr({imports:[yI,Wi]}),vI().bootstrapModule(Gi).catch(e=>console.error(e))},621:(ho,Ne,zr)=>{var y,f,p,d,l,u,w=w||{version:"5.3.0"};if(Ne.fabric=w,typeof document<"u"&&typeof window<"u")w.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),w.window=window;else{var $r=new(zr(960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;w.document=$r.document,w.jsdomImplForWrapper=zr(759).implForWrapper,w.nodeCanvas=zr(272).Canvas,w.window=$r,DOMParser=w.window.DOMParser}function At(y,f){var p=y.canvas,d=f.targetCanvas,l=d.getContext("2d");l.translate(0,d.height),l.scale(1,-1),l.drawImage(p,0,p.height-d.height,d.width,d.height,0,0,d.width,d.height)}function Wr(y,f){var d=f.targetCanvas.getContext("2d"),l=f.destinationWidth,u=f.destinationHeight,o=l*u*4,h=new Uint8Array(this.imageBuffer,0,o),g=new Uint8ClampedArray(this.imageBuffer,0,o);y.readPixels(0,0,l,u,y.RGBA,y.UNSIGNED_BYTE,h);var c=new ImageData(g,l,u);d.putImageData(c,0,0)}w.isTouchSupported="ontouchstart"in w.window||"ontouchstart"in w.document||w.window&&w.window.navigator&&w.window.navigator.maxTouchPoints>0,w.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",w.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],w.DPI=96,w.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",w.commaWsp="(?:\\s+,?\\s*|,\\s*)",w.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,w.reNonWord=/[ \n\.,;!\?\-]/,w.fontPaths={},w.iMatrix=[1,0,0,1,0,0],w.svgNS="http://www.w3.org/2000/svg",w.perfLimitSizeTotal=2097152,w.maxCacheSideLimit=4096,w.minCacheSideLimit=256,w.charWidthsCache={},w.textureSize=2048,w.disableStyleCopyPaste=!1,w.enableGLFiltering=!0,w.devicePixelRatio=w.window.devicePixelRatio||w.window.webkitDevicePixelRatio||w.window.mozDevicePixelRatio||1,w.browserShadowBlurConstant=1,w.arcToSegmentsCache={},w.boundsOfCurveCache={},w.cachesBoundsOfCurve=!0,w.forceGLPutImageData=!1,w.initFilterBackend=function(){return w.enableGLFiltering&&w.isWebglSupported&&w.isWebglSupported(w.textureSize)?(console.log("max texture size: "+w.maxTextureSize),new w.WebglFilterBackend({tileSize:w.textureSize})):w.Canvas2dFilterBackend?new w.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=w),function(){function y(o,h){if(this.__eventListeners[o]){var g=this.__eventListeners[o];h?g[g.indexOf(h)]=!1:w.util.array.fill(g,!1)}}function p(o,h){var g=function(){h.apply(this,arguments),this.off(o,g)}.bind(this);this.on(o,g)}w.Observable={fire:function u(o,h){if(!this.__eventListeners)return this;var g=this.__eventListeners[o];if(!g)return this;for(var c=0,v=g.length;c<v;c++)g[c]&&g[c].call(this,h||{});return this.__eventListeners[o]=g.filter(function(C){return!1!==C}),this},on:function f(o,h){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var g in o)this.on(g,o[g]);else this.__eventListeners[o]||(this.__eventListeners[o]=[]),this.__eventListeners[o].push(h);return this},once:function d(o,h){if(1===arguments.length)for(var g in o)p.call(this,g,o[g]);else p.call(this,o,h);return this},off:function l(o,h){if(!this.__eventListeners)return this;if(0===arguments.length)for(o in this.__eventListeners)y.call(this,o);else if(1===arguments.length&&"object"==typeof arguments[0])for(var g in o)y.call(this,g,o[g]);else y.call(this,o,h);return this}}}(),w.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var y=0,f=arguments.length;y<f;y++)this._onObjectAdded(arguments[y]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(y,f,p){var d=this._objects;return p?d[f]=y:d.splice(f,0,y),this._onObjectAdded&&this._onObjectAdded(y),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f,y=this._objects,p=!1,d=0,l=arguments.length;d<l;d++)-1!==(f=y.indexOf(arguments[d]))&&(p=!0,y.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&p&&this.requestRenderAll(),this},forEachObject:function(y,f){for(var p=this.getObjects(),d=0,l=p.length;d<l;d++)y.call(f,p[d],d,p);return this},getObjects:function(y){return typeof y>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===y})},item:function(y){return this._objects[y]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(y,f){return this._objects.indexOf(y)>-1||!!f&&this._objects.some(function(p){return"function"==typeof p.contains&&p.contains(y,!0)})},complexity:function(){return this._objects.reduce(function(y,f){return y+(f.complexity?f.complexity():0)},0)}},w.CommonMethods={_setOptions:function(y){for(var f in y)this.set(f,y[f])},_initGradient:function(y,f){y&&y.colorStops&&!(y instanceof w.Gradient)&&this.set(f,new w.Gradient(y))},_initPattern:function(y,f,p){!y||!y.source||y instanceof w.Pattern?p&&p():this.set(f,new w.Pattern(y,p))},_setObject:function(y){for(var f in y)this._set(f,y[f])},set:function(y,f){return"object"==typeof y?this._setObject(y):this._set(y,f),this},_set:function(y,f){this[y]=f},toggle:function(y){var f=this.get(y);return"boolean"==typeof f&&this.set(y,!f),this},get:function(y){return this[y]}},y=Ne,f=Math.sqrt,p=Math.atan2,d=Math.pow,l=Math.PI/180,u=Math.PI/2,w.util={cos:function(o){if(0===o)return 1;switch(o<0&&(o=-o),o/u){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(0===o)return 0;var g=1;switch(o<0&&(g=-1),o/u){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(o)},removeFromArray:function(o,h){var g=o.indexOf(h);return-1!==g&&o.splice(g,1),o},getRandomInt:function(o,h){return Math.floor(Math.random()*(h-o+1))+o},degreesToRadians:function(o){return o*l},radiansToDegrees:function(o){return o/l},rotatePoint:function(o,h,g){var c=new w.Point(o.x-h.x,o.y-h.y),v=w.util.rotateVector(c,g);return new w.Point(v.x,v.y).addEquals(h)},rotateVector:function(o,h){var g=w.util.sin(h),c=w.util.cos(h);return{x:o.x*c-o.y*g,y:o.x*g+o.y*c}},createVector:function(o,h){return new w.Point(h.x-o.x,h.y-o.y)},calcAngleBetweenVectors:function(o,h){return Math.acos((o.x*h.x+o.y*h.y)/(Math.hypot(o.x,o.y)*Math.hypot(h.x,h.y)))},getHatVector:function(o){return new w.Point(o.x,o.y).multiply(1/Math.hypot(o.x,o.y))},getBisector:function(o,h,g){var c=w.util.createVector(o,h),v=w.util.createVector(o,g),C=w.util.calcAngleBetweenVectors(c,v),D=w.util.calcAngleBetweenVectors(w.util.rotateVector(c,C),v);return{vector:w.util.getHatVector(w.util.rotateVector(c,C*(0===D?1:-1)/2)),angle:C}},projectStrokeOnPoints:function(o,h,g){var c=[],v=h.strokeWidth/2,C=h.strokeUniform?new w.Point(1/h.scaleX,1/h.scaleY):new w.Point(1,1),D=function(S){var x=v/Math.hypot(S.x,S.y);return new w.Point(S.x*x*C.x,S.y*x*C.y)};return o.length<=1||o.forEach(function(S,x){var P,j,M=new w.Point(S.x,S.y);0===x?(j=o[x+1],P=g?D(w.util.createVector(j,M)).addEquals(M):o[o.length-1]):x===o.length-1?(P=o[x-1],j=g?D(w.util.createVector(P,M)).addEquals(M):o[0]):(P=o[x-1],j=o[x+1]);var he,ge,G=w.util.getBisector(M,P,j),re=G.vector;if("miter"===h.strokeLineJoin&&(he=-v/Math.sin(G.angle/2),ge=new w.Point(re.x*he*C.x,re.y*he*C.y),Math.hypot(ge.x,ge.y)/v<=h.strokeMiterLimit))return c.push(M.add(ge)),void c.push(M.subtract(ge));he=-v*Math.SQRT2,ge=new w.Point(re.x*he*C.x,re.y*he*C.y),c.push(M.add(ge)),c.push(M.subtract(ge))}),c},transformPoint:function(o,h,g){return g?new w.Point(h[0]*o.x+h[2]*o.y,h[1]*o.x+h[3]*o.y):new w.Point(h[0]*o.x+h[2]*o.y+h[4],h[1]*o.x+h[3]*o.y+h[5])},makeBoundingBoxFromPoints:function(o,h){if(h)for(var g=0;g<o.length;g++)o[g]=w.util.transformPoint(o[g],h);var c=[o[0].x,o[1].x,o[2].x,o[3].x],v=w.util.array.min(c),D=w.util.array.max(c)-v,S=[o[0].y,o[1].y,o[2].y,o[3].y],x=w.util.array.min(S);return{left:v,top:x,width:D,height:w.util.array.max(S)-x}},invertTransform:function(o){var h=1/(o[0]*o[3]-o[1]*o[2]),g=[h*o[3],-h*o[1],-h*o[2],h*o[0]],c=w.util.transformPoint({x:o[4],y:o[5]},g,!0);return g[4]=-c.x,g[5]=-c.y,g},toFixed:function(o,h){return parseFloat(Number(o).toFixed(h))},parseUnit:function(o,h){var g=/\D{0,2}$/.exec(o),c=parseFloat(o);switch(h||(h=w.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return c*w.DPI/25.4;case"cm":return c*w.DPI/2.54;case"in":return c*w.DPI;case"pt":return c*w.DPI/72;case"pc":return c*w.DPI/72*12;case"em":return c*h;default:return c}},falseFunction:function(){return!1},getKlass:function(o,h){return o=w.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),w.util.resolveNamespace(h)[o]},getSvgAttributes:function(o){var h=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"])}return h},resolveNamespace:function(o){if(!o)return w;var c,h=o.split("."),g=h.length,v=y||w.window;for(c=0;c<g;++c)v=v[h[c]];return v},loadImage:function(o,h,g,c){if(o){var v=w.util.createImage(),C=function(){h&&h.call(g,v,!1),v=v.onload=v.onerror=null};v.onload=C,v.onerror=function(){w.log("Error loading "+v.src),h&&h.call(g,null,!0),v=v.onload=v.onerror=null},0!==o.indexOf("data")&&null!=c&&(v.crossOrigin=c),"data:image/svg"===o.substring(0,14)&&(v.onload=null,w.util.loadImageInDom(v,C)),v.src=o}else h&&h.call(g,o)},loadImageInDom:function(o,h){var g=w.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(o),w.document.querySelector("body").appendChild(g),o.onload=function(){h(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(o,h,g,c){var v=[],C=0,D=(o=o||[]).length;function S(){++C===D&&h&&h(v.filter(function(x){return x}))}D?o.forEach(function(x,M){x&&x.type?w.util.getKlass(x.type,g).fromObject(x,function(j,G){G||(v[M]=j),c&&c(x,j,G),S()}):S()}):h&&h(v)},enlivenObjectEnlivables:function(o,h,g){var c=w.Object.ENLIVEN_PROPS.filter(function(v){return!!o[v]});w.util.enlivenObjects(c.map(function(v){return o[v]}),function(v){var C={};c.forEach(function(D,S){C[D]=v[S],h&&(h[D]=v[S])}),g&&g(C)})},enlivenPatterns:function(o,h){function g(){++v===C&&h&&h(c)}var c=[],v=0,C=(o=o||[]).length;C?o.forEach(function(D,S){D&&D.source?new w.Pattern(D,function(x){c[S]=x,g()}):(c[S]=D,g())}):h&&h(c)},groupSVGElements:function(o,h,g){var c;return o&&1===o.length?(typeof g<"u"&&(o[0].sourcePath=g),o[0]):(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),c=new w.Group(o,h),typeof g<"u"&&(c.sourcePath=g),c)},populateWithProperties:function(o,h,g){if(g&&Array.isArray(g))for(var c=0,v=g.length;c<v;c++)g[c]in o&&(h[g[c]]=o[g[c]])},createCanvasElement:function(){return w.document.createElement("canvas")},copyCanvasElement:function(o){var h=w.util.createCanvasElement();return h.width=o.width,h.height=o.height,h.getContext("2d").drawImage(o,0,0),h},toDataURL:function(o,h,g){return o.toDataURL("image/"+h,g)},createImage:function(){return w.document.createElement("img")},multiplyTransformMatrices:function(o,h,g){return[o[0]*h[0]+o[2]*h[1],o[1]*h[0]+o[3]*h[1],o[0]*h[2]+o[2]*h[3],o[1]*h[2]+o[3]*h[3],g?0:o[0]*h[4]+o[2]*h[5]+o[4],g?0:o[1]*h[4]+o[3]*h[5]+o[5]]},qrDecompose:function(o){var h=p(o[1],o[0]),g=d(o[0],2)+d(o[1],2),c=f(g),v=(o[0]*o[3]-o[2]*o[1])/c,C=p(o[0]*o[2]+o[1]*o[3],g);return{angle:h/l,scaleX:c,scaleY:v,skewX:C/l,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return w.iMatrix.concat();var h=w.util.degreesToRadians(o.angle),g=w.util.cos(h),c=w.util.sin(h);return[g,c,-c,g,0,0]},calcDimensionsMatrix:function(o){var h=typeof o.scaleX>"u"?1:o.scaleX,g=typeof o.scaleY>"u"?1:o.scaleY,c=[o.flipX?-h:h,0,0,o.flipY?-g:g,0,0],v=w.util.multiplyTransformMatrices,C=w.util.degreesToRadians;return o.skewX&&(c=v(c,[1,0,Math.tan(C(o.skewX)),1],!0)),o.skewY&&(c=v(c,[1,Math.tan(C(o.skewY)),0,1],!0)),c},composeMatrix:function(o){var h=[1,0,0,1,o.translateX||0,o.translateY||0],g=w.util.multiplyTransformMatrices;return o.angle&&(h=g(h,w.util.calcRotateMatrix(o))),(1!==o.scaleX||1!==o.scaleY||o.skewX||o.skewY||o.flipX||o.flipY)&&(h=g(h,w.util.calcDimensionsMatrix(o))),h},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,h,g,c){c>0&&(h>c?h-=c:h=0,g>c?g-=c:g=0);var C,v=!0,S=o.getImageData(h,g,2*c||1,2*c||1),x=S.data.length;for(C=3;C<x&&0!=(v=S.data[C]<=0);C+=4);return S=null,v},parsePreserveAspectRatioAttribute:function(o){var C,h="meet",v=o.split(" ");return v&&v.length&&("meet"!==(h=v.pop())&&"slice"!==h?(C=h,h="meet"):v.length&&(C=v.pop())),{meetOrSlice:h,alignX:"none"!==C?C.slice(1,4):"none",alignY:"none"!==C?C.slice(5,8):"none"}},clearFabricFontCache:function(o){(o=(o||"").toLowerCase())?w.charWidthsCache[o]&&delete w.charWidthsCache[o]:w.charWidthsCache={}},limitDimsByArea:function(o,h){var g=Math.sqrt(h*o),c=Math.floor(h/g);return{x:Math.floor(g),y:c}},capValue:function(o,h,g){return Math.max(o,Math.min(h,g))},findScaleToFit:function(o,h){return Math.min(h.width/o.width,h.height/o.height)},findScaleToCover:function(o,h){return Math.max(h.width/o.width,h.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(h){return w.util.toFixed(h,w.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,h){var g=w.util.invertTransform(h),c=w.util.multiplyTransformMatrices(g,o.calcOwnMatrix());w.util.applyTransformToObject(o,c)},addTransformToObject:function(o,h){w.util.applyTransformToObject(o,w.util.multiplyTransformMatrices(h,o.calcOwnMatrix()))},applyTransformToObject:function(o,h){var g=w.util.qrDecompose(h),c=new w.Point(g.translateX,g.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",g.scaleX),o.set("scaleY",g.scaleY),o.skewX=g.skewX,o.skewY=g.skewY,o.angle=g.angle,o.setPositionByOrigin(c,"center","center")},sizeAfterTransform:function(o,h,g){var c=o/2,v=h/2,C=[{x:-c,y:-v},{x:c,y:-v},{x:-c,y:v},{x:c,y:v}],D=w.util.calcDimensionsMatrix(g),S=w.util.makeBoundingBoxFromPoints(C,D);return{x:S.width,y:S.height}},mergeClipPaths:function(o,h){var g=o,c=h;g.inverted&&!c.inverted&&(g=h,c=o),w.util.applyTransformToObject(c,w.util.multiplyTransformMatrices(w.util.invertTransform(g.calcTransformMatrix()),c.calcTransformMatrix()));var v=g.inverted&&c.inverted;return v&&(g.inverted=c.inverted=!1),new w.Group([g],{clipPath:c,inverted:v})},hasStyleChanged:function(o,h,g){return g=g||!1,o.fill!==h.fill||o.stroke!==h.stroke||o.strokeWidth!==h.strokeWidth||o.fontSize!==h.fontSize||o.fontFamily!==h.fontFamily||o.fontWeight!==h.fontWeight||o.fontStyle!==h.fontStyle||o.textBackgroundColor!==h.textBackgroundColor||o.deltaY!==h.deltaY||g&&(o.overline!==h.overline||o.underline!==h.underline||o.linethrough!==h.linethrough)},stylesToArray:function(g,h){g=w.util.object.clone(g,!0);for(var c=h.split("\n"),v=-1,C={},D=[],S=0;S<c.length;S++)if(g[S])for(var x=0;x<c[S].length;x++){v++;var M=g[S][x];M&&Object.keys(M).length>0&&(w.util.hasStyleChanged(C,M,!0)?D.push({start:v,end:v+1,style:M}):D[D.length-1].end++),C=M||{}}else v+=c[S].length;return D},stylesFromArray:function(o,h){if(!Array.isArray(o))return o;for(var g=h.split("\n"),c=-1,v=0,C={},D=0;D<g.length;D++)for(var S=0;S<g[D].length;S++)c++,o[v]&&o[v].start<=c&&c<o[v].end&&(C[D]=C[D]||{},C[D][S]=Object.assign({},o[v].style),c===o[v].end-1&&v++);return C}},function(){var y=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},p={m:"l",M:"L"};function d(O,F,L,k,$,R,I,B,H,z,W){var ee=w.util.cos(O),se=w.util.sin(O),ue=w.util.cos(F),Y=w.util.sin(F),U=L*$*ue-k*R*Y+I,Q=k*$*ue+L*R*Y+B;return["C",z+H*(-L*$*se-k*R*ee),W+H*(-k*$*se+L*R*ee),U+H*(L*$*Y+k*R*ue),Q+H*(k*$*Y-L*R*ue),U,Q]}function u(O,F,L,k){var $=Math.atan2(F,O),R=Math.atan2(k,L);return R>=$?R-$:2*Math.PI-($-R)}function h(O,F,L){for(var W=function l(O,F,L,k,$,R,I){var B=Math.PI,H=I*B/180,z=w.util.sin(H),W=w.util.cos(H),ee=0,se=0,ue=-W*O*.5-z*F*.5,Y=-W*F*.5+z*O*.5,U=(L=Math.abs(L))*L,Q=(k=Math.abs(k))*k,Z=Y*Y,X=ue*ue,ne=U*Q-U*Z-Q*X,fe=0;if(ne<0){var je=Math.sqrt(1-ne/(U*Q));L*=je,k*=je}else fe=($===R?-1:1)*Math.sqrt(ne/(U*Z+Q*X));var Te=fe*L*Y/k,K=-fe*k*ue/L,xe=W*Te-z*K+.5*O,Be=z*Te+W*K+.5*F,qe=u(1,0,(ue-Te)/L,(Y-K)/k),ct=u((ue-Te)/L,(Y-K)/k,(-ue-Te)/L,(-Y-K)/k);0===R&&ct>0?ct-=2*B:1===R&&ct<0&&(ct+=2*B);for(var Je=Math.ceil(Math.abs(ct/B*2)),Pt=[],rt=ct/Je,$n=8/3*Math.sin(rt/4)*Math.sin(rt/4)/Math.sin(rt/2),Gr=qe+rt,an=0;an<Je;an++)Pt[an]=d(qe,Gr,W,z,L,k,xe,Be,$n,ee,se),ee=Pt[an][5],se=Pt[an][6],qe=Gr,Gr+=rt;return Pt}(L[6]-O,L[7]-F,L[1],L[2],L[4],L[5],L[3]),ee=0,se=W.length;ee<se;ee++)W[ee][1]+=O,W[ee][2]+=F,W[ee][3]+=O,W[ee][4]+=F,W[ee][5]+=O,W[ee][6]+=F;return W}function c(O,F,L,k){return Math.sqrt((L-O)*(L-O)+(k-F)*(k-F))}function x(O,F,L,k,$,R,I,B){return function(H){var z=function v(O){return O*O*O}(H),W=function C(O){return 3*O*O*(1-O)}(H),ee=function D(O){return 3*O*(1-O)*(1-O)}(H),se=function S(O){return(1-O)*(1-O)*(1-O)}(H);return{x:I*z+$*W+L*ee+O*se,y:B*z+R*W+k*ee+F*se}}}function M(O,F,L,k,$,R,I,B){return function(H){var z=1-H;return Math.atan2(3*z*z*(k-F)+6*z*H*(R-k)+3*H*H*(B-R),3*z*z*(L-O)+6*z*H*($-L)+3*H*H*(I-$))}}function re(O,F,L,k,$,R){return function(I){var B=function P(O){return O*O}(I),H=function j(O){return 2*O*(1-O)}(I),z=function G(O){return(1-O)*(1-O)}(I);return{x:$*B+L*H+O*z,y:R*B+k*H+F*z}}}function ae(O,F,L,k,$,R){return function(I){var B=1-I;return Math.atan2(2*B*(k-F)+2*I*(R-k),2*B*(L-O)+2*I*($-L))}}function he(O,F,L){var $,I,k={x:F,y:L},R=0;for(I=1;I<=100;I+=1)$=O(I/100),R+=c(k.x,k.y,$.x,$.y),k=$;return R}function le(O){for(var k,z,W,ee,F=0,L=O.length,$=0,R=0,I=0,B=0,H=[],se=0;se<L;se++){switch(W={x:$,y:R,command:(k=O[se])[0]},k[0]){case"M":W.length=0,I=$=k[1],B=R=k[2];break;case"L":W.length=c($,R,k[1],k[2]),$=k[1],R=k[2];break;case"C":z=x($,R,k[1],k[2],k[3],k[4],k[5],k[6]),ee=M($,R,k[1],k[2],k[3],k[4],k[5],k[6]),W.iterator=z,W.angleFinder=ee,W.length=he(z,$,R),$=k[5],R=k[6];break;case"Q":z=re($,R,k[1],k[2],k[3],k[4]),ee=ae($,R,k[1],k[2],k[3],k[4]),W.iterator=z,W.angleFinder=ee,W.length=he(z,$,R),$=k[3],R=k[4];break;case"Z":case"z":W.destX=I,W.destY=B,W.length=c($,R,I,B),$=I,R=B}F+=W.length,H.push(W)}return H.push({length:F,x:$,y:R}),H}w.util.joinPath=function(O){return O.map(function(F){return F.join(" ")}).join(" ")},w.util.parsePath=function De(O){var k,$,ee,se,ue,F=[],L=[],R=w.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",B="("+I+")"+w.commaWsp,H="([01])"+w.commaWsp+"?",W=new RegExp(B+"?"+B+"?"+B+H+H+B+"?("+I+")","g");if(!O||!O.match)return F;for(var U,Y=0,Q=(ue=O.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;Y<Q;Y++){se=(k=ue[Y]).slice(1).trim(),L.length=0;var Z=k.charAt(0);if(U=[Z],"a"===Z.toLowerCase())for(var X;X=W.exec(se);)for(var ne=1;ne<X.length;ne++)L.push(X[ne]);else for(;ee=R.exec(se);)L.push(ee[0]);ne=0;for(var fe=L.length;ne<fe;ne++)$=parseFloat(L[ne]),isNaN($)||U.push($);var je=f[Z.toLowerCase()],Te=p[Z]||Z;if(U.length-1>je)for(var K=1,xe=U.length;K<xe;K+=je)F.push([Z].concat(U.slice(K,K+je))),Z=Te;else F.push(U)}return F},w.util.makePathSimpler=function g(O){var I,B,H,W,ee,se,F=0,L=0,k=O.length,$=0,R=0,z=[];for(B=0;B<k;++B){switch(H=!1,(I=O[B].slice(0))[0]){case"l":I[0]="L",I[1]+=F,I[2]+=L;case"L":F=I[1],L=I[2];break;case"h":I[1]+=F;case"H":I[0]="L",I[2]=L,F=I[1];break;case"v":I[1]+=L;case"V":I[0]="L",L=I[1],I[1]=F,I[2]=L;break;case"m":I[0]="M",I[1]+=F,I[2]+=L;case"M":F=I[1],L=I[2],$=I[1],R=I[2];break;case"c":I[0]="C",I[1]+=F,I[2]+=L,I[3]+=F,I[4]+=L,I[5]+=F,I[6]+=L;case"C":ee=I[3],se=I[4],F=I[5],L=I[6];break;case"s":I[0]="S",I[1]+=F,I[2]+=L,I[3]+=F,I[4]+=L;case"S":"C"===W?(ee=2*F-ee,se=2*L-se):(ee=F,se=L),F=I[3],L=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=ee,I[2]=se,ee=I[3],se=I[4];break;case"q":I[0]="Q",I[1]+=F,I[2]+=L,I[3]+=F,I[4]+=L;case"Q":ee=I[1],se=I[2],F=I[3],L=I[4];break;case"t":I[0]="T",I[1]+=F,I[2]+=L;case"T":"Q"===W?(ee=2*F-ee,se=2*L-se):(ee=F,se=L),I[0]="Q",F=I[1],L=I[2],I[1]=ee,I[2]=se,I[3]=F,I[4]=L;break;case"a":I[0]="A",I[6]+=F,I[7]+=L;case"A":H=!0,z=z.concat(h(F,L,I)),F=I[6],L=I[7];break;case"z":case"Z":F=$,L=R}H||z.push(I),W=I[0]}return z},w.util.getSmoothPathFromPoints=function de(O,F){var k,L=[],$=new w.Point(O[0].x,O[0].y),R=new w.Point(O[1].x,O[1].y),I=O.length,B=1,H=0,z=I>2;for(z&&(B=O[2].x<R.x?-1:O[2].x===R.x?0:1,H=O[2].y<R.y?-1:O[2].y===R.y?0:1),L.push(["M",$.x-B*(F=F||0),$.y-H*F]),k=1;k<I;k++){if(!$.eq(R)){var W=$.midPointFrom(R);L.push(["Q",$.x,$.y,W.x,W.y])}$=O[k],k+1<O.length&&(R=O[k+1])}return z&&(B=$.x>O[k-2].x?1:$.x===O[k-2].x?0:-1,H=$.y>O[k-2].y?1:$.y===O[k-2].y?0:-1),L.push(["L",$.x+B*F,$.y+H*F]),L},w.util.getPathSegmentsInfo=le,w.util.getBoundsOfCurve=function o(O,F,L,k,$,R,I,B){var H;if(w.cachesBoundsOfCurve&&(H=y.call(arguments),w.boundsOfCurveCache[H]))return w.boundsOfCurveCache[H];var U,Q,Z,X,ne,fe,je,Te,z=Math.sqrt,W=Math.min,ee=Math.max,se=Math.abs,ue=[],Y=[[],[]];Q=6*O-12*L+6*$,U=-3*O+9*L-9*$+3*I,Z=3*L-3*O;for(var K=0;K<2;++K)if(K>0&&(Q=6*F-12*k+6*R,U=-3*F+9*k-9*R+3*B,Z=3*k-3*F),se(U)<1e-12){if(se(Q)<1e-12)continue;0<(X=-Z/Q)&&X<1&&ue.push(X)}else!((je=Q*Q-4*Z*U)<0)&&(0<(ne=(-Q+(Te=z(je)))/(2*U))&&ne<1&&ue.push(ne),0<(fe=(-Q-Te)/(2*U))&&fe<1&&ue.push(fe));for(var Je,qe=ue.length,ct=qe;qe--;)Y[0][qe]=(Je=1-(X=ue[qe]))*Je*Je*O+3*Je*Je*X*L+3*Je*X*X*$+X*X*X*I,Y[1][qe]=Je*Je*Je*F+3*Je*Je*X*k+3*Je*X*X*R+X*X*X*B;Y[0][ct]=O,Y[1][ct]=F,Y[0][ct+1]=I,Y[1][ct+1]=B;var Pt=[{x:W.apply(null,Y[0]),y:W.apply(null,Y[1])},{x:ee.apply(null,Y[0]),y:ee.apply(null,Y[1])}];return w.cachesBoundsOfCurve&&(w.boundsOfCurveCache[H]=Pt),Pt},w.util.getPointOnPath=function ce(O,F,L){L||(L=le(O));for(var k=0;F-L[k].length>0&&k<L.length-2;)F-=L[k].length,k++;var H,$=L[k],R=F/$.length,B=O[k];switch($.command){case"M":return{x:$.x,y:$.y,angle:0};case"Z":case"z":return(H=new w.Point($.x,$.y).lerp(new w.Point($.destX,$.destY),R)).angle=Math.atan2($.destY-$.y,$.destX-$.x),H;case"L":return(H=new w.Point($.x,$.y).lerp(new w.Point(B[1],B[2]),R)).angle=Math.atan2(B[2]-$.y,B[1]-$.x),H;case"C":case"Q":return function ge(O,F){for(var I,B,W,L=0,k=0,$=O.iterator,R={x:O.x,y:O.y},H=.01,z=O.angleFinder;k<F&&H>1e-4;)I=$(L),W=L,(B=c(R.x,R.y,I.x,I.y))+k>F?(L-=H,H/=2):(R=I,L+=H,k+=B);return I.angle=z(W),I}($,F)}},w.util.transformPath=function Se(O,F,L){return L&&(F=w.util.multiplyTransformMatrices(F,[1,0,0,1,-L.x,-L.y])),O.map(function(k){for(var $=k.slice(0),R={},I=1;I<k.length-1;I+=2)R.x=k[I],R.y=k[I+1],R=w.util.transformPoint(R,F),$[I]=R.x,$[I+1]=R.y;return $})}}(),function(){var y=Array.prototype.slice;function u(o,h,g){if(o&&0!==o.length){var c=o.length-1,v=h?o[c][h]:o[c];if(h)for(;c--;)g(o[c][h],v)&&(v=o[c][h]);else for(;c--;)g(o[c],v)&&(v=o[c]);return v}}w.util.array={fill:function l(o,h){for(var g=o.length;g--;)o[g]=h;return o},invoke:function f(o,h){for(var g=y.call(arguments,2),c=[],v=0,C=o.length;v<C;v++)c[v]=g.length?o[v][h].apply(o[v],g):o[v][h].call(o[v]);return c},min:function d(o,h){return u(o,h,function(g,c){return g<c})},max:function p(o,h){return u(o,h,function(g,c){return g>=c})}}}(),function(){function y(p,d,l){if(l)if(!w.isLikelyNode&&d instanceof Element)p=d;else if(d instanceof Array){p=[];for(var u=0,o=d.length;u<o;u++)p[u]=y({},d[u],l)}else if(d&&"object"==typeof d)for(var h in d)"canvas"===h||"group"===h?p[h]=null:d.hasOwnProperty(h)&&(p[h]=y({},d[h],l));else p=d;else for(var h in d)p[h]=d[h];return p}w.util.object={extend:y,clone:function f(p,d){return y({},p,d)}},w.util.object.extend(w.util,w.Observable)}(),function(){function l(u,o){var h=u.charCodeAt(o);if(isNaN(h))return"";if(h<55296||h>57343)return u.charAt(o);if(55296<=h&&h<=56319){if(u.length<=o+1)throw"High surrogate without following low surrogate";var g=u.charCodeAt(o+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return u.charAt(o)+u.charAt(o+1)}if(0===o)throw"Low surrogate without preceding high surrogate";var c=u.charCodeAt(o-1);if(55296>c||c>56319)throw"Low surrogate without preceding high surrogate";return!1}w.util.string={camelize:function y(u){return u.replace(/-+(.)?/g,function(o,h){return h?h.toUpperCase():""})},capitalize:function f(u,o){return u.charAt(0).toUpperCase()+(o?u.slice(1):u.slice(1).toLowerCase())},escapeXml:function p(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function d(u){var h,o=0,g=[];for(o=0;o<u.length;o++)!1!==(h=l(u,o))&&g.push(h);return g}}}(),function(){var y=Array.prototype.slice,f=function(){},p=function(){for(var h in{toString:1})if("toString"===h)return!1;return!0}(),d=function(h,g,c){for(var v in g)h.prototype[v]=v in h.prototype&&"function"==typeof h.prototype[v]&&(g[v]+"").indexOf("callSuper")>-1?function(C){return function(){var D=this.constructor.superclass;this.constructor.superclass=c;var S=g[C].apply(this,arguments);if(this.constructor.superclass=D,"initialize"!==C)return S}}(v):g[v],p&&(g.toString!==Object.prototype.toString&&(h.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=g.valueOf))};function l(){}function u(h){for(var g=null,c=this;c.constructor.superclass;){var v=c.constructor.superclass.prototype[h];if(c[h]!==v){g=v;break}c=c.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,y.call(arguments,1)):g.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}w.util.createClass=function o(){var h=null,g=y.call(arguments,0);function c(){this.initialize.apply(this,arguments)}"function"==typeof g[0]&&(h=g.shift()),c.superclass=h,c.subclasses=[],h&&(l.prototype=h.prototype,c.prototype=new l,h.subclasses.push(c));for(var v=0,C=g.length;v<C;v++)d(c,g[v],h);return c.prototype.initialize||(c.prototype.initialize=f),c.prototype.constructor=c,c.prototype.callSuper=u,c}}(),function(){var y=!!w.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];w.util.addListener=function(d,l,u,o){d&&d.addEventListener(l,u,!y&&o)},w.util.removeListener=function(d,l,u,o){d&&d.removeEventListener(l,u,!y&&o)},w.util.getPointer=function(d){var u=w.util.getScrollLeftTop(d.target),o=function p(d){var l=d.changedTouches;return l&&l[0]?l[0]:d}(d);return{x:o.clientX+u.left,y:o.clientY+u.top}},w.util.isTouchEvent=function(d){return f.indexOf(d.type)>-1||"touch"===d.pointerType}}(),function(){var f=w.document.createElement("div"),l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(o){return o};"string"==typeof f.style.opacity?u=function(o,h){return o.style.opacity=h,o}:"string"==typeof f.style.filter&&(u=function(o,h){var g=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(g.zoom=1),l.test(g.filter)?g.filter=g.filter.replace(l,h=h>=.9999?"":"alpha(opacity="+100*h+")"):g.filter+=" alpha(opacity="+100*h+")",o}),w.util.setStyle=function y(o,h){var g=o.style;if(!g)return o;if("string"==typeof h)return o.style.cssText+=";"+h,h.indexOf("opacity")>-1?u(o,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var c in h)"opacity"===c?u(o,h[c]):g.setProperty("float"===c||"cssFloat"===c?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":c,h[c]);return o}}(),function(){var p,c,S,x,y=Array.prototype.slice,d=function(S){return y.call(S,0)};try{p=d(w.document.childNodes)instanceof Array}catch{}function l(S,x){var M=w.document.createElement(S);for(var P in x)"class"===P?M.className=x[P]:"for"===P?M.htmlFor=x[P]:M.setAttribute(P,x[P]);return M}function h(S){for(var x=0,M=0,P=w.document.documentElement,j=w.document.body||{scrollLeft:0,scrollTop:0};S&&(S.parentNode||S.host)&&((S=S.parentNode||S.host)===w.document?(x=j.scrollLeft||P.scrollLeft||0,M=j.scrollTop||P.scrollTop||0):(x+=S.scrollLeft||0,M+=S.scrollTop||0),1!==S.nodeType||"fixed"!==S.style.position););return{left:x,top:M}}p||(d=function(S){for(var x=new Array(S.length),M=S.length;M--;)x[M]=S[M];return x}),c=w.document.defaultView&&w.document.defaultView.getComputedStyle?function(S,x){var M=w.document.defaultView.getComputedStyle(S,null);return M?M[x]:void 0}:function(S,x){var M=S.style[x];return!M&&S.currentStyle&&(M=S.currentStyle[x]),M},x="userSelect"in(S=w.document.documentElement.style)?"userSelect":"MozUserSelect"in S?"MozUserSelect":"WebkitUserSelect"in S?"WebkitUserSelect":"KhtmlUserSelect"in S?"KhtmlUserSelect":"",w.util.makeElementUnselectable=function M(j){return typeof j.onselectstart<"u"&&(j.onselectstart=w.util.falseFunction),x?j.style[x]="none":"string"==typeof j.unselectable&&(j.unselectable="on"),j},w.util.makeElementSelectable=function P(j){return typeof j.onselectstart<"u"&&(j.onselectstart=null),x?j.style[x]="":"string"==typeof j.unselectable&&(j.unselectable=""),j},w.util.setImageSmoothing=function D(S,x){S.imageSmoothingEnabled=S.imageSmoothingEnabled||S.webkitImageSmoothingEnabled||S.mozImageSmoothingEnabled||S.msImageSmoothingEnabled||S.oImageSmoothingEnabled,S.imageSmoothingEnabled=x},w.util.getById=function f(S){return"string"==typeof S?w.document.getElementById(S):S},w.util.toArray=d,w.util.addClass=function u(S,x){S&&-1===(" "+S.className+" ").indexOf(" "+x+" ")&&(S.className+=(S.className?" ":"")+x)},w.util.makeElement=l,w.util.wrapElement=function o(S,x,M){return"string"==typeof x&&(x=l(x,M)),S.parentNode&&S.parentNode.replaceChild(x,S),x.appendChild(S),x},w.util.getScrollLeftTop=h,w.util.getElementOffset=function g(S){var x,G,M=S&&S.ownerDocument,P={left:0,top:0},j={left:0,top:0},re={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return j;for(var ae in re)j[re[ae]]+=parseInt(c(S,ae),10)||0;return x=M.documentElement,typeof S.getBoundingClientRect<"u"&&(P=S.getBoundingClientRect()),G=h(S),{left:P.left+G.left-(x.clientLeft||0)+j.left,top:P.top+G.top-(x.clientTop||0)+j.top}},w.util.getNodeCanvas=function v(S){var x=w.jsdomImplForWrapper(S);return x._canvas||x._image},w.util.cleanUpJsdomNode=function C(S){if(w.isLikelyNode){var x=w.jsdomImplForWrapper(S);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}}(),function(){function f(){}w.util.request=function p(d,l){l||(l={});var u=l.method?l.method.toUpperCase():"GET",o=l.onComplete||function(){},h=new w.window.XMLHttpRequest,g=l.body||l.parameters;return h.onreadystatechange=function(){4===h.readyState&&(o(h),h.onreadystatechange=f)},"GET"===u&&(g=null,"string"==typeof l.parameters&&(d=function y(d,l){return d+(/\?/.test(d)?"&":"?")+l}(d,l.parameters))),h.open(u,d,!0),("POST"===u||"PUT"===u)&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g),h}}(),w.log=console.log,w.warn=console.warn,function(){var y=w.util.object.extend,f=w.util.object.clone,p=[];function d(){return!1}function l(v,C,D,S){return-D*Math.cos(v/S*(Math.PI/2))+D+C}w.util.object.extend(p,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(C){C.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var C=this.filter(function(D){return"object"==typeof D.target&&D.target.canvas===v});return C.forEach(function(D){D.cancel()}),C},cancelByTarget:function(v){var C=this.findAnimationsByTarget(v);return C.forEach(function(D){D.cancel()}),C},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(C){return C.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(C){return C.target===v}):[]}});var o=w.window.requestAnimationFrame||w.window.webkitRequestAnimationFrame||w.window.mozRequestAnimationFrame||w.window.oRequestAnimationFrame||w.window.msRequestAnimationFrame||function(v){return w.window.setTimeout(v,1e3/60)},h=w.window.cancelAnimationFrame||w.window.clearTimeout;function g(){return o.apply(w.window,arguments)}w.util.animate=function u(v){v||(v={});var D,C=!1,S=function(){var x=w.runningAnimations.indexOf(D);return x>-1&&w.runningAnimations.splice(x,1)[0]};return D=y(f(v),{cancel:function(){return C=!0,S()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),w.runningAnimations.push(D),g(function(x){var G,M=x||+new Date,P=v.duration||500,j=M+P,re=v.onChange||d,ae=v.abort||d,he=v.onComplete||d,ge=v.easing||l,le="startValue"in v&&v.startValue.length>0,ce="startValue"in v?v.startValue:0,De="endValue"in v?v.endValue:100,de=v.byValue||(le?ce.map(function(Se,O){return De[O]-ce[O]}):De-ce);v.onStart&&v.onStart(),function Se(O){var F=(G=O||+new Date)>j?P:G-M,L=F/P,k=le?ce.map(function(R,I){return ge(F,ce[I],de[I],P)}):ge(F,ce,de,P),$=Math.abs(le?(k[0]-ce[0])/de[0]:(k-ce)/de);if(D.currentValue=le?k.slice():k,D.completionRate=$,D.durationRate=L,!C){if(ae(k,$,L))return void S();if(G>j)return D.currentValue=le?De.slice():De,D.completionRate=1,D.durationRate=1,re(le?De.slice():De,1,1),he(De,1,1),void S();re(k,$,L),g(Se)}}(M)}),D.cancel},w.util.requestAnimFrame=g,w.util.cancelAnimFrame=function c(){return h.apply(w.window,arguments)},w.runningAnimations=p}(),function(){function y(p,d,l){var u="rgba("+parseInt(p[0]+l*(d[0]-p[0]),10)+","+parseInt(p[1]+l*(d[1]-p[1]),10)+","+parseInt(p[2]+l*(d[2]-p[2]),10);return(u+=","+(p&&d?parseFloat(p[3]+l*(d[3]-p[3])):1))+")"}w.util.animateColor=function f(p,d,l,u){var o=new w.Color(p).getSource(),h=new w.Color(d).getSource(),g=u.onComplete,c=u.onChange;return w.util.animate(w.util.object.extend(u=u||{},{duration:l||500,startValue:o,endValue:h,byValue:h,easing:function(v,C,D,S){return y(C,D,u.colorEasing?u.colorEasing(v,S):1-Math.cos(v/S*(Math.PI/2)))},onComplete:function(v,C,D){if(g)return g(y(h,h,0),C,D)},onChange:function(v,C,D){if(c){if(Array.isArray(v))return c(y(v,v,0),C,D);c(v,C,D)}}}))}}(),function(){function y(O,F,L,k){return O<Math.abs(F)?(O=F,k=L/4):k=0===F&&0===O?L/(2*Math.PI)*Math.asin(1):L/(2*Math.PI)*Math.asin(F/O),{a:O,c:F,p:L,s:k}}function f(O,F,L){return O.a*Math.pow(2,10*(F-=1))*Math.sin((F*L-O.s)*(2*Math.PI)/O.p)}function De(O,F,L,k){return L-de(k-O,0,L,k)+F}function de(O,F,L,k){return(O/=k)<1/2.75?L*(7.5625*O*O)+F:O<2/2.75?L*(7.5625*(O-=1.5/2.75)*O+.75)+F:O<2.5/2.75?L*(7.5625*(O-=2.25/2.75)*O+.9375)+F:L*(7.5625*(O-=2.625/2.75)*O+.984375)+F}w.util.ease={easeInQuad:function(O,F,L,k){return L*(O/=k)*O+F},easeOutQuad:function(O,F,L,k){return-L*(O/=k)*(O-2)+F},easeInOutQuad:function(O,F,L,k){return(O/=k/2)<1?L/2*O*O+F:-L/2*(--O*(O-2)-1)+F},easeInCubic:function(O,F,L,k){return L*(O/=k)*O*O+F},easeOutCubic:function p(O,F,L,k){return L*((O=O/k-1)*O*O+1)+F},easeInOutCubic:function d(O,F,L,k){return(O/=k/2)<1?L/2*O*O*O+F:L/2*((O-=2)*O*O+2)+F},easeInQuart:function l(O,F,L,k){return L*(O/=k)*O*O*O+F},easeOutQuart:function u(O,F,L,k){return-L*((O=O/k-1)*O*O*O-1)+F},easeInOutQuart:function o(O,F,L,k){return(O/=k/2)<1?L/2*O*O*O*O+F:-L/2*((O-=2)*O*O*O-2)+F},easeInQuint:function h(O,F,L,k){return L*(O/=k)*O*O*O*O+F},easeOutQuint:function g(O,F,L,k){return L*((O=O/k-1)*O*O*O*O+1)+F},easeInOutQuint:function c(O,F,L,k){return(O/=k/2)<1?L/2*O*O*O*O*O+F:L/2*((O-=2)*O*O*O*O+2)+F},easeInSine:function v(O,F,L,k){return-L*Math.cos(O/k*(Math.PI/2))+L+F},easeOutSine:function C(O,F,L,k){return L*Math.sin(O/k*(Math.PI/2))+F},easeInOutSine:function D(O,F,L,k){return-L/2*(Math.cos(Math.PI*O/k)-1)+F},easeInExpo:function S(O,F,L,k){return 0===O?F:L*Math.pow(2,10*(O/k-1))+F},easeOutExpo:function x(O,F,L,k){return O===k?F+L:L*(1-Math.pow(2,-10*O/k))+F},easeInOutExpo:function M(O,F,L,k){return 0===O?F:O===k?F+L:(O/=k/2)<1?L/2*Math.pow(2,10*(O-1))+F:L/2*(2-Math.pow(2,-10*--O))+F},easeInCirc:function P(O,F,L,k){return-L*(Math.sqrt(1-(O/=k)*O)-1)+F},easeOutCirc:function j(O,F,L,k){return L*Math.sqrt(1-(O=O/k-1)*O)+F},easeInOutCirc:function G(O,F,L,k){return(O/=k/2)<1?-L/2*(Math.sqrt(1-O*O)-1)+F:L/2*(Math.sqrt(1-(O-=2)*O)+1)+F},easeInElastic:function re(O,F,L,k){var R=0;return 0===O?F:1==(O/=k)?F+L:(R||(R=.3*k),-f(y(L,L,R,1.70158),O,k)+F)},easeOutElastic:function ae(O,F,L,k){var R=0;if(0===O)return F;if(1==(O/=k))return F+L;R||(R=.3*k);var B=y(L,L,R,1.70158);return B.a*Math.pow(2,-10*O)*Math.sin((O*k-B.s)*(2*Math.PI)/B.p)+B.c+F},easeInOutElastic:function he(O,F,L,k){var R=0;if(0===O)return F;if(2==(O/=k/2))return F+L;R||(R=k*(.3*1.5));var B=y(L,L,R,1.70158);return O<1?-.5*f(B,O,k)+F:B.a*Math.pow(2,-10*(O-=1))*Math.sin((O*k-B.s)*(2*Math.PI)/B.p)*.5+B.c+F},easeInBack:function ge(O,F,L,k,$){return void 0===$&&($=1.70158),L*(O/=k)*O*(($+1)*O-$)+F},easeOutBack:function le(O,F,L,k,$){return void 0===$&&($=1.70158),L*((O=O/k-1)*O*(($+1)*O+$)+1)+F},easeInOutBack:function ce(O,F,L,k,$){return void 0===$&&($=1.70158),(O/=k/2)<1?L/2*(O*O*((1+($*=1.525))*O-$))+F:L/2*((O-=2)*O*((1+($*=1.525))*O+$)+2)+F},easeInBounce:De,easeOutBounce:de,easeInOutBounce:function Se(O,F,L,k){return O<k/2?.5*De(2*O,0,L,k)+F:.5*de(2*O-k,0,L,k)+.5*L+F}}}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.util.object.clone,l=f.util.toFixed,u=f.util.parseUnit,o=f.util.multiplyTransformMatrices,C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},D={stroke:"strokeOpacity",fill:"fillOpacity"},S="font-size",x="clip-path";function M(R){return R in C?C[R]:R}function P(R,I,B,H){var W,z=Array.isArray(I);if("fill"!==R&&"stroke"!==R||"none"!==I){if("strokeUniform"===R)return"non-scaling-stroke"===I;if("strokeDashArray"===R)I="none"===I?null:I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===R)I=B&&B.transformMatrix?o(B.transformMatrix,f.parseTransformAttribute(I)):f.parseTransformAttribute(I);else if("visible"===R)I="none"!==I&&"hidden"!==I,B&&!1===B.visible&&(I=!1);else if("opacity"===R)I=parseFloat(I),B&&typeof B.opacity<"u"&&(I*=B.opacity);else if("textAnchor"===R)I="start"===I?"left":"end"===I?"right":"center";else if("charSpacing"===R)W=u(I,H)/H*1e3;else if("paintFirst"===R){var ee=I.indexOf("fill"),se=I.indexOf("stroke");I="fill",(ee>-1&&se>-1&&se<ee||-1===ee&&se>-1)&&(I="stroke")}else{if("href"===R||"xlink:href"===R||"font"===R)return I;if("imageSmoothing"===R)return"optimizeQuality"===I;W=z?I.map(u):u(I,H)}}else I="";return!z&&isNaN(W)?I:W}function j(R){return new RegExp("^("+R.join("|")+")\\b","i")}function re(R,I){var z,W,ee,H=[];for(W=0,ee=I.length;W<ee;W++)z=R.getElementsByTagName(I[W]),H=H.concat(Array.prototype.slice.call(z));return H}function le(R,I){var B,H=!0;return(B=De(R,I.pop()))&&I.length&&(H=function ce(R,I){for(var B,H=!0;R.parentNode&&1===R.parentNode.nodeType&&I.length;)H&&(B=I.pop()),H=De(R=R.parentNode,B);return 0===I.length}(R,I)),B&&H&&0===I.length}function De(R,I){var W,ee,B=R.nodeName,H=R.getAttribute("class"),z=R.getAttribute("id");if(W=new RegExp("^"+B,"i"),I=I.replace(W,""),z&&I.length&&(W=new RegExp("#"+z+"(?![a-zA-Z\\-]+)","i"),I=I.replace(W,"")),H&&I.length)for(ee=(H=H.split(" ")).length;ee--;)W=new RegExp("\\."+H[ee]+"(?![a-zA-Z\\-]+)","i"),I=I.replace(W,"");return 0===I.length}function de(R,I){var B;if(R.getElementById&&(B=R.getElementById(I)),B)return B;var H,z,W,ee=R.getElementsByTagName("*");for(z=0,W=ee.length;z<W;z++)if(I===(H=ee[z]).getAttribute("id"))return H}f.svgValidTagNamesRegEx=j(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),f.svgViewBoxElementsRegEx=j(["symbol","image","marker","pattern","view","svg"]),f.svgInvalidAncestorsRegEx=j(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),f.svgValidParentsRegEx=j(["symbol","g","a","svg","clipPath","defs"]),f.cssRules={},f.gradientDefs={},f.clipPaths={},f.parseTransformAttribute=function(){function B(K,xe,Be){K[Be]=Math.tan(f.util.degreesToRadians(xe[0]))}var z=f.iMatrix,W=f.reNum,ee=f.commaWsp,X="(?:(?:(matrix)\\s*\\(\\s*("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+")"+ee+"("+W+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+W+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+W+")\\s*\\)))",je=new RegExp("^\\s*(?:(?:"+X+"(?:"+ee+"*"+X+")*)?)\\s*$"),Te=new RegExp(X,"g");return function(K){var xe=z.concat(),Be=[];if(!K||K&&!je.test(K))return xe;K.replace(Te,function(ct){var Je=new RegExp(X).exec(ct).filter(function($n){return!!$n}),Pt=Je[1],rt=Je.slice(2).map(parseFloat);switch(Pt){case"translate":!function H(K,xe){K[4]=xe[0],2===xe.length&&(K[5]=xe[1])}(xe,rt);break;case"rotate":rt[0]=f.util.degreesToRadians(rt[0]),function R(K,xe){var Be=f.util.cos(xe[0]),qe=f.util.sin(xe[0]),ct=0,Je=0;3===xe.length&&(ct=xe[1],Je=xe[2]),K[0]=Be,K[1]=qe,K[2]=-qe,K[3]=Be,K[4]=ct-(Be*ct-qe*Je),K[5]=Je-(qe*ct+Be*Je)}(xe,rt);break;case"scale":!function I(K,xe){var qe=2===xe.length?xe[1]:xe[0];K[0]=xe[0],K[3]=qe}(xe,rt);break;case"skewX":B(xe,rt,2);break;case"skewY":B(xe,rt,1);break;case"matrix":xe=rt}Be.push(xe.concat()),xe=z.concat()});for(var qe=Be[0];Be.length>1;)Be.shift(),qe=f.util.multiplyTransformMatrices(qe,Be[0]);return qe}}();var O=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function F(R){if(!f.svgViewBoxElementsRegEx.test(R.nodeName))return{};var z,W,ee,se,ue,Y,I=R.getAttribute("viewBox"),B=1,H=1,U=R.getAttribute("width"),Q=R.getAttribute("height"),Z=R.getAttribute("x")||0,X=R.getAttribute("y")||0,ne=R.getAttribute("preserveAspectRatio")||"",fe=!I||!(I=I.match(O)),je=!U||!Q||"100%"===U||"100%"===Q,Te=fe&&je,K={},xe="",Be=0,qe=0;if(K.width=0,K.height=0,K.toBeParsed=Te,fe&&(Z||X)&&R.parentNode&&"#document"!==R.parentNode.nodeName&&(xe=" translate("+u(Z)+" "+u(X)+") ",ue=(R.getAttribute("transform")||"")+xe,R.setAttribute("transform",ue),R.removeAttribute("x"),R.removeAttribute("y")),Te)return K;if(fe)return K.width=u(U),K.height=u(Q),K;if(z=-parseFloat(I[1]),W=-parseFloat(I[2]),ee=parseFloat(I[3]),se=parseFloat(I[4]),K.minX=z,K.minY=W,K.viewBoxWidth=ee,K.viewBoxHeight=se,je?(K.width=ee,K.height=se):(K.width=u(U),K.height=u(Q),B=K.width/ee,H=K.height/se),"none"!==(ne=f.util.parsePreserveAspectRatioAttribute(ne)).alignX&&("meet"===ne.meetOrSlice&&(H=B=B>H?H:B),"slice"===ne.meetOrSlice&&(H=B=B>H?B:H),Be=K.width-ee*B,qe=K.height-se*B,"Mid"===ne.alignX&&(Be/=2),"Mid"===ne.alignY&&(qe/=2),"Min"===ne.alignX&&(Be=0),"Min"===ne.alignY&&(qe=0)),1===B&&1===H&&0===z&&0===W&&0===Z&&0===X)return K;if((Z||X)&&"#document"!==R.parentNode.nodeName&&(xe=" translate("+u(Z)+" "+u(X)+") "),ue=xe+" matrix("+B+" 0 0 "+H+" "+(z*B+Be)+" "+(W*H+qe)+") ","svg"===R.nodeName){for(Y=R.ownerDocument.createElementNS(f.svgNS,"g");R.firstChild;)Y.appendChild(R.firstChild);R.appendChild(Y)}else(Y=R).removeAttribute("x"),Y.removeAttribute("y"),ue=Y.getAttribute("transform")+ue;return Y.setAttribute("transform",ue),K}function k(R,I){var H="xlink:href",W=de(R,I.getAttribute(H).slice(1));if(W&&W.getAttribute(H)&&k(R,W),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(se){W&&!I.hasAttribute(se)&&W.hasAttribute(se)&&I.setAttribute(se,W.getAttribute(se))}),!I.children.length)for(var ee=W.cloneNode(!0);ee.firstChild;)I.appendChild(ee.firstChild);I.removeAttribute(H)}f.parseSVGDocument=function(R,I,B,H){if(R){!function Se(R){for(var I=re(R,["use","svg:use"]),B=0;I.length&&B<I.length;){var H=I[B],z=H.getAttribute("xlink:href")||H.getAttribute("href");if(null===z)return;var Z,X,ne,fe,W=z.slice(1),ee=H.getAttribute("x")||0,se=H.getAttribute("y")||0,ue=de(R,W).cloneNode(!0),Y=(ue.getAttribute("transform")||"")+" translate("+ee+", "+se+")",Q=I.length,je=f.svgNS;if(F(ue),/^svg$/i.test(ue.nodeName)){var Te=ue.ownerDocument.createElementNS(je,"g");for(X=0,fe=(ne=ue.attributes).length;X<fe;X++)Z=ne.item(X),Te.setAttributeNS(je,Z.nodeName,Z.nodeValue);for(;ue.firstChild;)Te.appendChild(ue.firstChild);ue=Te}for(X=0,fe=(ne=H.attributes).length;X<fe;X++)"x"!==(Z=ne.item(X)).nodeName&&"y"!==Z.nodeName&&"xlink:href"!==Z.nodeName&&"href"!==Z.nodeName&&("transform"===Z.nodeName?Y=Z.nodeValue+" "+Y:ue.setAttribute(Z.nodeName,Z.nodeValue));ue.setAttribute("transform",Y),ue.setAttribute("instantiated_by_use","1"),ue.removeAttribute("id"),H.parentNode.replaceChild(ue,H),I.length===Q&&B++}}(R);var W,ee,z=f.Object.__uid++,se=F(R),ue=f.util.toArray(R.getElementsByTagName("*"));if(se.crossOrigin=H&&H.crossOrigin,se.svgUid=z,0===ue.length&&f.isLikelyNode){var Y=[];for(W=0,ee=(ue=R.selectNodes('//*[name(.)!="svg"]')).length;W<ee;W++)Y[W]=ue[W];ue=Y}var U=ue.filter(function(Z){return F(Z),f.svgValidTagNamesRegEx.test(Z.nodeName.replace("svg:",""))&&!function L(R,I){for(;R&&(R=R.parentNode);)if(R.nodeName&&I.test(R.nodeName.replace("svg:",""))&&!R.getAttribute("instantiated_by_use"))return!0;return!1}(Z,f.svgInvalidAncestorsRegEx)});if(!U||U&&!U.length)return void(I&&I([],{}));var Q={};ue.filter(function(Z){return"clipPath"===Z.nodeName.replace("svg:","")}).forEach(function(Z){var X=Z.getAttribute("id");Q[X]=f.util.toArray(Z.getElementsByTagName("*")).filter(function(ne){return f.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:",""))})}),f.gradientDefs[z]=f.getGradientDefs(R),f.cssRules[z]=f.getCSSRules(R),f.clipPaths[z]=Q,f.parseElements(U,function(Z,X){I&&(I(Z,se,X,ue),delete f.gradientDefs[z],delete f.cssRules[z],delete f.clipPaths[z])},d(se),B,H)}};var $=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");p(f,{parseFontDeclaration:function(R,I){var B=R.match($);if(B){var H=B[1],z=B[3],W=B[4],ee=B[5],se=B[6];H&&(I.fontStyle=H),z&&(I.fontWeight=isNaN(parseFloat(z))?z:parseFloat(z)),W&&(I.fontSize=u(W)),se&&(I.fontFamily=se),ee&&(I.lineHeight="normal"===ee?1:ee)}},getGradientDefs:function(R){var H,B=re(R,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),z=0,W={};for(z=B.length;z--;)(H=B[z]).getAttribute("xlink:href")&&k(R,H),W[H.getAttribute("id")]=H;return W},parseAttributes:function(R,I,B){if(R){var H,W,ee,z={};typeof B>"u"&&(B=R.getAttribute("svgUid")),R.parentNode&&f.svgValidParentsRegEx.test(R.parentNode.nodeName)&&(z=f.parseAttributes(R.parentNode,I,B));var se=I.reduce(function(ne,fe){return(H=R.getAttribute(fe))&&(ne[fe]=H),ne},{}),ue=p(function ge(R,I){var B={};for(var H in f.cssRules[I])if(le(R,H.split(" ")))for(var z in f.cssRules[I][H])B[z]=f.cssRules[I][H][z];return B}(R,B),f.parseStyleAttribute(R));se=p(se,ue),ue[x]&&R.setAttribute(x,ue[x]),W=ee=z.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,se[S]&&(se[S]=W=u(se[S],ee));var Y,U,Q={};for(var Z in se)U=P(Y=M(Z),se[Z],z,W),Q[Y]=U;Q&&Q.font&&f.parseFontDeclaration(Q.font,Q);var X=p(z,Q);return f.svgValidParentsRegEx.test(R.nodeName)?X:function G(R){for(var I in D)if(!(typeof R[D[I]]>"u"||""===R[I])){if(typeof R[I]>"u"){if(!f.Object.prototype[I])continue;R[I]=f.Object.prototype[I]}if(0!==R[I].indexOf("url(")){var B=new f.Color(R[I]);R[I]=B.setAlpha(l(B.getAlpha()*R[D[I]],2)).toRgba()}}return R}(X)}},parseElements:function(R,I,B,H,z){new f.ElementsParser(R,I,B,H,z).parse()},parseStyleAttribute:function(R){var I={},B=R.getAttribute("style");return B&&("string"==typeof B?function ae(R,I){var B,H;R.replace(/;\s*$/,"").split(";").forEach(function(z){var W=z.split(":");B=W[0].trim().toLowerCase(),H=W[1].trim(),I[B]=H})}(B,I):function he(R,I){for(var z in R)typeof R[z]>"u"||(I[z.toLowerCase()]=R[z])}(B,I)),I},parsePointsAttribute:function(R){if(!R)return null;var B,H,I=[];for(B=0,H=(R=(R=R.replace(/,/g," ").trim()).split(/\s+/)).length;B<H;B+=2)I.push({x:parseFloat(R[B]),y:parseFloat(R[B+1])});return I},getCSSRules:function(R){var B,H,I=R.getElementsByTagName("style"),z={};for(B=0,H=I.length;B<H;B++){var ee=I[B].textContent;""!==(ee=ee.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&ee.split("}").filter(function(se){return se.trim()}).forEach(function(se){var ue=se.split("{"),Y={},Q=ue[1].trim().split(";").filter(function(fe){return fe.trim()});for(B=0,H=Q.length;B<H;B++){var Z=Q[B].split(":"),X=Z[0].trim(),ne=Z[1].trim();Y[X]=ne}(se=ue[0].trim()).split(",").forEach(function(fe){""!==(fe=fe.replace(/^svg/i,"").trim())&&(z[fe]?f.util.object.extend(z[fe],Y):z[fe]=f.util.object.clone(Y))})})}return z},loadSVGFromURL:function(R,I,B,H){R=R.replace(/^\n\s*/,"").trim(),new f.util.request(R,{method:"get",onComplete:function z(W){var ee=W.responseXML;if(!ee||!ee.documentElement)return I&&I(null),!1;f.parseSVGDocument(ee.documentElement,function(se,ue,Y,U){I&&I(se,ue,Y,U)},B,H)}})},loadSVGFromString:function(R,I,B,H){var W=(new f.window.DOMParser).parseFromString(R.trim(),"text/xml");f.parseSVGDocument(W.documentElement,function(ee,se,ue,Y){I(ee,se,ue,Y)},B,H)}})}(Ne),w.ElementsParser=function(y,f,p,d,l,u){this.elements=y,this.callback=f,this.options=p,this.reviver=d,this.svgUid=p&&p.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(y){y.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},y.createObjects=function(){var f=this;this.elements.forEach(function(p,d){p.setAttribute("svgUid",f.svgUid),f.createObject(p,d)})},y.findTag=function(f){return w[w.util.string.capitalize(f.tagName.replace("svg:",""))]},y.createObject=function(f,p){var d=this.findTag(f);if(d&&d.fromElement)try{d.fromElement(f,this.createCallback(p,f),this.options)}catch(l){w.log(l)}else this.checkIfDone()},y.createCallback=function(f,p){var d=this;return function(l){var u;d.resolveGradient(l,p,"fill"),d.resolveGradient(l,p,"stroke"),l instanceof w.Image&&l._originalElement&&(u=l.parsePreserveAspectRatioAttribute(p)),l._removeTransformMatrix(u),d.resolveClipPath(l,p),d.reviver&&d.reviver(p,l),d.instances[f]=l,d.checkIfDone()}},y.extractPropertyDefinition=function(f,p,d){var l=f[p],u=this.regexUrl;if(u.test(l)){u.lastIndex=0;var o=u.exec(l)[1];return u.lastIndex=0,w[d][this.svgUid][o]}},y.resolveGradient=function(f,p,d){var l=this.extractPropertyDefinition(f,d,"gradientDefs");if(l){var u=p.getAttribute(d+"-opacity"),o=w.Gradient.fromElement(l,f,u,this.options);f.set(d,o)}},y.createClipPathCallback=function(f,p){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,p.push(d)}},y.resolveClipPath=function(f,p){var l,o,h,g,d=this.extractPropertyDefinition(f,"clipPath","clipPaths");if(d){h=[],o=w.util.invertTransform(f.calcTransformMatrix());for(var v=d[0].parentNode,C=p;C.parentNode&&C.getAttribute("clip-path")!==f.clipPath;)C=C.parentNode;C.parentNode.appendChild(v);for(var D=0;D<d.length;D++)this.findTag(l=d[D]).fromElement(l,this.createClipPathCallback(f,h),this.options);d=1===h.length?h[0]:new w.Group(h),g=w.util.multiplyTransformMatrices(o,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,C);var c=w.util.qrDecompose(g);d.flipX=!1,d.flipY=!1,d.set("scaleX",c.scaleX),d.set("scaleY",c.scaleY),d.angle=c.angle,d.skewX=c.skewX,d.skewY=0,d.setPositionByOrigin({x:c.translateX,y:c.translateY},"center","center"),f.clipPath=d}else delete f.clipPath},y.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(f){return null!=f}),this.callback(this.instances,this.elements))}}(w.ElementsParser.prototype),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(d,l){this.x=d,this.y=l}f.Point?f.warn("fabric.Point is already defined"):(f.Point=p,p.prototype={type:"point",constructor:p,add:function(d){return new p(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new p(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new p(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new p(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new p(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new p(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new p(this.x+(d.x-this.x)*l,this.y+(d.y-this.y)*l)},distanceFrom:function(d){var l=this.x-d.x,u=this.y-d.y;return Math.sqrt(l*l+u*u)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new p(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new p(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,l){return this.x=d,this.y=l,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var l=this.x,u=this.y;this.x=d.x,this.y=d.y,d.x=l,d.y=u},clone:function(){return new p(this.x,this.y)}})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(d){this.status=d,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=p,f.Intersection.prototype={constructor:p,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},f.Intersection.intersectLineLine=function(d,l,u,o){var h,g=(o.x-u.x)*(d.y-u.y)-(o.y-u.y)*(d.x-u.x),c=(l.x-d.x)*(d.y-u.y)-(l.y-d.y)*(d.x-u.x),v=(o.y-u.y)*(l.x-d.x)-(o.x-u.x)*(l.y-d.y);if(0!==v){var C=g/v,D=c/v;0<=C&&C<=1&&0<=D&&D<=1?(h=new p("Intersection")).appendPoint(new f.Point(d.x+C*(l.x-d.x),d.y+C*(l.y-d.y))):h=new p}else h=new p(0===g||0===c?"Coincident":"Parallel");return h},f.Intersection.intersectLinePolygon=function(d,l,u){var v,C,o=new p,h=u.length;for(C=0;C<h;C++)v=p.intersectLineLine(d,l,u[C],u[(C+1)%h]),o.appendPoints(v.points);return o.points.length>0&&(o.status="Intersection"),o},f.Intersection.intersectPolygonPolygon=function(d,l){var h,u=new p,o=d.length;for(h=0;h<o;h++){var v=p.intersectLinePolygon(d[h],d[(h+1)%o],l);u.appendPoints(v.points)}return u.points.length>0&&(u.status="Intersection"),u},f.Intersection.intersectPolygonRectangle=function(d,l,u){var o=l.min(u),h=l.max(u),g=new f.Point(h.x,o.y),c=new f.Point(o.x,h.y),v=p.intersectLinePolygon(o,g,d),C=p.intersectLinePolygon(g,h,d),D=p.intersectLinePolygon(h,c,d),S=p.intersectLinePolygon(c,o,d),x=new p;return x.appendPoints(v.points),x.appendPoints(C.points),x.appendPoints(D.points),x.appendPoints(S.points),x.points.length>0&&(x.status="Intersection"),x})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}function d(l,u,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?l+6*(u-l)*o:o<.5?u:o<2/3?l+(u-l)*(2/3-o)*6:l}f.Color?f.warn("fabric.Color is already defined."):(f.Color=p,f.Color.prototype={_tryParsingColor:function(l){var u;l in p.colorNameMap&&(l=p.colorNameMap[l]),"transparent"===l&&(u=[255,255,255,0]),u||(u=p.sourceFromHex(l)),u||(u=p.sourceFromRgb(l)),u||(u=p.sourceFromHsl(l)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(l,u,o){var h,g,c,v=f.util.array.max([l/=255,u/=255,o/=255]),C=f.util.array.min([l,u,o]);if(c=(v+C)/2,v===C)h=g=0;else{var D=v-C;switch(g=c>.5?D/(2-v-C):D/(v+C),v){case l:h=(u-o)/D+(u<o?6:0);break;case u:h=(o-l)/D+2;break;case o:h=(l-u)/D+4}h/=6}return[Math.round(360*h),Math.round(100*g),Math.round(100*c)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var l=this.getSource(),u=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+l[3]+")"},toHex:function(){var u,o,h,l=this.getSource();return u=1===(u=l[0].toString(16)).length?"0"+u:u,o=1===(o=l[1].toString(16)).length?"0"+o:o,h=1===(h=l[2].toString(16)).length?"0"+h:h,u.toUpperCase()+o.toUpperCase()+h.toUpperCase()},toHexa:function(){var u,l=this.getSource();return u=1===(u=(u=Math.round(255*l[3])).toString(16)).length?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var u=this.getSource();return u[3]=l,this.setSource(u),this},toGrayscale:function(){var l=this.getSource(),u=parseInt((.3*l[0]+.59*l[1]+.11*l[2]).toFixed(0),10);return this.setSource([u,u,u,l[3]]),this},toBlackWhite:function(l){var u=this.getSource(),o=(.3*u[0]+.59*u[1]+.11*u[2]).toFixed(0),h=u[3];return l=l||127,o=Number(o)<Number(l)?0:255,this.setSource([o,o,o,h]),this},overlayWith:function(l){l instanceof p||(l=new p(l));var v,u=[],o=this.getAlpha(),g=this.getSource(),c=l.getSource();for(v=0;v<3;v++)u.push(Math.round(.5*g[v]+.5*c[v]));return u[3]=o,this.setSource(u),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},f.Color.fromRgb=function(l){return p.fromSource(p.sourceFromRgb(l))},f.Color.sourceFromRgb=function(l){var u=l.match(p.reRGBa);if(u){var o=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),h=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),g=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(o,10),parseInt(h,10),parseInt(g,10),u[4]?parseFloat(u[4]):1]}},f.Color.fromRgba=p.fromRgb,f.Color.fromHsl=function(l){return p.fromSource(p.sourceFromHsl(l))},f.Color.sourceFromHsl=function(l){var u=l.match(p.reHSLa);if(u){var c,v,C,o=(parseFloat(u[1])%360+360)%360/360,h=parseFloat(u[2])/(/%$/.test(u[2])?100:1),g=parseFloat(u[3])/(/%$/.test(u[3])?100:1);if(0===h)c=v=C=g;else{var D=g<=.5?g*(h+1):g+h-g*h,S=2*g-D;c=d(S,D,o+1/3),v=d(S,D,o),C=d(S,D,o-1/3)}return[Math.round(255*c),Math.round(255*v),Math.round(255*C),u[4]?parseFloat(u[4]):1]}},f.Color.fromHsla=p.fromHsl,f.Color.fromHex=function(l){return p.fromSource(p.sourceFromHex(l))},f.Color.sourceFromHex=function(l){if(l.match(p.reHex)){var u=l.slice(l.indexOf("#")+1),o=3===u.length||4===u.length,h=8===u.length||4===u.length,g=o?u.charAt(0)+u.charAt(0):u.substring(0,2),c=o?u.charAt(1)+u.charAt(1):u.substring(2,4),v=o?u.charAt(2)+u.charAt(2):u.substring(4,6),C=h?o?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(g,16),parseInt(c,16),parseInt(v,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},f.Color.fromSource=function(l){var u=new p;return u.setSource(l),u})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],l={},u="left",o="top",h="right",g="bottom",c="center",v={top:g,bottom:o,left:h,right:u,center:c},C=f.util.radiansToDegrees,D=Math.sign||function(Y){return(Y>0)-(Y<0)||+Y};function S(Y,U){var Q=Y.angle+C(Math.atan2(U.y,U.x))+360;return Math.round(Q%360/45)}function x(Y,U){var Q=U.transform.target,Z=Q.canvas,X=f.util.object.clone(U);X.target=Q,Z&&Z.fire("object:"+Y,X),Q.fire(Y,U)}function M(Y,U){var Q=U.canvas,X=Y[Q.uniScaleKey];return Q.uniformScaling&&!X||!Q.uniformScaling&&X}function P(Y){return Y.originX===c&&Y.originY===c}function j(Y,U,Q){var Z=Y.lockScalingX,X=Y.lockScalingY;return!!(Z&&X||!U&&(Z||X)&&Q||Z&&"x"===U||X&&"y"===U)}function le(Y,U,Q,Z){return{e:Y,transform:U,pointer:{x:Q,y:Z}}}function ce(Y){return function(U,Q,Z,X){var ne=Q.target,fe=ne.getCenterPoint(),je=ne.translateToOriginPoint(fe,Q.originX,Q.originY),Te=Y(U,Q,Z,X);return ne.setPositionByOrigin(je,Q.originX,Q.originY),Te}}function De(Y,U){return function(Q,Z,X,ne){var fe=U(Q,Z,X,ne);return fe&&x(Y,le(Q,Z,X,ne)),fe}}function de(Y,U,Q,Z,X){var ne=Y.target,fe=ne.controls[Y.corner],je=ne.canvas.getZoom(),Te=ne.padding/je,K=ne.toLocalPoint(new f.Point(Z,X),U,Q);return K.x>=Te&&(K.x-=Te),K.x<=-Te&&(K.x+=Te),K.y>=Te&&(K.y-=Te),K.y<=Te&&(K.y+=Te),K.x-=fe.offsetX,K.y-=fe.offsetY,K}function Se(Y){return Y.flipX!==Y.flipY}function O(Y,U,Q,Z,X){if(0!==Y[U]){var ne=Y._getTransformedDimensions()[Z];Y.set(Q,X/ne*Y[Q])}}function F(Y,U,Q,Z){var K,X=U.target,ne=X._getTransformedDimensions(0,X.skewY),fe=de(U,U.originX,U.originY,Q,Z),je=Math.abs(2*fe.x)-ne.x,Te=X.skewX;je<2?K=0:(K=C(Math.atan2(je/X.scaleX,ne.y/X.scaleY)),U.originX===u&&U.originY===g&&(K=-K),U.originX===h&&U.originY===o&&(K=-K),Se(X)&&(K=-K));var xe=Te!==K;if(xe){var Be=X._getTransformedDimensions().y;X.set("skewX",K),O(X,"skewY","scaleY","y",Be)}return xe}function L(Y,U,Q,Z){var K,X=U.target,ne=X._getTransformedDimensions(X.skewX,0),fe=de(U,U.originX,U.originY,Q,Z),je=Math.abs(2*fe.y)-ne.y,Te=X.skewY;je<2?K=0:(K=C(Math.atan2(je/X.scaleY,ne.x/X.scaleX)),U.originX===u&&U.originY===g&&(K=-K),U.originX===h&&U.originY===o&&(K=-K),Se(X)&&(K=-K));var xe=Te!==K;if(xe){var Be=X._getTransformedDimensions().x;X.set("skewY",K),O(X,"skewX","scaleX","x",Be)}return xe}function I(Y,U,Q,Z,X){var K,xe,Be,qe,Pt,rt,ne=U.target,fe=ne.lockScalingX,je=ne.lockScalingY,Te=(X=X||{}).by,ct=M(Y,ne),Je=j(ne,Te,ct),$n=U.gestureScale;if(Je)return!1;if($n)xe=U.scaleX*$n,Be=U.scaleY*$n;else{if(K=de(U,U.originX,U.originY,Q,Z),Pt="y"!==Te?D(K.x):1,rt="x"!==Te?D(K.y):1,U.signX||(U.signX=Pt),U.signY||(U.signY=rt),ne.lockScalingFlip&&(U.signX!==Pt||U.signY!==rt))return!1;if(qe=ne._getTransformedDimensions(),ct&&!Te){var Gr=Math.abs(K.x)+Math.abs(K.y),an=U.original,fo=Gr/(Math.abs(qe.x*an.scaleX/ne.scaleX)+Math.abs(qe.y*an.scaleY/ne.scaleY));xe=an.scaleX*fo,Be=an.scaleY*fo}else xe=Math.abs(K.x*ne.scaleX/qe.x),Be=Math.abs(K.y*ne.scaleY/qe.y);P(U)&&(xe*=2,Be*=2),U.signX!==Pt&&"y"!==Te&&(U.originX=v[U.originX],xe*=-1,U.signX=Pt),U.signY!==rt&&"x"!==Te&&(U.originY=v[U.originY],Be*=-1,U.signY=rt)}var Gh=ne.scaleX,Yh=ne.scaleY;return Te?("x"===Te&&ne.set("scaleX",xe),"y"===Te&&ne.set("scaleY",Be)):(!fe&&ne.set("scaleX",xe),!je&&ne.set("scaleY",Be)),Gh!==ne.scaleX||Yh!==ne.scaleY}l.scaleCursorStyleHandler=function G(Y,U,Q){var X=M(Y,Q),ne="";if(0!==U.x&&0===U.y?ne="x":0===U.x&&0!==U.y&&(ne="y"),j(Q,ne,X))return"not-allowed";var fe=S(Q,U);return p[fe]+"-resize"},l.skewCursorStyleHandler=function re(Y,U,Q){if(0!==U.x&&Q.lockSkewingY||0!==U.y&&Q.lockSkewingX)return"not-allowed";var X=S(Q,U)%4;return d[X]+"-resize"},l.scaleSkewCursorStyleHandler=function ae(Y,U,Q){return Y[Q.canvas.altActionKey]?l.skewCursorStyleHandler(Y,U,Q):l.scaleCursorStyleHandler(Y,U,Q)},l.rotationWithSnapping=De("rotating",ce(function R(Y,U,Q,Z){var X=U,ne=X.target,fe=ne.translateToOriginPoint(ne.getCenterPoint(),X.originX,X.originY);if(ne.lockRotation)return!1;var xe,je=Math.atan2(X.ey-fe.y,X.ex-fe.x),Te=Math.atan2(Z-fe.y,Q-fe.x),K=C(Te-je+X.theta);if(ne.snapAngle>0){var Be=ne.snapAngle,qe=ne.snapThreshold||Be,ct=Math.ceil(K/Be)*Be,Je=Math.floor(K/Be)*Be;Math.abs(K-Je)<qe?K=Je:Math.abs(K-ct)<qe&&(K=ct)}return K<0&&(K=360+K),xe=ne.angle!==(K%=360),ne.angle=K,xe})),l.scalingEqually=De("scaling",ce(function B(Y,U,Q,Z){return I(Y,U,Q,Z)})),l.scalingX=De("scaling",ce(function H(Y,U,Q,Z){return I(Y,U,Q,Z,{by:"x"})})),l.scalingY=De("scaling",ce(function z(Y,U,Q,Z){return I(Y,U,Q,Z,{by:"y"})})),l.scalingYOrSkewingX=function W(Y,U,Q,Z){return Y[U.target.canvas.altActionKey]?l.skewHandlerX(Y,U,Q,Z):l.scalingY(Y,U,Q,Z)},l.scalingXOrSkewingY=function ee(Y,U,Q,Z){return Y[U.target.canvas.altActionKey]?l.skewHandlerY(Y,U,Q,Z):l.scalingX(Y,U,Q,Z)},l.changeWidth=De("resizing",ce(function se(Y,U,Q,Z){var X=U.target,ne=de(U,U.originX,U.originY,Q,Z),fe=X.strokeWidth/(X.strokeUniform?X.scaleX:1),je=P(U)?2:1,Te=X.width,K=Math.abs(ne.x*je/X.scaleX)-fe;return X.set("width",Math.max(K,0)),Te!==K})),l.skewHandlerX=function k(Y,U,Q,Z){var fe,X=U.target,ne=X.skewX,je=U.originY;return!X.lockSkewingX&&(0===ne?fe=de(U,c,c,Q,Z).x>0?u:h:(ne>0&&(fe=je===o?u:h),ne<0&&(fe=je===o?h:u),Se(X)&&(fe=fe===u?h:u)),U.originX=fe,De("skewing",ce(F))(Y,U,Q,Z))},l.skewHandlerY=function $(Y,U,Q,Z){var fe,X=U.target,ne=X.skewY,je=U.originX;return!X.lockSkewingY&&(0===ne?fe=de(U,c,c,Q,Z).y>0?o:g:(ne>0&&(fe=je===u?o:g),ne<0&&(fe=je===u?g:o),Se(X)&&(fe=fe===o?g:o)),U.originY=fe,De("skewing",ce(L))(Y,U,Q,Z))},l.dragHandler=function ue(Y,U,Q,Z){var X=U.target,ne=Q-U.offsetX,fe=Z-U.offsetY,je=!X.get("lockMovementX")&&X.left!==ne,Te=!X.get("lockMovementY")&&X.top!==fe;return je&&X.set("left",ne),Te&&X.set("top",fe),(je||Te)&&x("moving",le(Y,U,Q,Z)),je||Te},l.scaleOrSkewActionName=function he(Y,U,Q){var Z=Y[Q.canvas.altActionKey];return 0===U.x?Z?"skewX":"scaleY":0===U.y?Z?"skewY":"scaleX":void 0},l.rotationStyleHandler=function ge(Y,U,Q){return Q.lockRotation?"not-allowed":U.cursorStyle},l.fireEvent=x,l.wrapWithFixedAnchor=ce,l.wrapWithFireEvent=De,l.getLocalPoint=de,f.controlsUtils=l}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.degreesToRadians,d=f.controlsUtils;d.renderCircleControl=function l(o,h,g,c,v){c=c||{};var G,C=this.sizeX||c.cornerSize||v.cornerSize,D=this.sizeY||c.cornerSize||v.cornerSize,S=typeof c.transparentCorners<"u"?c.transparentCorners:v.transparentCorners,x=S?"stroke":"fill",M=!S&&(c.cornerStrokeColor||v.cornerStrokeColor),P=h,j=g;o.save(),o.fillStyle=c.cornerColor||v.cornerColor,o.strokeStyle=c.cornerStrokeColor||v.cornerStrokeColor,C>D?(G=C,o.scale(1,D/C),j=g*C/D):D>C?(G=D,o.scale(C/D,1),P=h*D/C):G=C,o.lineWidth=1,o.beginPath(),o.arc(P,j,G/2,0,2*Math.PI,!1),o[x](),M&&o.stroke(),o.restore()},d.renderSquareControl=function u(o,h,g,c,v){c=c||{};var C=this.sizeX||c.cornerSize||v.cornerSize,D=this.sizeY||c.cornerSize||v.cornerSize,S=typeof c.transparentCorners<"u"?c.transparentCorners:v.transparentCorners,x=S?"stroke":"fill",M=!S&&(c.cornerStrokeColor||v.cornerStrokeColor),P=C/2,j=D/2;o.save(),o.fillStyle=c.cornerColor||v.cornerColor,o.strokeStyle=c.cornerStrokeColor||v.cornerStrokeColor,o.lineWidth=1,o.translate(h,g),o.rotate(p(v.angle)),o[x+"Rect"](-P,-j,C,D),M&&o.strokeRect(-P,-j,C,D),o.restore()}}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Control=function p(d){for(var l in d)this[l]=d[l]},f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,l){return l.cursorStyle},getActionName:function(d,l){return l.actionName},getVisibility:function(d,l){var u=d._controlsVisibility;return u&&typeof u[l]<"u"?u[l]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,l){return f.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},l)},calcCornerCoords:function(d,l,u,o,h){var g,c,v,C,D=h?this.touchSizeX:this.sizeX,S=h?this.touchSizeY:this.sizeY;if(D&&S&&D!==S){var x=Math.atan2(S,D),M=Math.sqrt(D*D+S*S)/2,P=x-f.util.degreesToRadians(d),j=Math.PI/2-x-f.util.degreesToRadians(d);g=M*f.util.cos(P),c=M*f.util.sin(P),v=M*f.util.cos(j),C=M*f.util.sin(j)}else M=.7071067812*(D&&S?D:l),P=f.util.degreesToRadians(45-d),g=v=M*f.util.cos(P),c=C=M*f.util.sin(P);return{tl:{x:u-C,y:o-v},tr:{x:u+g,y:o-c},bl:{x:u-g,y:o+c},br:{x:u+C,y:o+v}}},render:function(d,l,u,o,h){"circle"===((o=o||{}).cornerStyle||h.cornerStyle)?f.controlsUtils.renderCircleControl.call(this,d,l,u,o,h):f.controlsUtils.renderSquareControl.call(this,d,l,u,o,h)}}}(Ne),function(){function y(u,o){var c,v,C,D,h=u.getAttribute("style"),g=u.getAttribute("offset")||0;if(g=(g=parseFloat(g)/(/%$/.test(g)?100:1))<0?0:g>1?1:g,h){var S=h.split(/\s*;\s*/);for(""===S[S.length-1]&&S.pop(),D=S.length;D--;){var x=S[D].split(/\s*:\s*/),M=x[0].trim(),P=x[1].trim();"stop-color"===M?c=P:"stop-opacity"===M&&(C=P)}}return c||(c=u.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=u.getAttribute("stop-opacity")),v=(c=new w.Color(c)).getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=v*o,{offset:g,color:c.toRgb(),opacity:C}}var d=w.util.object.clone;w.Gradient=w.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var o,h=this;Object.keys(u).forEach(function(g){h[g]=u[g]}),this.id?this.id+="_"+w.Object.__uid++:this.id=w.Object.__uid++,o={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},"radial"===this.type&&(o.r1=u.coords.r1||0,o.r2=u.coords.r2||0),this.coords=o,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var o in u){var h=new w.Color(u[o]);this.colorStops.push({offset:parseFloat(o),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(u){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return w.util.populateWithProperties(this,o,u),o},toSVG:function(u,v){var g,c,C,D,h=d(this.coords,!0),S=(v=v||{},d(this.colorStops,!0)),x=h.r1>h.r2,M=this.gradientTransform?this.gradientTransform.concat():w.iMatrix.concat(),P=-this.offsetX,j=-this.offsetY,G=!!v.additionalTransform,re="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(S.sort(function(ce,De){return ce.offset-De.offset}),"objectBoundingBox"===re?(P/=u.width,j/=u.height):(P+=u.width/2,j+=u.height/2),"path"===u.type&&"percentage"!==this.gradientUnits&&(P-=u.pathOffset.x,j-=u.pathOffset.y),M[4]-=P,M[5]-=j,D='id="SVGID_'+this.id+'" gradientUnits="'+re+'"',D+=' gradientTransform="'+(G?v.additionalTransform+" ":"")+w.util.matrixToSVG(M)+'" ',"linear"===this.type?C=["<linearGradient ",D,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,'">\n']:"radial"===this.type&&(C=["<radialGradient ",D,' cx="',x?h.x1:h.x2,'" cy="',x?h.y1:h.y2,'" r="',x?h.r1:h.r2,'" fx="',x?h.x2:h.x1,'" fy="',x?h.y2:h.y1,'">\n']),"radial"===this.type){if(x)for((S=S.concat()).reverse(),g=0,c=S.length;g<c;g++)S[g].offset=1-S[g].offset;var ae=Math.min(h.r1,h.r2);if(ae>0){var ge=ae/Math.max(h.r1,h.r2);for(g=0,c=S.length;g<c;g++)S[g].offset+=ge*(1-S[g].offset)}}for(g=0,c=S.length;g<c;g++){var le=S[g];C.push("<stop ",'offset="',100*le.offset+"%",'" style="stop-color:',le.color,typeof le.opacity<"u"?";stop-opacity: "+le.opacity:";",'"/>\n')}return C.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),C.join("")},toLive:function(u){var o,g,c,h=w.util.object.clone(this.coords);if(this.type){for("linear"===this.type?o=u.createLinearGradient(h.x1,h.y1,h.x2,h.y2):"radial"===this.type&&(o=u.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),g=0,c=this.colorStops.length;g<c;g++){var v=this.colorStops[g].color,C=this.colorStops[g].opacity,D=this.colorStops[g].offset;typeof C<"u"&&(v=new w.Color(v).setAlpha(C).toRgba()),o.addColorStop(D,v)}return o}}}),w.util.object.extend(w.Gradient,{fromElement:function(u,o,h,g){var c=parseFloat(h)/(/%$/.test(h)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var C,M,P,re,v=u.getElementsByTagName("stop"),D="userSpaceOnUse"===u.getAttribute("gradientUnits")?"pixels":"percentage",S=u.getAttribute("gradientTransform")||"",x=[],j=0,G=0;for("linearGradient"===u.nodeName||"LINEARGRADIENT"===u.nodeName?(C="linear",M=function f(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}(u)):(C="radial",M=function p(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}(u)),P=v.length;P--;)x.push(y(v[P],c));return re=w.parseTransformAttribute(S),function l(u,o,h,g){var c,v;Object.keys(o).forEach(function(C){"Infinity"===(c=o[C])?v=1:"-Infinity"===c?v=0:(v=parseFloat(o[C],10),"string"==typeof c&&/^(\d+\.\d+)%|(\d+)%$/.test(c)&&(v*=.01,"pixels"===g&&(("x1"===C||"x2"===C||"r2"===C)&&(v*=h.viewBoxWidth||h.width),("y1"===C||"y2"===C)&&(v*=h.viewBoxHeight||h.height)))),o[C]=v})}(0,M,g,D),"pixels"===D&&(j=-o.left,G=-o.top),new w.Gradient({id:u.getAttribute("id"),type:C,coords:M,colorStops:x,gradientUnits:D,gradientTransform:re,offsetX:j,offsetY:G})}})}(),function(){"use strict";var y=w.util.toFixed;w.Pattern=w.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,p){if(f||(f={}),this.id=w.Object.__uid++,this.setOptions(f),!f.source||f.source&&"string"!=typeof f.source)p&&p(this);else{var d=this;this.source=w.util.createImage(),w.util.loadImage(f.source,function(l,u){d.source=l,p&&p(d,u)},null,this.crossOrigin)}},toObject:function(f){var d,l,p=w.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?d=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(d=this.source.toDataURL()),l={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:y(this.offsetX,p),offsetY:y(this.offsetY,p),patternTransform:this.patternTransform?this.patternTransform.concat():null},w.util.populateWithProperties(this,l,f),l},toSVG:function(f){var p="function"==typeof this.source?this.source():this.source,d=p.width/f.width,l=p.height/f.height,u=this.offsetX/f.width,o=this.offsetY/f.height,h="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(l=1,o&&(l+=Math.abs(o))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(d=1,u&&(d+=Math.abs(u))),p.src?h=p.src:p.toDataURL&&(h=p.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+o+'" width="'+d+'" height="'+l+'">\n<image x="0" y="0" width="'+p.width+'" height="'+p.height+'" xlink:href="'+h+'"></image>\n</pattern>\n'},setOptions:function(f){for(var p in f)this[p]=f[p]},toLive:function(f){var p=this.source;return!p||typeof p.src<"u"&&(!p.complete||0===p.naturalWidth||0===p.naturalHeight)?"":f.createPattern(p,this.repeat)}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.toFixed;f.Shadow?f.warn("fabric.Shadow is already defined."):(f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){for(var l in"string"==typeof d&&(d=this._parseShadow(d)),d)this[l]=d[l];this.id=f.Object.__uid++},_parseShadow:function(d){var l=d.trim(),u=f.Shadow.reOffsetsAndBlur.exec(l)||[];return{color:(l.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var l=40,u=40,o=f.Object.NUM_FRACTION_DIGITS,h=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-d.angle)),c=new f.Color(this.color);return d.width&&d.height&&(l=100*p((Math.abs(h.x)+this.blur)/d.width,o)+20,u=100*p((Math.abs(h.y)+this.blur)/d.height,o)+20),d.flipX&&(h.x*=-1),d.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+l+'%" width="'+(100+2*l)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+p(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+p(h.x,o)+'" dy="'+p(h.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+c.toRgb()+'" flood-opacity="'+c.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},l=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==l[u]&&(d[u]=this[u])},this),d}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(Ne),function(){"use strict";if(w.StaticCanvas)w.warn("fabric.StaticCanvas is already defined.");else{var y=w.util.object.extend,f=w.util.getElementOffset,p=w.util.removeFromArray,d=w.util.toFixed,l=w.util.transformPoint,u=w.util.invertTransform,o=w.util.getNodeCanvas,h=w.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");w.StaticCanvas=w.util.createClass(w.CommonMethods,{initialize:function(c,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(c,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:w.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(c,v){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(c),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,C),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,C),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,C),v.overlayColor&&this.setOverlayColor(v.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return w.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,w.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var c=w.devicePixelRatio;this.__initRetinaScaling(c,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(c,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(c,v,C){v.setAttribute("width",this.width*c),v.setAttribute("height",this.height*c),C.scale(c,c)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(c,v,C){return this.__setBgOverlayImage("overlayImage",c,v,C)},setBackgroundImage:function(c,v,C){return this.__setBgOverlayImage("backgroundImage",c,v,C)},setOverlayColor:function(c,v){return this.__setBgOverlayColor("overlayColor",c,v)},setBackgroundColor:function(c,v){return this.__setBgOverlayColor("backgroundColor",c,v)},__setBgOverlayImage:function(c,v,C,D){return"string"==typeof v?w.util.loadImage(v,function(S,x){if(S){var M=new w.Image(S,D);this[c]=M,M.canvas=this}C&&C(S,x)},this,D&&D.crossOrigin):(D&&v.setOptions(D),this[c]=v,v&&(v.canvas=this),C&&C(v,!1)),this},__setBgOverlayColor:function(c,v,C){return this[c]=v,this._initGradient(v,c),this._initPattern(v,c,C),this},_createCanvasElement:function(){var c=h();if(!c||(c.style||(c.style={}),typeof c.getContext>"u"))throw g;return c},_initOptions:function(c){var v=this.lowerCanvasEl;this._setOptions(c),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(c){this.lowerCanvasEl=c&&c.getContext?c:w.util.getById(c)||this._createCanvasElement(),w.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(c,v){return this.setDimensions({width:c},v)},setHeight:function(c,v){return this.setDimensions({height:c},v)},setDimensions:function(c,v){var C;for(var D in v=v||{},c)C=c[D],v.cssOnly||(this._setBackstoreDimension(D,c[D]),C+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(D,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(c,v){return this.lowerCanvasEl[c]=v,this.upperCanvasEl&&(this.upperCanvasEl[c]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[c]=v),this[c]=v,this},_setCssDimension:function(c,v){return this.lowerCanvasEl.style[c]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[c]=v),this.wrapperEl&&(this.wrapperEl.style[c]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(c){var S,x,M,v=this._activeObject,C=this.backgroundImage,D=this.overlayImage;for(this.viewportTransform=c,x=0,M=this._objects.length;x<M;x++)(S=this._objects[x]).group||S.setCoords(!0);return v&&v.setCoords(),C&&C.setCoords(!0),D&&D.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(c,v){var C=c,D=this.viewportTransform.slice(0);c=l(c,u(this.viewportTransform)),D[0]=v,D[3]=v;var S=l(c,D);return D[4]+=C.x-S.x,D[5]+=C.y-S.y,this.setViewportTransform(D)},setZoom:function(c){return this.zoomToPoint(new w.Point(0,0),c),this},absolutePan:function(c){var v=this.viewportTransform.slice(0);return v[4]=-c.x,v[5]=-c.y,this.setViewportTransform(v)},relativePan:function(c){return this.absolutePan(new w.Point(-c.x-this.viewportTransform[4],-c.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(c){this.stateful&&c.setupState(),c._set("canvas",this),c.setCoords(),this.fire("object:added",{target:c}),c.fire("added")},_onObjectRemoved:function(c){this.fire("object:removed",{target:c}),c.fire("removed"),delete c.canvas},clearContext:function(c){return c.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=w.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var c={},v=this.width,C=this.height,D=u(this.viewportTransform);return c.tl=l({x:0,y:0},D),c.br=l({x:v,y:C},D),c.tr=new w.Point(c.br.x,c.tl.y),c.bl=new w.Point(c.tl.x,c.br.y),this.vptCoords=c,c},cancelRequestedRender:function(){this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(c,v){var C=this.viewportTransform,D=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(c),w.util.setImageSmoothing(c,this.imageSmoothingEnabled),this.fire("before:render",{ctx:c}),this._renderBackground(c),c.save(),c.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(c,v),c.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),D&&(D.canvas=this,D.shouldCache(),D._transformDone=!0,D.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(c)),this._renderOverlay(c),this.controlsAboveOverlay&&this.interactive&&this.drawControls(c),this.fire("after:render",{ctx:c})},drawClipPathOnCanvas:function(c){var v=this.viewportTransform,C=this.clipPath;c.save(),c.transform(v[0],v[1],v[2],v[3],v[4],v[5]),c.globalCompositeOperation="destination-in",C.transform(c),c.scale(1/C.zoomX,1/C.zoomY),c.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),c.restore()},_renderObjects:function(c,v){var C,D;for(C=0,D=v.length;C<D;++C)v[C]&&v[C].render(c)},_renderBackgroundOrOverlay:function(c,v){var C=this[v+"Color"],D=this[v+"Image"],S=this.viewportTransform,x=this[v+"Vpt"];if(C||D){if(C){c.save(),c.beginPath(),c.moveTo(0,0),c.lineTo(this.width,0),c.lineTo(this.width,this.height),c.lineTo(0,this.height),c.closePath(),c.fillStyle=C.toLive?C.toLive(c,this):C,x&&c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),c.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var M=C.gradientTransform||C.patternTransform;M&&c.transform(M[0],M[1],M[2],M[3],M[4],M[5]),c.fill(),c.restore()}D&&(c.save(),x&&c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),D.render(c),c.restore())}},_renderBackground:function(c){this._renderBackgroundOrOverlay(c,"background")},_renderOverlay:function(c){this._renderBackgroundOrOverlay(c,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new w.Point(this.width/2,this.height/2)},centerObjectH:function(c){return this._centerObject(c,new w.Point(this.getCenterPoint().x,c.getCenterPoint().y))},centerObjectV:function(c){return this._centerObject(c,new w.Point(c.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(c){var v=this.getCenterPoint();return this._centerObject(c,v)},viewportCenterObject:function(c){var v=this.getVpCenter();return this._centerObject(c,v)},viewportCenterObjectH:function(c){var v=this.getVpCenter();return this._centerObject(c,new w.Point(v.x,c.getCenterPoint().y)),this},viewportCenterObjectV:function(c){var v=this.getVpCenter();return this._centerObject(c,new w.Point(c.getCenterPoint().x,v.y))},getVpCenter:function(){var c=this.getCenterPoint(),v=u(this.viewportTransform);return l(c,v)},_centerObject:function(c,v){return c.setPositionByOrigin(v,"center","center"),c.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(c){return this.toDatalessObject(c)},toObject:function(c){return this._toObjectMethod("toObject",c)},toDatalessObject:function(c){return this._toObjectMethod("toDatalessObject",c)},_toObjectMethod:function(c,v){var C=this.clipPath,D={version:w.version,objects:this._toObjects(c,v)};return C&&!C.excludeFromExport&&(D.clipPath=this._toObject(this.clipPath,c,v)),y(D,this.__serializeBgOverlay(c,v)),w.util.populateWithProperties(this,D,v),D},_toObjects:function(c,v){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,c,v)},this)},_toObject:function(c,v,C){var D;this.includeDefaultValues||(D=c.includeDefaultValues,c.includeDefaultValues=!1);var S=c[v](C);return this.includeDefaultValues||(c.includeDefaultValues=D),S},__serializeBgOverlay:function(c,v){var C={},D=this.backgroundImage,S=this.overlayImage,x=this.backgroundColor,M=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(C.background=x.toObject(v)):x&&(C.background=x),M&&M.toObject?M.excludeFromExport||(C.overlay=M.toObject(v)):M&&(C.overlay=M),D&&!D.excludeFromExport&&(C.backgroundImage=this._toObject(D,c,v)),S&&!S.excludeFromExport&&(C.overlayImage=this._toObject(S,c,v)),C},svgViewportTransformation:!0,toSVG:function(c,v){c||(c={}),c.reviver=v;var C=[];return this._setSVGPreamble(C,c),this._setSVGHeader(C,c),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",v),this._setSVGObjects(C,v),this.clipPath&&C.push("</g>\n"),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",v),C.push("</svg>"),C.join("")},_setSVGPreamble:function(c,v){v.suppressPreamble||c.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(c,v){var S,C=v.width||this.width,D=v.height||this.height,x='viewBox="0 0 '+this.width+" "+this.height+'" ',M=w.Object.NUM_FRACTION_DIGITS;v.viewBox?x='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(x='viewBox="'+d(-(S=this.viewportTransform)[4]/S[0],M)+" "+d(-S[5]/S[3],M)+" "+d(this.width/S[0],M)+" "+d(this.height/S[3],M)+'" '),c.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',D,'" ',x,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",w.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),"</defs>\n")},createSVGClipPathMarkup:function(c){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+w.Object.__uid++,'<clipPath id="'+v.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(c.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var c=this;return["background","overlay"].map(function(C){var D=c[C+"Color"];if(D&&D.toLive){var S=c[C+"Vpt"],x=c.viewportTransform;return D.toSVG({width:c.width/(S?x[0]:1),height:c.height/(S?x[3]:1)},{additionalTransform:S?w.util.matrixToSVG(x):""})}}).join("")},createSVGFontFacesMarkup:function(){var C,D,S,x,M,j,G,re,c="",v={},ae=w.fontPaths,he=[];for(this._objects.forEach(function le(ce){he.push(ce),ce._objects&&ce._objects.forEach(le)}),G=0,re=he.length;G<re;G++)if(D=(C=he[G]).fontFamily,-1!==C.type.indexOf("text")&&!v[D]&&ae[D]&&(v[D]=!0,C.styles))for(M in S=C.styles)for(j in x=S[M])!v[D=x[j].fontFamily]&&ae[D]&&(v[D]=!0);for(var ge in v)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",ge,"';\n","\t\t\tsrc: url('",ae[ge],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(c,v){var C,D,S,x=this._objects;for(D=0,S=x.length;D<S;D++)!(C=x[D]).excludeFromExport&&this._setSVGObject(c,C,v)},_setSVGObject:function(c,v,C){c.push(v.toSVG(C))},_setSVGBgOverlayImage:function(c,v,C){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&c.push(this[v].toSVG(C))},_setSVGBgOverlayColor:function(c,v){var C=this[v+"Color"],S=this.width,x=this.height;if(C)if(C.toLive){var M=C.repeat,P=w.util.invertTransform(this.viewportTransform),G=this[v+"Vpt"]?w.util.matrixToSVG(P):"";c.push('<rect transform="'+G+" translate(",S/2,",",x/2,')"',' x="',C.offsetX-S/2,'" y="',C.offsetY-x/2,'" ','width="',"repeat-y"===M||"no-repeat"===M?C.source.width:S,'" height="',"repeat-x"===M||"no-repeat"===M?C.source.height:x,'" fill="url(#SVGID_'+C.id+')"',"></rect>\n")}else c.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',"></rect>\n")},sendToBack:function(c){if(!c)return this;var C,D,S,v=this._activeObject;if(c===v&&"activeSelection"===c.type)for(C=(S=v._objects).length;C--;)p(this._objects,D=S[C]),this._objects.unshift(D);else p(this._objects,c),this._objects.unshift(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(c){if(!c)return this;var C,D,S,v=this._activeObject;if(c===v&&"activeSelection"===c.type)for(S=v._objects,C=0;C<S.length;C++)p(this._objects,D=S[C]),this._objects.push(D);else p(this._objects,c),this._objects.push(c);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(c,v){if(!c)return this;var D,S,x,M,P,C=this._activeObject,j=0;if(c===C&&"activeSelection"===c.type)for(P=C._objects,D=0;D<P.length;D++)(x=this._objects.indexOf(S=P[D]))>0+j&&(M=x-1,p(this._objects,S),this._objects.splice(M,0,S)),j++;else 0!==(x=this._objects.indexOf(c))&&(M=this._findNewLowerIndex(c,x,v),p(this._objects,c),this._objects.splice(M,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(c,v,C){var D,S;if(C){for(D=v,S=v-1;S>=0;--S)if(c.intersectsWithObject(this._objects[S])||c.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(c)){D=S;break}}else D=v-1;return D},bringForward:function(c,v){if(!c)return this;var D,S,x,M,P,C=this._activeObject,j=0;if(c===C&&"activeSelection"===c.type)for(D=(P=C._objects).length;D--;)(x=this._objects.indexOf(S=P[D]))<this._objects.length-1-j&&(M=x+1,p(this._objects,S),this._objects.splice(M,0,S)),j++;else(x=this._objects.indexOf(c))!==this._objects.length-1&&(M=this._findNewUpperIndex(c,x,v),p(this._objects,c),this._objects.splice(M,0,c));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(c,v,C){var D,S,x;if(C){for(D=v,S=v+1,x=this._objects.length;S<x;++S)if(c.intersectsWithObject(this._objects[S])||c.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(c)){D=S;break}}else D=v+1;return D},moveTo:function(c,v){return p(this._objects,c),this._objects.splice(v,0,c),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(c){c.dispose&&c.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),w.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),w.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),y(w.StaticCanvas.prototype,w.Observable),y(w.StaticCanvas.prototype,w.Collection),y(w.StaticCanvas.prototype,w.DataURLExporter),y(w.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(c){var v=h();if(!v||!v.getContext)return null;var C=v.getContext("2d");return C&&"setLineDash"===c?typeof C.setLineDash<"u":null}}),w.StaticCanvas.prototype.toJSON=w.StaticCanvas.prototype.toObject,w.isLikelyNode&&(w.StaticCanvas.prototype.createPNGStream=function(){var c=o(this.lowerCanvasEl);return c&&c.createPNGStream()},w.StaticCanvas.prototype.createJPEGStream=function(c){var v=o(this.lowerCanvasEl);return v&&v.createJPEGStream(c)})}}(),w.BaseBrush=w.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(y){y.strokeStyle=this.color,y.lineWidth=this.width,y.lineCap=this.strokeLineCap,y.miterLimit=this.strokeMiterLimit,y.lineJoin=this.strokeLineJoin,y.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(y){var f=this.canvas.viewportTransform;y.save(),y.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(this.shadow){var y=this.canvas,f=this.shadow,p=y.contextTop,d=y.getZoom();y&&y._isRetinaScaling()&&(d*=w.devicePixelRatio),p.shadowColor=f.color,p.shadowBlur=f.blur*d,p.shadowOffsetX=f.offsetX*d,p.shadowOffsetY=f.offsetY*d}},needsFullRender:function(){return new w.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var y=this.canvas.contextTop;y.shadowColor="",y.shadowBlur=y.shadowOffsetX=y.shadowOffsetY=0},_isOutSideCanvas:function(y){return y.x<0||y.x>this.canvas.getWidth()||y.y<0||y.y>this.canvas.getHeight()}}),w.PencilBrush=w.util.createClass(w.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(y){this.canvas=y,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(y,f,p){var d=f.midPointFrom(p);return y.quadraticCurveTo(f.x,f.y,d.x,d.y),d},onMouseDown:function(y,f){this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(y),this._captureDrawingPath(y),this._render())},onMouseMove:function(y,f){if(this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(y))&&this._captureDrawingPath(y)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var p=this._points,d=p.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,p[d-2],p[d-1],!0),l.stroke(),l.restore()}},onMouseUp:function(y){return!this.canvas._isMainEvent(y.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(y){var f=new w.Point(y.x,y.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(y){return!(this._points.length>1&&y.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(y),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(y){var f=new w.Point(y.x,y.y);return this._addPoint(f)},_render:function(y){var f,p,d=this._points[0],l=this._points[1];if(this._saveAndTransform(y=y||this.canvas.contextTop),y.beginPath(),2===this._points.length&&d.x===l.x&&d.y===l.y){var u=this.width/1e3;d=new w.Point(d.x,d.y),l=new w.Point(l.x,l.y),d.x-=u,l.x+=u}for(y.moveTo(d.x,d.y),f=1,p=this._points.length;f<p;f++)this._drawSegment(y,d,l),d=this._points[f],l=this._points[f+1];y.lineTo(d.x,d.y),y.stroke(),y.restore()},convertPointsToSVGPath:function(y){return w.util.getSmoothPathFromPoints(y,this.width/1e3)},_isEmptySVGPath:function(y){return"M 0 0 Q 0 0 0 0 L 0 0"===w.util.joinPath(y)},createPath:function(y){var f=new w.Path(y,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new w.Shadow(this.shadow)),f},decimatePoints:function(y,f){if(y.length<=2)return y;var l,p=this.canvas.getZoom(),d=Math.pow(f/p,2),u=y.length-1,o=y[0],h=[o];for(l=1;l<u-1;l++)Math.pow(o.x-y[l].x,2)+Math.pow(o.y-y[l].y,2)>=d&&h.push(o=y[l]);return h.push(y[u]),h},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f))this.canvas.requestRenderAll();else{var p=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.requestRenderAll(),p.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:p})}}}),w.CircleBrush=w.util.createClass(w.BaseBrush,{width:10,initialize:function(y){this.canvas=y,this.points=[]},drawDot:function(y){var f=this.addPoint(y),p=this.canvas.contextTop;this._saveAndTransform(p),this.dot(p,f),p.restore()},dot:function(y,f){y.fillStyle=f.fill,y.beginPath(),y.arc(f.x,f.y,f.radius,0,2*Math.PI,!1),y.closePath(),y.fill()},onMouseDown:function(y){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(y)},_render:function(){var f,p,y=this.canvas.contextTop,d=this.points;for(this._saveAndTransform(y),f=0,p=d.length;f<p;f++)this.dot(y,d[f]);y.restore()},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(y),this._render()):this.drawDot(y))},onMouseUp:function(){var f,p,y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var d=[];for(f=0,p=this.points.length;f<p;f++){var l=this.points[f],u=new w.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(u.shadow=new w.Shadow(this.shadow)),d.push(u)}var o=new w.Group(d);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},addPoint:function(y){var f=new w.Point(y.x,y.y),p=w.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new w.Color(this.color).setAlpha(w.util.getRandomInt(0,100)/100).toRgba();return f.radius=p,f.fill=d,this.points.push(f),f}}),w.SprayBrush=w.util.createClass(w.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(y){this.canvas=y,this.sprayChunks=[]},onMouseDown:function(y){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(y),this.render(this.sprayChunkPoints)},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.addSprayChunk(y),this.render(this.sprayChunkPoints))},onMouseUp:function(){var y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],p=0,d=this.sprayChunks.length;p<d;p++)for(var l=this.sprayChunks[p],u=0,o=l.length;u<o;u++){var h=new w.Rect({width:l[u].width,height:l[u].width,left:l[u].x+1,top:l[u].y+1,originX:"center",originY:"center",fill:this.color});f.push(h)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var g=new w.Group(f);this.shadow&&g.set("shadow",new w.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},_getOptimizedRects:function(y){var p,d,l,f={};for(d=0,l=y.length;d<l;d++)f[p=y[d].left+""+y[d].top]||(f[p]=y[d]);var u=[];for(p in f)u.push(f[p]);return u},render:function(y){var p,d,f=this.canvas.contextTop;for(f.fillStyle=this.color,this._saveAndTransform(f),p=0,d=y.length;p<d;p++){var l=y[p];typeof l.opacity<"u"&&(f.globalAlpha=l.opacity),f.fillRect(l.x,l.y,l.width,l.width)}f.restore()},_render:function(){var f,p,y=this.canvas.contextTop;for(y.fillStyle=this.color,this._saveAndTransform(y),f=0,p=this.sprayChunks.length;f<p;f++)this.render(this.sprayChunks[f]);y.restore()},addSprayChunk:function(y){this.sprayChunkPoints=[];var f,p,d,u,l=this.width/2;for(u=0;u<this.density;u++){f=w.util.getRandomInt(y.x-l,y.x+l),p=w.util.getRandomInt(y.y-l,y.y+l),d=this.dotWidthVariance?w.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new w.Point(f,p);o.width=d,this.randomOpacity&&(o.opacity=w.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),w.PatternBrush=w.util.createClass(w.PencilBrush,{getPatternSrc:function(){var p=w.util.createCanvasElement(),d=p.getContext("2d");return p.width=p.height=25,d.fillStyle=this.color,d.beginPath(),d.arc(10,10,10,0,2*Math.PI,!1),d.closePath(),d.fill(),p},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(y){return y.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(y){this.callSuper("_setBrushStyles",y),y.strokeStyle=this.getPattern(y)},createPath:function(y){var f=this.callSuper("createPath",y),p=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new w.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-p.x,offsetY:-p.y}),f}}),function(){var y=w.util.getPointer,f=w.util.degreesToRadians,p=w.util.isTouchEvent;for(var d in w.Canvas=w.util.createClass(w.StaticCanvas,{initialize:function(l,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=w.PencilBrush&&new w.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var u,o,h,l=this.getActiveObjects();if(l.length>0&&!this.preserveObjectStacking){o=[],h=[];for(var g=0,c=this._objects.length;g<c;g++)-1===l.indexOf(u=this._objects[g])?o.push(u):h.push(u);l.length>1&&(this._activeObject._objects=h),o.push.apply(o,h)}else o=this._objects;return o},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,u){var o=l.calcTransformMatrix(),h=w.util.invertTransform(o),g=this.restorePointerVpt(u);return w.util.transformPoint(g,h)},isTargetTransparent:function(l,u,o){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var h=this._normalizePointer(l,{x:u,y:o}),g=Math.max(l.cacheTranslationX+h.x*l.zoomX,0),c=Math.max(l.cacheTranslationY+h.y*l.zoomY,0);return w.util.isTransparent(l._cacheContext,Math.round(g),Math.round(c),this.targetFindTolerance)}var v=this.contextCache,C=l.selectionBackgroundColor,D=this.viewportTransform;return l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(D[0],D[1],D[2],D[3],D[4],D[5]),l.render(v),v.restore(),l.selectionBackgroundColor=C,w.util.isTransparent(v,u,o,this.targetFindTolerance)},_isSelectionKeyPressed:function(l){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(o){return!0===l[o]}):l[this.selectionKey]},_shouldClearSelection:function(l,u){var o=this.getActiveObjects(),h=this._activeObject;return!u||u&&h&&o.length>1&&-1===o.indexOf(u)&&h!==u&&!this._isSelectionKeyPressed(l)||u&&!u.evented||u&&!u.selectable&&h&&h!==u},_shouldCenterTransform:function(l,u,o){var h;if(l)return"scale"===u||"scaleX"===u||"scaleY"===u||"resizing"===u?h=this.centeredScaling||l.centeredScaling:"rotate"===u&&(h=this.centeredRotation||l.centeredRotation),h?!o:o},_getOriginFromCorner:function(l,u){var o={x:l.originX,y:l.originY};return"ml"===u||"tl"===u||"bl"===u?o.x="right":("mr"===u||"tr"===u||"br"===u)&&(o.x="left"),"tl"===u||"mt"===u||"tr"===u?o.y="bottom":("bl"===u||"mb"===u||"br"===u)&&(o.y="top"),o},_getActionFromCorner:function(l,u,o,h){if(!u||!l)return"drag";var g=h.controls[u];return g.getActionName(o,g,h)},_setupCurrentTransform:function(l,u,o){if(u){var h=this.getPointer(l),g=u.__corner,c=u.controls[g],v=o&&g?c.getActionHandler(l,u,c):w.controlsUtils.dragHandler,C=this._getActionFromCorner(o,g,l,u),D=this._getOriginFromCorner(u,g),S=l[this.centeredKey],x={target:u,action:C,actionHandler:v,corner:g,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:h.x-u.left,offsetY:h.y-u.top,originX:D.x,originY:D.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:f(u.angle),width:u.width*u.scaleX,shiftKey:l.shiftKey,altKey:S,original:w.util.saveObjectTransform(u)};this._shouldCenterTransform(u,C,S)&&(x.originX="center",x.originY="center"),x.original.originX=D.x,x.original.originY=D.y,this._currentTransform=x,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var u=this._groupSelector,o=new w.Point(u.ex,u.ey),h=w.util.transformPoint(o,this.viewportTransform),g=new w.Point(u.ex+u.left,u.ey+u.top),c=w.util.transformPoint(g,this.viewportTransform),v=Math.min(h.x,c.x),C=Math.min(h.y,c.y),D=Math.max(h.x,c.x),S=Math.max(h.y,c.y),x=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,C,D-v,S-C)),this.selectionLineWidth&&this.selectionBorderColor&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=x,C+=x,D-=x,S-=x,w.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,C,D-v,S-C))},findTarget:function(l,u){if(!this.skipTargetFind){var v,C,h=this.getPointer(l,!0),g=this._activeObject,c=this.getActiveObjects(),D=p(l),S=c.length>1&&!u||1===c.length;if(this.targets=[],S&&g._findTargetCorner(h,D)||c.length>1&&!u&&g===this._searchPossibleTargets([g],h))return g;if(1===c.length&&g===this._searchPossibleTargets([g],h)){if(!this.preserveObjectStacking)return g;v=g,C=this.targets,this.targets=[]}var x=this._searchPossibleTargets(this._objects,h);return l[this.altSelectionKey]&&x&&v&&x!==v&&(x=v,this.targets=C),x}},_checkTarget:function(l,u,o){if(u&&u.visible&&u.evented&&u.containsPoint(l)){if(!this.perPixelTargetFind&&!u.perPixelTargetFind||u.isEditing)return!0;if(!this.isTargetTransparent(u,o.x,o.y))return!0}},_searchPossibleTargets:function(l,u){for(var o,g,h=l.length;h--;){var c=l[h],v=c.group?this._normalizePointer(c.group,u):u;if(this._checkTarget(v,c,u)){(o=l[h]).subTargetCheck&&o instanceof w.Group&&(g=this._searchPossibleTargets(o._objects,u))&&this.targets.push(g);break}}return o},restorePointerVpt:function(l){return w.util.transformPoint(l,w.util.invertTransform(this.viewportTransform))},getPointer:function(l,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var C,o=y(l),h=this.upperCanvasEl,g=h.getBoundingClientRect(),c=g.width||0,v=g.height||0;(!c||!v)&&("top"in g&&"bottom"in g&&(v=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(c=Math.abs(g.right-g.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,u||(o=this.restorePointerVpt(o));var D=this.getRetinaScaling();return 1!==D&&(o.x/=D,o.y/=D),{x:o.x*(C=0===c||0===v?{width:1,height:1}:{width:h.width/c,height:h.height/v}).width,y:o.y*C.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,o=this.upperCanvasEl;o?o.className="":(o=this._createCanvasElement(),this.upperCanvasEl=o),w.util.addClass(o,"upper-canvas "+l),this.wrapperEl.appendChild(o),this._copyCanvasStyle(u,o),this._applyCanvasStyle(o),this.contextTop=o.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=w.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),w.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),w.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var u=this.width||l.width,o=this.height||l.height;w.util.setStyle(l,{position:"absolute",width:u+"px",height:o+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=u,l.height=o,w.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,u){u.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?"activeSelection"===l.type&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,u){var o=!1,h=this.getActiveObjects(),g=[],c=[];l.forEach(function(v){-1===h.indexOf(v)&&(o=!0,v.fire("deselected",{e:u,target:v}),c.push(v))}),h.forEach(function(v){-1===l.indexOf(v)&&(o=!0,v.fire("selected",{e:u,target:v}),g.push(v))}),l.length>0&&h.length>0?o&&this.fire("selection:updated",{e:u,selected:g,deselected:c}):h.length>0?this.fire("selection:created",{e:u,selected:g}):l.length>0&&this.fire("selection:cleared",{e:u,deselected:c})},setActiveObject:function(l,u){var o=this.getActiveObjects();return this._setActiveObject(l,u),this._fireSelectionEvents(o,u),this},_setActiveObject:function(l,u){return!(this._activeObject===l||!this._discardActiveObject(u,l)||l.onSelect({e:u})||(this._activeObject=l,0))},_discardActiveObject:function(l,u){var o=this._activeObject;if(o){if(o.onDeselect({e:l,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var u=this.getActiveObjects(),o=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:o,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(u,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){w.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,w.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var u=this._activeObject;u&&u._renderControls(l)},_toObject:function(l,u,o){var h=this._realizeGroupTransformOnObject(l),g=this.callSuper("_toObject",l,u,o);return this._unwindGroupTransformOnObject(l,h),g},_realizeGroupTransformOnObject:function(l){if(l.group&&"activeSelection"===l.group.type&&this._activeObject===l.group){var o={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(h){o[h]=l[h]}),w.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),o}return null},_unwindGroupTransformOnObject:function(l,u){u&&l.set(u)},_setSVGObject:function(l,u,o){var h=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",l,u,o),this._unwindGroupTransformOnObject(u,h)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),w.StaticCanvas.prototype.setViewportTransform.call(this,l)}}),w.StaticCanvas)"prototype"!==d&&(w.Canvas[d]=w.StaticCanvas[d])}(),function(){var y=w.util.addListener,f=w.util.removeListener,u={passive:!1};function o(h,g){return h.button&&h.button===g-1}w.util.object.extend(w.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(y,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,g){var c=this.upperCanvasEl,v=this._getEventPrefix();h(w.window,"resize",this._onResize),h(c,v+"down",this._onMouseDown),h(c,v+"move",this._onMouseMove,u),h(c,v+"out",this._onMouseOut),h(c,v+"enter",this._onMouseEnter),h(c,"wheel",this._onMouseWheel),h(c,"contextmenu",this._onContextMenu),h(c,"dblclick",this._onDoubleClick),h(c,"dragover",this._onDragOver),h(c,"dragenter",this._onDragEnter),h(c,"dragleave",this._onDragLeave),h(c,"drop",this._onDrop),this.enablePointerEvents||h(c,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](c,"gesture",this._onGesture),eventjs[g](c,"drag",this._onDrag),eventjs[g](c,"orientation",this._onOrientationChange),eventjs[g](c,"shake",this._onShake),eventjs[g](c,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var h=this._getEventPrefix();f(w.document,h+"up",this._onMouseUp),f(w.document,"touchend",this._onTouchEnd,u),f(w.document,h+"move",this._onMouseMove,u),f(w.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(h,g){this.__onTransformGesture&&this.__onTransformGesture(h,g)},_onDrag:function(h,g){this.__onDrag&&this.__onDrag(h,g)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:h}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:h});var c=this;this._hoveredTargets.forEach(function(v){c.fire("mouse:out",{target:g,e:h}),v&&g.fire("mouseout",{e:h})}),this._hoveredTargets=[]},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,g){this.__onOrientationChange&&this.__onOrientationChange(h,g)},_onShake:function(h,g){this.__onShake&&this.__onShake(h,g)},_onLongPress:function(h,g){this.__onLongPress&&this.__onLongPress(h,g)},_onDragOver:function(h){h.preventDefault();var g=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(g,h)},_onDrop:function(h){return this._simpleEventHandler("drop:before",h),this._simpleEventHandler("drop",h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var g=h.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return!0===h.isPrimary||!1!==h.isPrimary&&("touchend"===h.type&&0===h.touches.length||!h.changedTouches||h.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(h){h.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();y(w.document,"touchend",this._onTouchEnd,u),y(w.document,"touchmove",this._onMouseMove,u),f(g,c+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();f(g,c+"move",this._onMouseMove,u),y(w.document,c+"up",this._onMouseUp),y(w.document,c+"move",this._onMouseMove,u)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();f(w.document,"touchend",this._onTouchEnd,u),f(w.document,"touchmove",this._onMouseMove,u);var c=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){y(c.upperCanvasEl,g+"down",c._onMouseDown),c._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var g=this.upperCanvasEl,c=this._getEventPrefix();this._isMainEvent(h)&&(f(w.document,c+"up",this._onMouseUp),f(w.document,c+"move",this._onMouseMove,u),y(g,c+"move",this._onMouseMove,u))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var g=this._activeObject;return!!(!!g!=!!h||g&&h&&g!==h)},__onMouseUp:function(h){var g,c=this._currentTransform,v=this._groupSelector,C=!1,D=!v||0===v.left&&0===v.top;if(this._cacheTransformEventData(h),g=this._target,this._handleEvent(h,"up:before"),o(h,3))this.fireRightClick&&this._handleEvent(h,"up",3,D);else{if(o(h,2))return this.fireMiddleClick&&this._handleEvent(h,"up",2,D),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(h);else if(this._isMainEvent(h)){if(c&&(this._finalizeCurrentTransform(h),C=c.actionPerformed),!D){var S=g===this._activeObject;this._maybeGroupObjects(h),C||(C=this._shouldRender(g)||!S&&g===this._activeObject)}var x,M;if(g){if(x=g._findTargetCorner(this.getPointer(h,!0),w.util.isTouchEvent(h)),g.selectable&&g!==this._activeObject&&"up"===g.activeOn)this.setActiveObject(g,h),C=!0;else{var P=g.controls[x],j=P&&P.getMouseUpHandler(h,g,P);j&&j(h,c,(M=this.getPointer(h)).x,M.y)}g.isMoving=!1}if(c&&(c.target!==g||c.corner!==x)){var G=c.target&&c.target.controls[c.corner],re=G&&G.getMouseUpHandler(h,g,P);M=M||this.getPointer(h),re&&re(h,c,M.x,M.y)}this._setCursorFromEvent(h,g),this._handleEvent(h,"up",1,D),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),C?this.requestRenderAll():D||this.renderTop()}}},_simpleEventHandler:function(h,g){var c=this.findTarget(g),v=this.targets,C={e:g,target:c,subTargets:v};if(this.fire(h,C),c&&c.fire(h,C),!v)return c;for(var D=0;D<v.length;D++)v[D].fire(h,C);return c},_handleEvent:function(h,g,c,v){var C=this._target,D=this.targets||[],S={e:h,target:C,subTargets:D,button:c||1,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===g&&(S.currentTarget=this.findTarget(h),S.currentSubTargets=this.targets),this.fire("mouse:"+g,S),C&&C.fire("mouse"+g,S);for(var x=0;x<D.length;x++)D[x].fire("mouse"+g,S)},_finalizeCurrentTransform:function(h){var g=this._currentTransform,c=g.target,v={e:h,target:c,transform:g,action:g.action};c._scaling&&(c._scaling=!1),c.setCoords(),(g.actionPerformed||this.stateful&&c.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var g=this.getPointer(h);this.freeDrawingBrush.onMouseDown(g,{e:h,pointer:g}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var g=this.getPointer(h);this.freeDrawingBrush.onMouseMove(g,{e:h,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var g=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:g}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var g=this._target;if(o(h,3))this.fireRightClick&&this._handleEvent(h,"down",3);else if(o(h,2))this.fireMiddleClick&&this._handleEvent(h,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(h);else if(this._isMainEvent(h)&&!this._currentTransform){this._previousPointer=c=this._pointer;var v=this._shouldRender(g),C=this._shouldGroup(h,g);if(this._shouldClearSelection(h,g)?this.discardActiveObject(h):C&&(this._handleGrouping(h,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var D=g===this._activeObject;g.selectable&&"down"===g.activeOn&&this.setActiveObject(g,h);var S=g._findTargetCorner(this.getPointer(h,!0),w.util.isTouchEvent(h));if(g.__corner=S,g===this._activeObject&&(S||!C)){this._setupCurrentTransform(h,g,D);var x=g.controls[S],c=this.getPointer(h),M=x&&x.getMouseDownHandler(h,g,x);M&&M(h,this._currentTransform,c.x,c.y)}}this._handleEvent(h,"down"),(v||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:h,transform:g})},__onMouseMove:function(h){var g,c;if(this._handleEvent(h,"move:before"),this._cacheTransformEventData(h),this.isDrawingMode)this._onMouseMoveInDrawingMode(h);else if(this._isMainEvent(h)){var v=this._groupSelector;v?(v.left=(c=this._absolutePointer).x-v.ex,v.top=c.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(g=this.findTarget(h)||null,this._setCursorFromEvent(h,g),this._fireOverOutEvents(g,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,g){var c=this._hoveredTarget,v=this._hoveredTargets,C=this.targets,D=Math.max(v.length,C.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:c,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var S=0;S<D;S++)this.fireSyntheticInOutEvents(C[S],g,{oldTarget:v[S],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,g){var c=this._draggedoverTarget,v=this._hoveredTargets,C=this.targets,D=Math.max(v.length,C.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:c,evtOut:"dragleave",evtIn:"dragenter"});for(var S=0;S<D;S++)this.fireSyntheticInOutEvents(C[S],g,{oldTarget:v[S],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,g,c){var v,C,x,D=c.oldTarget,M=D!==h,P=c.canvasEvtIn,j=c.canvasEvtOut;M&&(v={e:g,target:h,previousTarget:D},C={e:g,target:D,nextTarget:h}),x=h&&M,D&&M&&(j&&this.fire(j,C),D.fire(c.evtOut,C)),x&&(P&&this.fire(P,v),h.fire(c.evtIn,v))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var g=this.getPointer(h),c=this._currentTransform;c.reset=!1,c.shiftKey=h.shiftKey,c.altKey=h[this.centeredKey],this._performTransformAction(h,c,g),c.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,g,c){var D=g.action,S=!1,x=g.actionHandler;x&&(S=x(h,g,c.x,c.y)),"drag"===D&&S&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||S},_fire:w.controlsUtils.fireEvent,_setCursorFromEvent:function(h,g){if(!g)return this.setCursor(this.defaultCursor),!1;var c=g.hoverCursor||this.hoverCursor,v=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,C=(!v||!v.contains(g))&&g._findTargetCorner(this.getPointer(h,!0));C?this.setCursor(this.getCornerCursor(C,g,h)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(D){c=D.hoverCursor||c}),this.setCursor(c))},getCornerCursor:function(h,g,c){var v=g.controls[h];return v.cursorStyleHandler(c,v,g)}})}(),function(){var y=Math.min,f=Math.max;w.util.object.extend(w.Canvas.prototype,{_shouldGroup:function(p,d){var l=this._activeObject;return l&&this._isSelectionKeyPressed(p)&&d&&d.selectable&&this.selection&&(l!==d||"activeSelection"===l.type)&&!d.onSelect({e:p})},_handleGrouping:function(p,d){var l=this._activeObject;l.__corner||d===l&&(!(d=this.findTarget(p,!0))||!d.selectable)||(l&&"activeSelection"===l.type?this._updateActiveSelection(d,p):this._createActiveSelection(d,p))},_updateActiveSelection:function(p,d){var l=this._activeObject,u=l._objects.slice(0);l.contains(p)?(l.removeWithUpdate(p),this._hoveredTarget=p,this._hoveredTargets=this.targets.concat(),1===l.size()&&this._setActiveObject(l.item(0),d)):(l.addWithUpdate(p),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,d)},_createActiveSelection:function(p,d){var l=this.getActiveObjects(),u=this._createGroup(p);this._hoveredTarget=u,this._setActiveObject(u,d),this._fireSelectionEvents(l,d)},_createGroup:function(p){var d=this._objects,u=d.indexOf(this._activeObject)<d.indexOf(p)?[this._activeObject,p]:[p,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new w.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(p){var l,d=this._collectObjects(p);1===d.length?this.setActiveObject(d[0],p):d.length>1&&(l=new w.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(l,p))},_collectObjects:function(p){for(var l,d=[],u=this._groupSelector.ex,o=this._groupSelector.ey,h=u+this._groupSelector.left,g=o+this._groupSelector.top,c=new w.Point(y(u,h),y(o,g)),v=new w.Point(f(u,h),f(o,g)),C=!this.selectionFullyContained,D=u===h&&o===g,S=this._objects.length;S--&&!((l=this._objects[S])&&l.selectable&&l.visible&&(C&&l.intersectsWithRect(c,v,!0)||l.isContainedWithinRect(c,v,!0)||C&&l.containsPoint(c,null,!0)||C&&l.containsPoint(v,null,!0))&&(d.push(l),D)););return d.length>1&&(d=d.filter(function(x){return!x.onSelect({e:p})})),d},_maybeGroupObjects:function(p){this.selection&&this._groupSelector&&this._groupSelectedObjects(p),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),w.util.object.extend(w.StaticCanvas.prototype,{toDataURL:function(y){y||(y={});var f=y.format||"png",p=y.quality||1,d=(y.multiplier||1)*(y.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(d,y);return w.util.toDataURL(l,f,p)},toCanvasElement:function(y,f){var p=((f=f||{}).width||this.width)*(y=y||1),d=(f.height||this.height)*y,l=this.getZoom(),u=this.width,o=this.height,h=l*y,g=this.viewportTransform,C=this.interactive,D=[h,0,0,h,(g[4]-(f.left||0))*y,(g[5]-(f.top||0))*y],S=this.enableRetinaScaling,x=w.util.createCanvasElement(),M=this.contextTop;return x.width=p,x.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=D,this.width=p,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=g,this.width=u,this.height=o,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=S,this.contextTop=M,x}}),w.util.object.extend(w.StaticCanvas.prototype,{loadFromJSON:function(y,f,p){if(y){var d="string"==typeof y?JSON.parse(y):w.util.object.clone(y),l=this,u=d.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(h){l.clear(),l._setBgOverlay(d,function(){u?l._enlivenObjects([u],function(g){l.clipPath=g[0],l.__setupCanvas.call(l,d,h,o,f)}):l.__setupCanvas.call(l,d,h,o,f)})},p),this}},__setupCanvas:function(y,f,p,d){var l=this;f.forEach(function(u,o){l.insertAt(u,o)}),this.renderOnAddRemove=p,delete y.objects,delete y.backgroundImage,delete y.overlayImage,delete y.background,delete y.overlay,this._setOptions(y),this.renderAll(),d&&d()},_setBgOverlay:function(y,f){var p={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(y.backgroundImage||y.overlayImage||y.background||y.overlay){var d=function(){p.backgroundImage&&p.overlayImage&&p.backgroundColor&&p.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",y.backgroundImage,p,d),this.__setBgOverlay("overlayImage",y.overlayImage,p,d),this.__setBgOverlay("backgroundColor",y.background,p,d),this.__setBgOverlay("overlayColor",y.overlay,p,d)}else f&&f()},__setBgOverlay:function(y,f,p,d){var l=this;if(!f)return p[y]=!0,void(d&&d());"backgroundImage"===y||"overlayImage"===y?w.util.enlivenObjects([f],function(u){l[y]=u[0],p[y]=!0,d&&d()}):this["set"+w.util.string.capitalize(y,!0)](f,function(){p[y]=!0,d&&d()})},_enlivenObjects:function(y,f,p){y&&0!==y.length?w.util.enlivenObjects(y,function(d){f&&f(d)},null,p):f&&f([])},_toDataURL:function(y,f){this.clone(function(p){f(p.toDataURL(y))})},_toDataURLWithMultiplier:function(y,f,p){this.clone(function(d){p(d.toDataURLWithMultiplier(y,f))})},clone:function(y,f){var p=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(d){d.loadFromJSON(p,function(){y&&y(d)})})},cloneWithoutData:function(y){var f=w.util.createCanvasElement();f.width=this.width,f.height=this.height;var p=new w.Canvas(f);this.backgroundImage?(p.setBackgroundImage(this.backgroundImage.src,function(){p.renderAll(),y&&y(p)}),p.backgroundImageOpacity=this.backgroundImageOpacity,p.backgroundImageStretch=this.backgroundImageStretch):y&&y(p)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.util.object.clone,l=f.util.toFixed,u=f.util.string.capitalize,o=f.util.degreesToRadians;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!f.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(c){c&&this.setOptions(c)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(c){var v=f.perfLimitSizeTotal,C=c.width,D=c.height,S=f.maxCacheSideLimit,x=f.minCacheSideLimit;if(C<=S&&D<=S&&C*D<=v)return C<x&&(c.width=x),D<x&&(c.height=x),c;var P=f.util.limitDimsByArea(C/D,v),j=f.util.capValue,G=j(x,P.x,S),re=j(x,P.y,S);return C>G&&(c.zoomX/=C/G,c.width=G,c.capped=!0),D>re&&(c.zoomY/=D/re,c.height=re,c.capped=!0),c},_getCacheCanvasDimensions:function(){var c=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),C=v.x*c.scaleX/this.scaleX,D=v.y*c.scaleY/this.scaleY;return{width:C+2,height:D+2,zoomX:c.scaleX,zoomY:c.scaleY,x:C,y:D}},_updateCacheCanvas:function(){var c=this.canvas;if(this.noScaleCache&&c&&c._currentTransform){var C=c._currentTransform.action;if(this===c._currentTransform.target&&C.slice&&"scale"===C.slice(0,5))return!1}var j,G,D=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),x=f.minCacheSideLimit,M=S.width,P=S.height,re=S.zoomX,ae=S.zoomY,he=M!==this.cacheWidth||P!==this.cacheHeight,le=he||this.zoomX!==re||this.zoomY!==ae,ce=0,De=0,de=!1;if(he){var Se=this._cacheCanvas.width,O=this._cacheCanvas.height,F=M>Se||P>O;de=F||(M<.9*Se||P<.9*O)&&Se>x&&O>x,F&&!S.capped&&(M>x||P>x)&&(ce=.1*M,De=.1*P)}return this instanceof f.Text&&this.path&&(le=!0,de=!0,ce+=this.getHeightOfLine(0)*this.zoomX,De+=this.getHeightOfLine(0)*this.zoomY),!!le&&(de?(D.width=Math.ceil(M+ce),D.height=Math.ceil(P+De)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,D.width,D.height)),j=S.x/2,G=S.y/2,this.cacheTranslationX=Math.round(D.width/2-j)+j,this.cacheTranslationY=Math.round(D.height/2-G)+G,this.cacheWidth=M,this.cacheHeight=P,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(re,ae),this.zoomX=re,this.zoomY=ae,!0)},setOptions:function(c){this._setOptions(c),this._initGradient(c.fill,"fill"),this._initGradient(c.stroke,"stroke"),this._initPattern(c.fill,"fill"),this._initPattern(c.stroke,"stroke")},transform:function(c){var C=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&c===this.canvas.contextTop));c.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(c){var v=f.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(c),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,C,c),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(c){return this.toObject(c)},_removeDefaultValues:function(c){var v=f.util.getKlass(c.type).prototype;return v.stateProperties.forEach(function(D){"left"===D||"top"===D||(c[D]===v[D]&&delete c[D],Array.isArray(c[D])&&Array.isArray(v[D])&&0===c[D].length&&0===v[D].length&&delete c[D])}),c},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var c=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(c.scaleX),scaleY:Math.abs(c.scaleY)}},getTotalObjectScaling:function(){var c=this.getObjectScaling(),v=c.scaleX,C=c.scaleY;if(this.canvas){var D=this.canvas.getZoom(),S=this.canvas.getRetinaScaling();v*=D*S,C*=D*S}return{scaleX:v,scaleY:C}},getObjectOpacity:function(){var c=this.opacity;return this.group&&(c*=this.group.getObjectOpacity()),c},_set:function(c,v){var D=this[c]!==v,S=!1;return("scaleX"===c||"scaleY"===c)&&(v=this._constrainScale(v)),"scaleX"===c&&v<0?(this.flipX=!this.flipX,v*=-1):"scaleY"===c&&v<0?(this.flipY=!this.flipY,v*=-1):"shadow"!==c||!v||v instanceof f.Shadow?"dirty"===c&&this.group&&this.group.set("dirty",v):v=new f.Shadow(v),this[c]=v,D&&(S=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(c)>-1?(this.dirty=!0,S&&this.group.set("dirty",!0)):S&&this.stateProperties.indexOf(c)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(c){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(c.save(),this._setupCompositeOperation(c),this.drawSelectionBackground(c),this.transform(c),this._setOpacity(c),this._setShadow(c,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(c)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(c),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),c.restore())},renderCache:function(c){c=c||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,c.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(c,v){if(c.save(),c.globalCompositeOperation=v.inverted?"destination-out":"destination-in",v.absolutePositioned){var C=f.util.invertTransform(this.calcTransformMatrix());c.transform(C[0],C[1],C[2],C[3],C[4],C[5])}v.transform(c),c.scale(1/v.zoomX,1/v.zoomY),c.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),c.restore()},drawObject:function(c,v){var C=this.fill,D=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(c)):this._renderBackground(c),this._render(c),this._drawClipPath(c,this.clipPath),this.fill=C,this.stroke=D},_drawClipPath:function(c,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(c,v))},drawCacheOnCanvas:function(c){c.scale(1/this.zoomX,1/this.zoomY),c.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(c){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!c&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!c){var v=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-C/2,v,C)}return!0}return!1},_renderBackground:function(c){if(this.backgroundColor){var v=this._getNonTransformedDimensions();c.fillStyle=this.backgroundColor,c.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(c)}},_setOpacity:function(c){this.group&&!this.group._transformDone?c.globalAlpha=this.getObjectOpacity():c.globalAlpha*=this.opacity},_setStrokeStyles:function(c,v){var C=v.stroke;C&&(c.lineWidth=v.strokeWidth,c.lineCap=v.strokeLineCap,c.lineDashOffset=v.strokeDashOffset,c.lineJoin=v.strokeLineJoin,c.miterLimit=v.strokeMiterLimit,C.toLive?"percentage"===C.gradientUnits||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(c,C):(c.strokeStyle=C.toLive(c,this),this._applyPatternGradientTransform(c,C)):c.strokeStyle=v.stroke)},_setFillStyles:function(c,v){var C=v.fill;C&&(C.toLive?(c.fillStyle=C.toLive(c,this),this._applyPatternGradientTransform(c,v.fill)):c.fillStyle=C)},_setClippingProperties:function(c){c.globalAlpha=1,c.strokeStyle="transparent",c.fillStyle="#000000"},_setLineDash:function(c,v){!v||0===v.length||(1&v.length&&v.push.apply(v,v),c.setLineDash(v))},_renderControls:function(c,v){var S,x,M,C=this.getViewportTransform(),D=this.calcTransformMatrix();x=typeof(v=v||{}).hasBorders<"u"?v.hasBorders:this.hasBorders,M=typeof v.hasControls<"u"?v.hasControls:this.hasControls,D=f.util.multiplyTransformMatrices(C,D),S=f.util.qrDecompose(D),c.save(),c.translate(S.translateX,S.translateY),c.lineWidth=1*this.borderScaleFactor,this.group||(c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(S.angle-=180),c.rotate(o(this.group?S.angle:this.angle)),v.forActiveSelection||this.group?x&&this.drawBordersInGroup(c,S,v):x&&this.drawBorders(c,v),M&&this.drawControls(c,v),c.restore()},_setShadow:function(c){if(this.shadow){var D,v=this.shadow,C=this.canvas,S=C&&C.viewportTransform[0]||1,x=C&&C.viewportTransform[3]||1;D=v.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),C&&C._isRetinaScaling()&&(S*=f.devicePixelRatio,x*=f.devicePixelRatio),c.shadowColor=v.color,c.shadowBlur=v.blur*f.browserShadowBlurConstant*(S+x)*(D.scaleX+D.scaleY)/4,c.shadowOffsetX=v.offsetX*S*D.scaleX,c.shadowOffsetY=v.offsetY*x*D.scaleY}},_removeShadow:function(c){this.shadow&&(c.shadowColor="",c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0)},_applyPatternGradientTransform:function(c,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var C=v.gradientTransform||v.patternTransform,D=-this.width/2+v.offsetX||0,S=-this.height/2+v.offsetY||0;return"percentage"===v.gradientUnits?c.transform(this.width,0,0,this.height,D,S):c.transform(1,0,0,1,D,S),C&&c.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:D,offsetY:S}},_renderPaintInOrder:function(c){"stroke"===this.paintFirst?(this._renderStroke(c),this._renderFill(c)):(this._renderFill(c),this._renderStroke(c))},_render:function(){},_renderFill:function(c){this.fill&&(c.save(),this._setFillStyles(c,this),"evenodd"===this.fillRule?c.fill("evenodd"):c.fill(),c.restore())},_renderStroke:function(c){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(c),c.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();c.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&c.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(c,this.strokeDashArray),this._setStrokeStyles(c,this),c.stroke(),c.restore()}},_applyPatternForTransformedGradient:function(c,v){var S,C=this._limitCacheSize(this._getCacheCanvasDimensions()),D=f.util.createCanvasElement(),x=this.canvas.getRetinaScaling(),M=C.x/this.scaleX/x,P=C.y/this.scaleY/x;D.width=M,D.height=P,(S=D.getContext("2d")).beginPath(),S.moveTo(0,0),S.lineTo(M,0),S.lineTo(M,P),S.lineTo(0,P),S.closePath(),S.translate(M/2,P/2),S.scale(C.zoomX/this.scaleX/x,C.zoomY/this.scaleY/x),this._applyPatternGradientTransform(S,v),S.fillStyle=v.toLive(c),S.fill(),c.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),c.scale(x*this.scaleX/C.zoomX,x*this.scaleY/C.zoomY),c.strokeStyle=S.createPattern(D,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var c=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",c.scaleX),this.set("scaleY",c.scaleY),this.angle=c.angle,this.skewX=c.skewX,this.skewY=0}},_removeTransformMatrix:function(c){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=f.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,c&&(this.scaleX*=c.scaleX,this.scaleY*=c.scaleY,this.cropX=c.cropX,this.cropY=c.cropY,v.x+=c.offsetLeft,v.y+=c.offsetTop,this.width=c.width,this.height=c.height),this.setPositionByOrigin(v,"center","center")},clone:function(c,v){var C=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(C,c):f.Object._fromObject("Object",C,c)},cloneAsImage:function(c,v){var C=this.toCanvasElement(v);return c&&c(new f.Image(C)),this},toCanvasElement:function(c){c||(c={});var v=f.util,C=v.saveObjectTransform(this),D=this.group,S=this.shadow,x=Math.abs,M=(c.multiplier||1)*(c.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,c.withoutTransform&&v.resetObjectTransform(this),c.withoutShadow&&(this.shadow=null);var re,he,le,P=f.util.createCanvasElement(),j=this.getBoundingRect(!0,!0),G=this.shadow,ae={x:0,y:0};G&&(he=G.blur,re=G.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),ae.x=2*Math.round(x(G.offsetX)+he)*x(re.scaleX),ae.y=2*Math.round(x(G.offsetY)+he)*x(re.scaleY)),le=j.height+ae.y,P.width=Math.ceil(j.width+ae.x),P.height=Math.ceil(le);var ce=new f.StaticCanvas(P,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===c.format&&(ce.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(ce.width/2,ce.height/2),"center","center");var De=this.canvas;ce.add(this);var de=ce.toCanvasElement(M||1,c);return this.shadow=S,this.set("canvas",De),D&&(this.group=D),this.set(C).setCoords(),ce._objects=[],ce.dispose(),ce=null,de},toDataURL:function(c){return c||(c={}),f.util.toDataURL(this.toCanvasElement(c),c.format||"png",c.quality||1)},isType:function(c){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===c},complexity:function(){return 1},toJSON:function(c){return this.toObject(c)},rotate:function(c){var v=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",c),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(c,v){v=v||this.canvas.getPointer(c);var C=new f.Point(v.x,v.y),D=this._getLeftTopCoords();return this.angle&&(C=f.util.rotatePoint(C,D,o(-this.angle))),{x:C.x-D.x,y:C.y-D.y}},_setupCompositeOperation:function(c){this.globalCompositeOperation&&(c.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),p(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(c,v,C,D){var S=f[c];v=d(v,!0),f.util.enlivenPatterns([v.fill,v.stroke],function(x){typeof x[0]<"u"&&(v.fill=x[0]),typeof x[1]<"u"&&(v.stroke=x[1]),f.util.enlivenObjectEnlivables(v,v,function(){var M=D?new S(v[D],v):new S(v);C&&C(M)})})},f.Object.__uid=0)}(Ne),function(){var y=w.util.degreesToRadians,f={left:-.5,center:0,right:.5},p={top:-.5,center:0,bottom:.5};w.util.object.extend(w.Object.prototype,{translateToGivenOrigin:function(d,l,u,o,h){var v,C,D,g=d.x,c=d.y;return"string"==typeof l?l=f[l]:l-=.5,"string"==typeof o?o=f[o]:o-=.5,"string"==typeof u?u=p[u]:u-=.5,"string"==typeof h?h=p[h]:h-=.5,C=h-u,((v=o-l)||C)&&(D=this._getTransformedDimensions(),g=d.x+v*D.x,c=d.y+C*D.y),new w.Point(g,c)},translateToCenterPoint:function(d,l,u){var o=this.translateToGivenOrigin(d,l,u,"center","center");return this.angle?w.util.rotatePoint(o,d,y(this.angle)):o},translateToOriginPoint:function(d,l,u){var o=this.translateToGivenOrigin(d,"center","center",l,u);return this.angle?w.util.rotatePoint(o,d,y(this.angle)):o},getCenterPoint:function(){var d=new w.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,l){var u=this.getCenterPoint();return this.translateToOriginPoint(u,d,l)},toLocalPoint:function(d,l,u){var h,g,o=this.getCenterPoint();return h=typeof l<"u"&&typeof u<"u"?this.translateToGivenOrigin(o,"center","center",l,u):new w.Point(this.left,this.top),g=new w.Point(d.x,d.y),this.angle&&(g=w.util.rotatePoint(g,o,-y(this.angle))),g.subtractEquals(h)},setPositionByOrigin:function(d,l,u){var o=this.translateToCenterPoint(d,l,u),h=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(d){var g,c,l=y(this.angle),u=this.getScaledWidth(),o=w.util.cos(l)*u,h=w.util.sin(l)*u;this.left+=o*((c="string"==typeof d?f[d]:d-.5)-(g="string"==typeof this.originX?f[this.originX]:this.originX-.5)),this.top+=h*(c-g),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var f=w.util,p=f.degreesToRadians,d=f.multiplyTransformMatrices,l=f.transformPoint;f.object.extend(w.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,o){return o?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,o){return function y(u){return[new w.Point(u.tl.x,u.tl.y),new w.Point(u.tr.x,u.tr.y),new w.Point(u.br.x,u.br.y),new w.Point(u.bl.x,u.bl.y)]}(this._getCoords(u,o))},intersectsWithRect:function(u,o,h,g){var c=this.getCoords(h,g);return"Intersection"===w.Intersection.intersectPolygonRectangle(c,u,o).status},intersectsWithObject:function(u,o,h){return"Intersection"===w.Intersection.intersectPolygonPolygon(this.getCoords(o,h),u.getCoords(o,h)).status||u.isContainedWithinObject(this,o,h)||this.isContainedWithinObject(u,o,h)},isContainedWithinObject:function(u,o,h){for(var g=this.getCoords(o,h),v=0,C=u._getImageLines(o?u.aCoords:u.lineCoords);v<4;v++)if(!u.containsPoint(g[v],C))return!1;return!0},isContainedWithinRect:function(u,o,h,g){var c=this.getBoundingRect(h,g);return c.left>=u.x&&c.left+c.width<=o.x&&c.top>=u.y&&c.top+c.height<=o.y},containsPoint:function(u,v,h,g){var c=this._getCoords(h,g),C=(v=v||this._getImageLines(c),this._findCrossPoints(u,v));return 0!==C&&C%2==1},isOnScreen:function(u){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;return!(!this.getCoords(!0,u).some(function(c){return c.x<=h.x&&c.x>=o.x&&c.y<=h.y&&c.y>=o.y})&&!this.intersectsWithRect(o,h,!0,u))||this._containsCenterOfCanvas(o,h,u)},_containsCenterOfCanvas:function(u,o,h){return!!this.containsPoint({x:(u.x+o.x)/2,y:(u.y+o.y)/2},null,!0,h)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;return!!this.intersectsWithRect(o,h,!0,u)||this.getCoords(!0,u).every(function(c){return(c.x>=h.x||c.x<=o.x)&&(c.y>=h.y||c.y<=o.y)})&&this._containsCenterOfCanvas(o,h,u)},_getImageLines:function(u){return{topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}}},_findCrossPoints:function(u,o){var g,c,v,C,S,D=0;for(var x in o)if(!((S=o[x]).o.y<u.y&&S.d.y<u.y||S.o.y>=u.y&&S.d.y>=u.y||(S.o.x===S.d.x&&S.o.x>=u.x?C=S.o.x:(g=(S.d.y-S.o.y)/(S.d.x-S.o.x),c=u.y-0*u.x,v=S.o.y-g*S.o.x,C=-(c-v)/(0-g)),C>=u.x&&(D+=1),2!==D)))break;return D},getBoundingRect:function(u,o){var h=this.getCoords(u,o);return f.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:0===u?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,o){var h=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(u/this.width/h)},scaleToHeight:function(u,o){var h=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(u/this.height/h)},calcLineCoords:function(){var u=this.getViewportTransform(),o=this.padding,h=p(this.angle),v=f.cos(h)*o,C=f.sin(h)*o,D=v+C,S=v-C,x=this.calcACoords(),M={tl:l(x.tl,u),tr:l(x.tr,u),bl:l(x.bl,u),br:l(x.br,u)};return o&&(M.tl.x-=S,M.tl.y-=D,M.tr.x+=D,M.tr.y-=S,M.bl.x-=D,M.bl.y+=S,M.br.x+=S,M.br.y+=D),M},calcOCoords:function(){var u=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),h=this.getViewportTransform(),g=d(h,o),c=d(g,u),v=(c=d(c,[1/h[0],0,0,1/h[3],0,0]),this._calculateCurrentDimensions()),C={};return this.forEachControl(function(D,S,x){C[S]=D.positionHandler(v,c,x)}),C},calcACoords:function(){var u=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),h=d(o,u),g=this._getTransformedDimensions(),c=g.x/2,v=g.y/2;return{tl:l({x:-c,y:-v},h),tr:l({x:c,y:-v},h),bl:l({x:-c,y:v},h),br:l({x:c,y:v},h)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var o="_",h="";return!u&&this.group&&(h=this.group.transformMatrixKey(u)+o),h+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var o=this.calcOwnMatrix();if(u||!this.group)return o;var h=this.transformMatrixKey(u),g=this.matrixCache||(this.matrixCache={});return g.key===h?g.value:(this.group&&(o=d(this.group.calcTransformMatrix(!1),o)),g.key=h,g.value=o,o)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===u)return o.value;var h=this._calcTranslateMatrix(),g={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=u,o.value=f.composeMatrix(g),o.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth;return{x:this.width+u,y:this.height+u}},_getTransformedDimensions:function(u,o){typeof u>"u"&&(u=this.skewX),typeof o>"u"&&(o=this.skewY);var h,g,c,v=0===u&&0===o;if(this.strokeUniform?(g=this.width,c=this.height):(g=(h=this._getNonTransformedDimensions()).x,c=h.y),v)return this._finalizeDimensions(g*this.scaleX,c*this.scaleY);var C=f.sizeAfterTransform(g,c,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:o});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(u,o){return this.strokeUniform?{x:u+this.strokeWidth,y:o+this.strokeWidth}:{x:u,y:o}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),o=this._getTransformedDimensions();return l(o,u,!0).scalarAdd(2*this.padding)}})}(),w.util.object.extend(w.Object.prototype,{sendToBack:function(){return this.group?w.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?w.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(y){return this.group?w.StaticCanvas.prototype.sendBackwards.call(this.group,this,y):this.canvas&&this.canvas.sendBackwards(this,y),this},bringForward:function(y){return this.group?w.StaticCanvas.prototype.bringForward.call(this.group,this,y):this.canvas&&this.canvas.bringForward(this,y),this},moveTo:function(y){return this.group&&"activeSelection"!==this.group.type?w.StaticCanvas.prototype.moveTo.call(this.group,this,y):this.canvas&&this.canvas.moveTo(this,y),this}}),function(){function y(p,d){if(d){if(d.toLive)return p+": url(#SVGID_"+d.id+"); ";var l=new w.Color(d),u=p+": "+l.toRgb()+"; ",o=l.getAlpha();return 1!==o&&(u+=p+"-opacity: "+o.toString()+"; "),u}return p+": none; "}var f=w.util.toFixed;w.util.object.extend(w.Object.prototype,{getSvgStyles:function(p){var d=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",D=p?"":this.getSvgFilter(),S=y("fill",this.fill);return[y("stroke",this.stroke),"stroke-width: ",l,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",c,"; ",S,"fill-rule: ",d,"; ","opacity: ",v,";",D,C].join("")},getSvgSpanStyles:function(p,d){var l="; ",o=p.fontFamily?"font-family: "+(-1===p.fontFamily.indexOf("'")&&-1===p.fontFamily.indexOf('"')?"'"+p.fontFamily+"'":p.fontFamily)+l:"",u=p.strokeWidth?"stroke-width: "+p.strokeWidth+l:"",h=p.fontSize?"font-size: "+p.fontSize+"px"+l:"",g=p.fontStyle?"font-style: "+p.fontStyle+l:"",c=p.fontWeight?"font-weight: "+p.fontWeight+l:"",v=p.fill?y("fill",p.fill):"",C=p.stroke?y("stroke",p.stroke):"",D=this.getSvgTextDecoration(p);return D&&(D="text-decoration: "+D+l),[C,u,o,h,g,c,D,v,p.deltaY?"baseline-shift: "+-p.deltaY+"; ":"",d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(p){return["overline","underline","line-through"].filter(function(d){return p[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(p,d){var l=p?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+w.util.matrixToSVG(l)+(d||"")+'" '},_setSVGBg:function(p){if(this.backgroundColor){var d=w.Object.NUM_FRACTION_DIGITS;p.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,d),'" y="',f(-this.height/2,d),'" width="',f(this.width,d),'" height="',f(this.height,d),'"></rect>\n')}},toSVG:function(p){return this._createBaseSVGMarkup(this._toSVG(p),{reviver:p})},toClipPathSVG:function(p){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(p),{reviver:p})},_createBaseClipPathSVGMarkup:function(p,d){var l=(d=d||{}).reviver,o=[this.getSvgTransform(!0,d.additionalTransform||""),this.getSvgCommons()].join(""),h=p.indexOf("COMMON_PARTS");return p[h]=o,l?l(p.join("")):p.join("")},_createBaseSVGMarkup:function(p,d){var x,P,l=(d=d||{}).noStyle,u=d.reviver,o=l?"":'style="'+this.getSvgStyles()+'" ',h=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=g&&g.absolutePositioned,C=this.stroke,D=this.fill,S=this.shadow,M=[],j=p.indexOf("COMMON_PARTS"),G=d.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+w.Object.__uid++,P='<clipPath id="'+g.clipPathId+'" >\n'+g.toClipPathSVG(u)+"</clipPath>\n"),v&&M.push("<g ",h,this.getSvgCommons()," >\n"),M.push("<g ",this.getSvgTransform(!1),v?"":h+this.getSvgCommons()," >\n"),x=[o,c,l?"":this.addPaintOrder()," ",G?'transform="'+G+'" ':""].join(""),p[j]=x,D&&D.toLive&&M.push(D.toSVG(this)),C&&C.toLive&&M.push(C.toSVG(this)),S&&M.push(S.toSVG(this)),g&&M.push(P),M.push(p.join("")),M.push("</g>\n"),v&&M.push("</g>\n"),u?u(M.join("")):M.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var y=w.util.object.extend,f="stateProperties";function p(l,u,o){var h={};o.forEach(function(c){h[c]=l[c]}),y(l[u],h,!0)}function d(l,u,o){if(l===u)return!0;if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(var h=0,g=l.length;h<g;h++)if(!d(l[h],u[h]))return!1;return!0}if(l&&"object"==typeof l){var v,c=Object.keys(l);if(!u||"object"!=typeof u||!o&&c.length!==Object.keys(u).length)return!1;for(h=0,g=c.length;h<g;h++)if("canvas"!==(v=c[h])&&"group"!==v&&!d(l[v],u[v]))return!1;return!0}}w.util.object.extend(w.Object.prototype,{hasStateChanged:function(l){var u="_"+(l=l||f);return Object.keys(this[u]).length<this[l].length||!d(this[u],this,!0)},saveState:function(l){var u=l&&l.propertySet||f,o="_"+u;return this[o]?(p(this,o,this[u]),l&&l.stateProperties&&p(this,o,l.stateProperties),this):this.setupState(l)},setupState:function(l){var u=(l=l||{}).propertySet||f;return l.propertySet=u,this["_"+u]={},this.saveState(l),this}})}(),function(){var y=w.util.degreesToRadians;w.util.object.extend(w.Object.prototype,{_findTargetCorner:function(f,p){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u,o,c,d=f.x,l=f.y,h=Object.keys(this.oCoords),g=h.length-1;for(this.__corner=0;g>=0;g--)if(this.isControlVisible(c=h[g])&&(o=this._getImageLines(p?this.oCoords[c].touchCorner:this.oCoords[c].corner),0!==(u=this._findCrossPoints({x:d,y:l},o))&&u%2==1))return this.__corner=c,c;return!1},forEachControl:function(f){for(var p in this.controls)f(this.controls[p],p,this)},_setCornerCoords:function(){var f=this.oCoords;for(var p in f){var d=this.controls[p];f[p].corner=d.calcCornerCoords(this.angle,this.cornerSize,f[p].x,f[p].y,!1),f[p].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,f[p].x,f[p].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var p=this.getCenterPoint(),d=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return f.translate(p.x,p.y),f.scale(1/l[0],1/l[3]),f.rotate(y(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-d.x/2,-d.y/2,d.x,d.y),f.restore(),this},drawBorders:function(f,p){p=p||{};var d=this._calculateCurrentDimensions(),l=this.borderScaleFactor,u=d.x+l,o=d.y+l,h=typeof p.hasControls<"u"?p.hasControls:this.hasControls,g=!1;return f.save(),f.strokeStyle=p.borderColor||this.borderColor,this._setLineDash(f,p.borderDashArray||this.borderDashArray),f.strokeRect(-u/2,-o/2,u,o),h&&(f.beginPath(),this.forEachControl(function(c,v,C){c.withConnection&&c.getVisibility(C,v)&&(g=!0,f.moveTo(c.x*u,c.y*o),f.lineTo(c.x*u+c.offsetX,c.y*o+c.offsetY))}),g&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,p,d){d=d||{};var l=w.util.sizeAfterTransform(this.width,this.height,p),u=this.strokeWidth,o=this.strokeUniform,h=this.borderScaleFactor,g=l.x+u*(o?this.canvas.getZoom():p.scaleX)+h,c=l.y+u*(o?this.canvas.getZoom():p.scaleY)+h;return f.save(),this._setLineDash(f,d.borderDashArray||this.borderDashArray),f.strokeStyle=d.borderColor||this.borderColor,f.strokeRect(-g/2,-c/2,g,c),f.restore(),this},drawControls:function(f,p){p=p||{},f.save();var l,u,d=this.canvas.getRetinaScaling();return f.setTransform(d,0,0,d,0,0),f.strokeStyle=f.fillStyle=p.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=p.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,p.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(o,h,g){u=g.oCoords[h],o.getVisibility(g,h)&&(l&&(u=w.util.transformPoint(u,l)),o.render(f,u.x,u.y,p,g))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,p){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=p,this},setControlsVisibility:function(f){for(var p in f||(f={}),f)this.setControlVisible(p,f[p]);return this},onDeselect:function(){},onSelect:function(){}})}(),w.util.object.extend(w.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(y,f){var p=function(){},d=(f=f||{}).onComplete||p,l=f.onChange||p,u=this;return w.util.animate({target:this,startValue:y.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(o){y.set("left",o),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),d()}})},fxCenterObjectV:function(y,f){var p=function(){},d=(f=f||{}).onComplete||p,l=f.onChange||p,u=this;return w.util.animate({target:this,startValue:y.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(o){y.set("top",o),u.requestRenderAll(),l()},onComplete:function(){y.setCoords(),d()}})},fxRemove:function(y,f){var p=function(){},d=(f=f||{}).onComplete||p,l=f.onChange||p,u=this;return w.util.animate({target:this,startValue:y.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){y.set("opacity",o),u.requestRenderAll(),l()},onComplete:function(){u.remove(y),d()}})}}),w.util.object.extend(w.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var f,y=[],d=[];for(f in arguments[0])y.push(f);for(var l=0,u=y.length;l<u;l++)d.push(this._animate(f=y[l],arguments[0][f],arguments[1],l!==u-1));return d}return this._animate.apply(this,arguments)},_animate:function(y,f,p,d){var u,l=this;f=f.toString(),p=p?w.util.object.clone(p):{},~y.indexOf(".")&&(u=y.split("."));var o=l.colorProperties.indexOf(y)>-1||u&&l.colorProperties.indexOf(u[1])>-1,h=u?this.get(u[0])[u[1]]:this.get(y);"from"in p||(p.from=h),o||(f=~f.indexOf("=")?h+parseFloat(f.replace("=","")):parseFloat(f));var g={target:this,startValue:p.from,endValue:f,byValue:p.by,easing:p.easing,duration:p.duration,abort:p.abort&&function(c,v,C){return p.abort.call(l,c,v,C)},onChange:function(c,v,C){u?l[u[0]][u[1]]=c:l.set(y,c),!d&&p.onChange&&p.onChange(c,v,C)},onComplete:function(c,v,C){d||(l.setCoords(),p.onComplete&&p.onComplete(c,v,C))}};return o?w.util.animateColor(g.startValue,g.endValue,g.duration,g):w.util.animate(g)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};function u(o,h){var g=o.origin,c=o.axis1,v=o.axis2,C=o.dimension,D=h.nearest,S=h.center,x=h.farthest;return function(){switch(this.get(g)){case D:return Math.min(this.get(c),this.get(v));case S:return Math.min(this.get(c),this.get(v))+.5*this.get(C);case x:return Math.max(this.get(c),this.get(v))}}}f.Line?f.warn("fabric.Line is already defined"):(f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(o,h){o||(o=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",o[0]),this.set("y1",o[1]),this.set("x2",o[2]),this.set("y2",o[3]),this._setWidthHeight(h)},_setWidthHeight:function(o){o||(o={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in o?o.left:this._getLeftToOriginX(),this.top="top"in o?o.top:this._getTopToOriginY()},_set:function(o,h){return this.callSuper("_set",o,h),typeof l[o]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(o){o.beginPath();var h=this.calcLinePoints();o.moveTo(h.x1,h.y1),o.lineTo(h.x2,h.y2),o.lineWidth=this.strokeWidth;var g=o.strokeStyle;o.strokeStyle=this.stroke||o.fillStyle,this.stroke&&this._renderStroke(o),o.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(o){return p(this.callSuper("toObject",o),this.calcLinePoints())},_getNonTransformedDimensions:function(){var o=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(o.y-=this.strokeWidth),0===this.height&&(o.x-=this.strokeWidth)),o},calcLinePoints:function(){var o=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1;return{x1:o*this.width*.5,x2:o*this.width*-.5,y1:h*this.height*.5,y2:h*this.height*-.5}},_toSVG:function(){var o=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,'" />\n']}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(o,h,g){g=g||{};var c=f.parseAttributes(o,f.Line.ATTRIBUTE_NAMES);h(new f.Line([c.x1||0,c.y1||0,c.x2||0,c.y2||0],p(c,g)))},f.Line.fromObject=function(o,h){var c=d(o,!0);c.points=[o.x1,o.y1,o.x2,o.y2],f.Object._fromObject("Line",c,function g(v){delete v.points,h&&h(v)},"points")})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.degreesToRadians;f.Circle?f.warn("fabric.Circle is already defined."):(f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,u){return this.callSuper("_set",l,u),"radius"===l&&this.setRadius(u),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,h=(this.endAngle-this.startAngle)%360;if(0===h)l=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var g=p(this.startAngle),c=p(this.endAngle),v=this.radius;l=['<path d="M '+f.util.cos(g)*v+" "+f.util.sin(g)*v," A "+v+" "+v," 0 ",+(h>180?"1":"0")+" 1"," "+f.util.cos(c)*v+" "+f.util.sin(c)*v,'" ',"COMMON_PARTS"," />\n"]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,p(this.startAngle),p(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",2*l).set("height",2*l)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(l,u){var o=f.parseAttributes(l,f.Circle.ATTRIBUTE_NAMES);if(!function d(l){return"radius"in l&&l.radius>=0}(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,u(new f.Circle(o))},f.Circle.fromObject=function(l,u){f.Object._fromObject("Circle",l,u)})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Triangle?f.warn("fabric.Triangle is already defined"):(f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(p){var d=this.width/2,l=this.height/2;p.beginPath(),p.moveTo(-d,l),p.lineTo(0,-l),p.lineTo(d,l),p.closePath(),this._renderPaintInOrder(p)},_toSVG:function(){var p=this.width/2,d=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-p+" "+d,"0 "+-d,p+" "+d].join(","),'" />']}}),f.Triangle.fromObject=function(p,d){return f.Object._fromObject("Triangle",p,d)})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=2*Math.PI;f.Ellipse?f.warn("fabric.Ellipse is already defined."):(f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,l){switch(this.callSuper("_set",d,l),d){case"rx":this.rx=l,this.set("width",2*l);break;case"ry":this.ry=l,this.set("height",2*l)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,p,!1),d.restore(),this._renderPaintInOrder(d)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(d,l){var u=f.parseAttributes(d,f.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,l(new f.Ellipse(u))},f.Ellipse.fromObject=function(d,l){f.Object._fromObject("Ellipse",d,l)})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend;f.Rect?f.warn("fabric.Rect is already defined"):(f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var l=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,h=this.height,g=-this.width/2,c=-this.height/2,v=0!==l||0!==u,C=.4477152502;d.beginPath(),d.moveTo(g+l,c),d.lineTo(g+o-l,c),v&&d.bezierCurveTo(g+o-C*l,c,g+o,c+C*u,g+o,c+u),d.lineTo(g+o,c+h-u),v&&d.bezierCurveTo(g+o,c+h-C*u,g+o-C*l,c+h,g+o-l,c+h),d.lineTo(g+l,c+h),v&&d.bezierCurveTo(g+C*l,c+h,g,c+h-C*u,g,c+h-u),d.lineTo(g,c+u),v&&d.bezierCurveTo(g,c+C*u,g+C*l,c,g+l,c),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(d,l,u){if(!d)return l(null);u=u||{};var o=f.parseAttributes(d,f.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var h=new f.Rect(p(u?f.util.object.clone(u):{},o));h.visible=h.visible&&h.width>0&&h.height>0,l(h)},f.Rect.fromObject=function(d,l){return f.Object._fromObject("Rect",d,l)})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.util.array.min,l=f.util.array.max,u=f.util.toFixed,o=f.util.projectStrokeOnPoints;f.Polyline?f.warn("fabric.Polyline is already defined"):(f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(h,g){g=g||{},this.points=h||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(h){var c,g=this._calcDimensions(h),v=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-v,this.height=g.height-v,h.fromSVG||(c=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+v/2,y:g.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof h.left>"u"&&(this.left=h.fromSVG?g.left:c.x),typeof h.top>"u"&&(this.top=h.fromSVG?g.top:c.y),this.pathOffset={x:g.left+this.width/2+v/2,y:g.top+this.height/2+v/2}},_calcDimensions:function(){var h=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=d(h,"x")||0,c=d(h,"y")||0;return{left:g,top:c,width:(l(h,"x")||0)-g,height:(l(h,"y")||0)-c}},toObject:function(h){return p(this.callSuper("toObject",h),{points:this.points.concat()})},_toSVG:function(){for(var h=[],g=this.pathOffset.x,c=this.pathOffset.y,v=f.Object.NUM_FRACTION_DIGITS,C=0,D=this.points.length;C<D;C++)h.push(u(this.points[C].x-g,v),",",u(this.points[C].y-c,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',h.join(""),'" />\n']},commonRender:function(h){var g,c=this.points.length,v=this.pathOffset.x,C=this.pathOffset.y;if(!c||isNaN(this.points[c-1].y))return!1;h.beginPath(),h.moveTo(this.points[0].x-v,this.points[0].y-C);for(var D=0;D<c;D++)h.lineTo((g=this.points[D]).x-v,g.y-C);return!0},_render:function(h){this.commonRender(h)&&this._renderPaintInOrder(h)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(h){return function(g,c,v){if(!g)return c(null);v||(v={});var C=f.parsePointsAttribute(g.getAttribute("points")),D=f.parseAttributes(g,f[h].ATTRIBUTE_NAMES);D.fromSVG=!0,c(new f[h](C,p(D,v)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(h,g){return f.Object._fromObject("Polyline",h,g,"points")})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.projectStrokeOnPoints;f.Polygon?f.warn("fabric.Polygon is already defined"):(f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return p(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(d,l){f.Object._fromObject("Polygon",d,l,"points")})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.array.min,d=f.util.array.max,l=f.util.object.extend,u=f.util.object.clone,o=f.util.toFixed;f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(h,g){delete(g=u(g||{})).path,this.callSuper("initialize",g),this._setPath(h||[],g)},_setPath:function(h,g){this.path=f.util.makePathSimpler(Array.isArray(h)?h:f.util.parsePath(h)),f.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(h){var g,c=0,v=0,C=0,D=0,M=-this.pathOffset.x,P=-this.pathOffset.y;h.beginPath();for(var j=0,G=this.path.length;j<G;++j)switch(g=this.path[j],g[0]){case"L":h.lineTo((C=g[1])+M,(D=g[2])+P);break;case"M":c=C=g[1],v=D=g[2],h.moveTo(C+M,D+P);break;case"C":h.bezierCurveTo(g[1]+M,g[2]+P,g[3]+M,g[4]+P,(C=g[5])+M,(D=g[6])+P);break;case"Q":h.quadraticCurveTo(g[1]+M,g[2]+P,g[3]+M,g[4]+P),C=g[3],D=g[4];break;case"z":case"Z":C=c,D=v,h.closePath()}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return l(this.callSuper("toObject",h),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(h){var g=this.toObject(["sourcePath"].concat(h));return g.sourcePath&&delete g.path,g},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',f.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var h=f.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,h)+", "+o(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var g=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},toSVG:function(h){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c,x,h=[],g=[],v=0,C=0,D=0,S=0,M=0,P=this.path.length;M<P;++M){switch((c=this.path[M])[0]){case"L":D=c[1],S=c[2],x=[];break;case"M":v=D=c[1],C=S=c[2],x=[];break;case"C":x=f.util.getBoundsOfCurve(D,S,c[1],c[2],c[3],c[4],c[5],c[6]),D=c[5],S=c[6];break;case"Q":x=f.util.getBoundsOfCurve(D,S,c[1],c[2],c[1],c[2],c[3],c[4]),D=c[3],S=c[4];break;case"z":case"Z":D=v,S=C}x.forEach(function(le){h.push(le.x),g.push(le.y)}),h.push(D),g.push(S)}var j=p(h)||0,G=p(g)||0;return{left:j,top:G,width:(d(h)||0)-j,height:(d(g)||0)-G}}}),f.Path.fromObject=function(h,g){"string"==typeof h.sourcePath?f.loadSVGFromURL(h.sourcePath,function(v){var C=v[0];C.setOptions(h),h.clipPath?f.util.enlivenObjects([h.clipPath],function(D){C.clipPath=D[0],g&&g(C)}):g&&g(C)}):f.Object._fromObject("Path",h,g,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(h,g,c){var v=f.parseAttributes(h,f.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,g(new f.Path(v.d,l(v,c)))})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.array.min,d=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,u,o){u=u||{},this._objects=[],o&&this.callSuper("initialize",u),this._objects=l||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(o)this._updateObjectsACoords();else{var g=u&&u.centerPoint;void 0!==u.originX&&(this.originX=u.originX),void 0!==u.originY&&(this.originY=u.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var u=this._objects.length;u--;)this._objects[u].setCoords(!0)},_updateObjectsCoords:function(u){u=u||this.getCenterPoint();for(var o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],u)},_updateObjectCoords:function(l,u){l.set({left:l.left-u.x,top:l.top-u.y}),l.group=this,l.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var u=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),l&&(u&&f.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,u){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(l,u);if("canvas"===l)for(;o--;)this._objects[o]._set(l,u);f.Object.prototype._set.call(this,l,u)},toObject:function(l){var u=this.includeDefaultValues,o=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var c=g.includeDefaultValues;g.includeDefaultValues=u;var v=g.toObject(l);return g.includeDefaultValues=c,v}),h=f.Object.prototype.toObject.call(this,l);return h.objects=o,h},toDatalessObject:function(l){var u,o=this.sourcePath;if(o)u=o;else{var h=this.includeDefaultValues;u=this._objects.map(function(c){var v=c.includeDefaultValues;c.includeDefaultValues=h;var C=c.toDatalessObject(l);return c.includeDefaultValues=v,C})}var g=f.Object.prototype.toDatalessObject.call(this,l);return g.objects=u,g},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=f.Object.prototype.shouldCache.call(this);if(l)for(var u=0,o=this._objects.length;u<o;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1;return l},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var u=0,o=this._objects.length;u<o;u++)this._objects[u].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var u=0,o=this._objects.length;u<o;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(u){f.util.addTransformToObject(u,l),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,u=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var h=new f.ActiveSelection([]);return h.set(o),h.type="activeSelection",u.remove(this),l.forEach(function(g){g.group=h,g.dirty=!0,u.add(g)}),h.canvas=u,h._objects=l,u._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(u){u.setCoords(!0)}),this},_calcBounds:function(l){for(var h,g,c,S,u=[],o=[],v=["tr","br","bl","tl"],C=0,D=this._objects.length,x=v.length;C<D;++C){for(c=(h=this._objects[C]).calcACoords(),S=0;S<x;S++)u.push(c[g=v[S]].x),o.push(c[g].y);h.aCoords=c}this._getBounds(u,o,l)},_getBounds:function(l,u,o){var h=new f.Point(p(l),p(u)),g=new f.Point(d(l),d(u)),c=h.y||0,v=h.x||0,D=g.y-h.y||0;this.width=g.x-h.x||0,this.height=D,o||this.setPositionByOrigin({x:v,y:c},"left","top")},_toSVG:function(l){for(var u=["<g ","COMMON_PARTS"," >\n"],o=0,h=this._objects.length;o<h;o++)u.push("\t\t",this._objects[o].toSVG(l));return u.push("</g>\n"),u},getSvgStyles:function(){var u=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),u].join("")},toClipPathSVG:function(l){for(var u=[],o=0,h=this._objects.length;o<h;o++)u.push("\t",this._objects[o].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(u,{reviver:l})}}),f.Group.fromObject=function(l,u){var o=l.objects,h=f.util.object.clone(l,!0);delete h.objects,"string"!=typeof o?f.util.enlivenObjects(o,function(g){f.util.enlivenObjectEnlivables(l,h,function(){u&&u(new f.Group(g,h,!0))})}):f.loadSVGFromURL(o,function(g){var c=f.util.groupSVGElements(g,l,o),v=h.clipPath;delete h.clipPath,c.set(h),v?f.util.enlivenObjects([v],function(C){c.clipPath=C[0],u&&u(c)}):u&&u(c)})})}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(p,d){d=d||{},this._objects=p||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var p=this._objects.concat();this._objects=[];var d=f.Object.prototype.toObject.call(this),l=new f.Group([]);if(delete d.type,l.set(d),p.forEach(function(o){o.canvas.remove(o),o.group=l}),l._objects=p,!this.canvas)return l;var u=this.canvas;return u.add(l),u._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(p,d,l){p.save(),p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",p,d),typeof(l=l||{}).hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var u=0,o=this._objects.length;u<o;u++)this._objects[u]._renderControls(p,l);p.restore()}}),f.ActiveSelection.fromObject=function(p,d){f.util.enlivenObjects(p.objects,function(l){delete p.objects,d&&d(new f.ActiveSelection(l,p,!0))})})}(Ne),function(y){"use strict";var f=w.util.object.extend;y.fabric||(y.fabric={}),y.fabric.Image?w.warn("fabric.Image is already defined."):(w.Image=w.util.createClass(w.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:w.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:w.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(p,d){d||(d={}),this.filters=[],this.cacheKey="texture"+w.Object.__uid++,this.callSuper("initialize",d),this._initElement(p,d)},getElement:function(){return this._element||{}},setElement:function(p,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=p,this._originalElement=p,this._initConfig(d),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(p){var d=w.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(p)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(p){w.util.cleanUpJsdomNode(this[p]),this[p]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var p=this.getElement();return{width:p.naturalWidth||p.width,height:p.naturalHeight||p.height}},_stroke:function(p){if(this.stroke&&0!==this.strokeWidth){var d=this.width/2,l=this.height/2;p.beginPath(),p.moveTo(-d,-l),p.lineTo(d,-l),p.lineTo(d,l),p.lineTo(-d,l),p.lineTo(-d,-l),p.closePath()}},toObject:function(p){var d=[];this.filters.forEach(function(u){u&&d.push(u.toObject())});var l=f(this.callSuper("toObject",["cropX","cropY"].concat(p)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l,p=[],d=[],u=this._element,o=-this.width/2,h=-this.height/2,g="",c="";if(!u)return[];if(this.hasCrop()){var v=w.Object.__uid++;p.push('<clipPath id="imageCrop_'+v+'">\n','\t<rect x="'+o+'" y="'+h+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),g=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(c='" image-rendering="optimizeSpeed'),d.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',h-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,c,'"',g,"></image>\n"),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,l=["\t<rect ",'x="',o,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=C}return"fill"!==this.paintFirst?p.concat(l,d):p.concat(d,l)},getSrc:function(p){var d=p?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(p,d,l){return w.util.loadImage(p,function(u,o){this.setElement(u,l),this._setWidthHeight(),d&&d(this,o)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var p=this.resizeFilter,d=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),u=l.scaleX,o=l.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!p||u>d&&o>d)return this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,void(this._lastScaleY=o);w.filterBackend||(w.filterBackend=w.initFilterBackend());var g=w.util.createCanvasElement(),c=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=h.width,C=h.height;g.width=v,g.height=C,this._element=g,this._lastScaleX=p.scaleX=u,this._lastScaleY=p.scaleY=o,w.filterBackend.applyFilters([p],h,v,C,this._element,c),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(p){if(p=(p=p||this.filters||[]).filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===p.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,l=d.naturalWidth||d.width,u=d.naturalHeight||d.height;if(this._element===this._originalElement){var o=w.util.createCanvasElement();o.width=l,o.height=u,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,u),this._lastScaleX=1,this._lastScaleY=1;return w.filterBackend||(w.filterBackend=w.initFilterBackend()),w.filterBackend.applyFilters(p,this._originalElement,l,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(p){w.util.setImageSmoothing(p,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(p),this._renderPaintInOrder(p)},drawCacheOnCanvas:function(p){w.util.setImageSmoothing(p,this.imageSmoothing),w.Object.prototype.drawCacheOnCanvas.call(this,p)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(p){var d=this._element;if(d){var l=this._filterScalingX,u=this._filterScalingY,o=this.width,h=this.height,g=Math.min,c=Math.max,v=c(this.cropX,0),C=c(this.cropY,0),D=d.naturalWidth||d.width,S=d.naturalHeight||d.height,x=v*l,M=C*u,P=g(o*l,D-x),j=g(h*u,S-M),G=-o/2,re=-h/2,ae=g(o,D/l-v),he=g(h,S/u-C);d&&p.drawImage(d,x,M,P,j,G,re,ae,he)}},_needsResize:function(){var p=this.getTotalObjectScaling();return p.scaleX!==this._lastScaleX||p.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(p,d){this.setElement(w.util.getById(p),d),w.util.addClass(this.getElement(),w.Image.CSS_CANVAS)},_initConfig:function(p){p||(p={}),this.setOptions(p),this._setWidthHeight(p)},_initFilters:function(p,d){p&&p.length?w.util.enlivenObjects(p,function(l){d&&d(l)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(p){p||(p={});var d=this.getElement();this.width=p.width||d.naturalWidth||d.width||0,this.height=p.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var C,p=w.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,l=this._element.height,u=1,o=1,h=0,g=0,c=0,v=0,D=this.width,S=this.height,x={width:D,height:S};return!p||"none"===p.alignX&&"none"===p.alignY?(u=D/d,o=S/l):("meet"===p.meetOrSlice&&(C=(D-d*(u=o=w.util.findScaleToFit(this._element,x)))/2,"Min"===p.alignX&&(h=-C),"Max"===p.alignX&&(h=C),C=(S-l*o)/2,"Min"===p.alignY&&(g=-C),"Max"===p.alignY&&(g=C)),"slice"===p.meetOrSlice&&(C=d-D/(u=o=w.util.findScaleToCover(this._element,x)),"Mid"===p.alignX&&(c=C/2),"Max"===p.alignX&&(c=C),C=l-S/o,"Mid"===p.alignY&&(v=C/2),"Max"===p.alignY&&(v=C),d=D/u,l=S/o)),{width:d,height:l,scaleX:u,scaleY:o,offsetLeft:h,offsetTop:g,cropX:c,cropY:v}}}),w.Image.CSS_CANVAS="canvas-img",w.Image.prototype.getSvgSrc=w.Image.prototype.getSrc,w.Image.fromObject=function(p,d){var l=w.util.object.clone(p);w.util.loadImage(l.src,function(u,o){o?d&&d(null,!0):w.Image.prototype._initFilters.call(l,l.filters,function(h){l.filters=h||[],w.Image.prototype._initFilters.call(l,[l.resizeFilter],function(g){l.resizeFilter=g[0],w.util.enlivenObjectEnlivables(l,l,function(){var c=new w.Image(u,l);d(c,!1)})})})},null,l.crossOrigin)},w.Image.fromURL=function(p,d,l){w.util.loadImage(p,function(u,o){d&&d(new w.Image(u,l),o)},null,l&&l.crossOrigin)},w.Image.ATTRIBUTE_NAMES=w.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),w.Image.fromElement=function(p,d,l){var u=w.parseAttributes(p,w.Image.ATTRIBUTE_NAMES);w.Image.fromURL(u["xlink:href"],d,f(l?w.util.object.clone(l):{},u))})}(Ne),w.util.object.extend(w.Object.prototype,{_getAngleValueForStraighten:function(){var y=this.angle%360;return y>0?90*Math.round((y-1)/90):90*Math.round(y/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(y){var f=function(){},p=(y=y||{}).onComplete||f,d=y.onChange||f,l=this;return w.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){l.rotate(u),d()},onComplete:function(){l.setCoords(),p()}})}}),w.util.object.extend(w.StaticCanvas.prototype,{straightenObject:function(y){return y.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(y){return y.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function y(p,d){var l="precision "+d+" float;\nvoid main(){}",u=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(u,l),p.compileShader(u),!!p.getShaderParameter(u,p.COMPILE_STATUS)}function f(p){p&&p.tileSize&&(this.tileSize=p.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}w.isWebglSupported=function(p){if(w.isLikelyNode)return!1;p=p||w.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),l=d.getContext("webgl")||d.getContext("experimental-webgl"),u=!1;if(l){w.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),u=w.maxTextureSize>=p;for(var o=["highp","mediump","lowp"],h=0;h<3;h++)if(y(l,o[h])){w.webGlPrecision=o[h];break}}return this.isSupported=u,u},w.WebglFilterBackend=f,f.prototype={tileSize:2048,resources:{},setupGLContext:function(p,d){this.dispose(),this.createWebGLCanvas(p,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(p,d)},chooseFastestCopyGLTo2DMethod:function(p,d){var u,l=typeof window.performance<"u";try{new ImageData(1,1),u=!0}catch{u=!1}var o=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(l&&u&&o&&h){var g=w.util.createCanvasElement(),c=new ArrayBuffer(p*d*4);if(w.forceGLPutImageData)return this.imageBuffer=c,void(this.copyGLTo2D=Wr);var C,D,v={imageBuffer:c,destinationWidth:p,destinationHeight:d,targetCanvas:g};g.width=p,g.height=d,C=window.performance.now(),At.call(v,this.gl,v),D=window.performance.now()-C,C=window.performance.now(),Wr.call(v,this.gl,v),D>window.performance.now()-C?(this.imageBuffer=c,this.copyGLTo2D=Wr):this.copyGLTo2D=At}},createWebGLCanvas:function(p,d){var l=w.util.createCanvasElement();l.width=p,l.height=d;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=l.getContext("webgl",u);o||(o=l.getContext("experimental-webgl",u)),o&&(o.clearColor(0,0,0,0),this.canvas=l,this.gl=o)},applyFilters:function(p,d,l,u,o,h){var c,g=this.gl;h&&(c=this.getCachedTexture(h,d));var v={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:l,sourceHeight:u,destinationWidth:l,destinationHeight:u,context:g,sourceTexture:this.createTexture(g,l,u,!c&&d),targetTexture:this.createTexture(g,l,u),originalTexture:c||this.createTexture(g,l,u,!c&&d),passes:p.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},C=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,C),p.forEach(function(D){D&&D.applyTo(v)}),function Xi(y){var f=y.targetCanvas,l=y.destinationWidth,u=y.destinationHeight;(f.width!==l||f.height!==u)&&(f.width=l,f.height=u)}(v),this.copyGLTo2D(g,v),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(v.sourceTexture),g.deleteTexture(v.targetTexture),g.deleteFramebuffer(C),o.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(p,d,l,u,o){var h=p.createTexture();return p.bindTexture(p.TEXTURE_2D,h),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,o||p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,o||p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),u?p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,u):p.texImage2D(p.TEXTURE_2D,0,p.RGBA,d,l,0,p.RGBA,p.UNSIGNED_BYTE,null),h},getCachedTexture:function(p,d){if(this.textureCache[p])return this.textureCache[p];var l=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[p]=l,l},evictCachesForKey:function(p){this.textureCache[p]&&(this.gl.deleteTexture(this.textureCache[p]),delete this.textureCache[p])},copyGLTo2D:At,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var p=this.gl,d={renderer:"",vendor:""};if(!p)return d;var l=p.getExtension("WEBGL_debug_renderer_info");if(l){var u=p.getParameter(l.UNMASKED_RENDERER_WEBGL),o=p.getParameter(l.UNMASKED_VENDOR_WEBGL);u&&(d.renderer=u.toLowerCase()),o&&(d.vendor=o.toLowerCase())}return this.gpuInfo=d,d}}}(),function(){"use strict";var y=function(){};function f(){}w.Canvas2dFilterBackend=f,f.prototype={evictCachesForKey:y,dispose:y,clearWebGLCaches:y,resources:{},applyFilters:function(p,d,l,u,o){var h=o.getContext("2d");h.drawImage(d,0,0,l,u);var v={sourceWidth:l,sourceHeight:u,imageData:h.getImageData(0,0,l,u),originalEl:d,originalImageData:h.getImageData(0,0,l,u),canvasEl:o,ctx:h,filterBackend:this};return p.forEach(function(C){C.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==u)&&(o.width=v.imageData.width,o.height=v.imageData.height),h.putImageData(v.imageData,0,0),v}}}(),w.Image=w.Image||{},w.Image.filters=w.Image.filters||{},w.Image.filters.BaseFilter=w.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(y){y&&this.setOptions(y)},setOptions:function(y){for(var f in y)this[f]=y[f]},createProgram:function(y,f,p){f=f||this.fragmentSource,p=p||this.vertexSource,"highp"!==w.webGlPrecision&&(f=f.replace(/precision highp float/g,"precision "+w.webGlPrecision+" float"));var d=y.createShader(y.VERTEX_SHADER);if(y.shaderSource(d,p),y.compileShader(d),!y.getShaderParameter(d,y.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+y.getShaderInfoLog(d));var l=y.createShader(y.FRAGMENT_SHADER);if(y.shaderSource(l,f),y.compileShader(l),!y.getShaderParameter(l,y.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+y.getShaderInfoLog(l));var u=y.createProgram();if(y.attachShader(u,d),y.attachShader(u,l),y.linkProgram(u),!y.getProgramParameter(u,y.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+y.getProgramInfoLog(u));var o=this.getAttributeLocations(y,u),h=this.getUniformLocations(y,u)||{};return h.uStepW=y.getUniformLocation(u,"uStepW"),h.uStepH=y.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:o,uniformLocations:h}},getAttributeLocations:function(y,f){return{aPosition:y.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(y,f,p){var d=f.aPosition,l=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,l),y.enableVertexAttribArray(d),y.vertexAttribPointer(d,2,y.FLOAT,!1,0,0),y.bufferData(y.ARRAY_BUFFER,p,y.STATIC_DRAW)},_setupFrameBuffer:function(y){var p,d,f=y.context;y.passes>1?(d=y.destinationHeight,(y.sourceWidth!==(p=y.destinationWidth)||y.sourceHeight!==d)&&(f.deleteTexture(y.targetTexture),y.targetTexture=y.filterBackend.createTexture(f,p,d)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,y.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(y){y.passes--,y.pass++;var f=y.targetTexture;y.targetTexture=y.sourceTexture,y.sourceTexture=f},isNeutralState:function(){var y=this.mainParameter,f=w.Image.filters[this.type].prototype;if(y){if(Array.isArray(f[y])){for(var p=f[y].length;p--;)if(this[y][p]!==f[y][p])return!1;return!0}return f[y]===this[y]}return!1},applyTo:function(y){y.webgl?(this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y)):this.applyTo2d(y)},retrieveShader:function(y){return y.programCache.hasOwnProperty(this.type)||(y.programCache[this.type]=this.createProgram(y.context)),y.programCache[this.type]},applyToWebGL:function(y){var f=y.context,p=this.retrieveShader(y);f.bindTexture(f.TEXTURE_2D,0===y.pass&&y.originalTexture?y.originalTexture:y.sourceTexture),f.useProgram(p.program),this.sendAttributeData(f,p.attributeLocations,y.aPosition),f.uniform1f(p.uniformLocations.uStepW,1/y.sourceWidth),f.uniform1f(p.uniformLocations.uStepH,1/y.sourceHeight),this.sendUniformData(f,p.uniformLocations),f.viewport(0,0,y.destinationWidth,y.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(y,f,p){y.activeTexture(p),y.bindTexture(y.TEXTURE_2D,f),y.activeTexture(y.TEXTURE0)},unbindAdditionalTexture:function(y,f){y.activeTexture(f),y.bindTexture(y.TEXTURE_2D,null),y.activeTexture(y.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(y){this[this.mainParameter]=y},sendUniformData:function(){},createHelpLayer:function(y){if(!y.helpLayer){var f=document.createElement("canvas");f.width=y.sourceWidth,f.height=y.sourceHeight,y.helpLayer=f}},toObject:function(){var y={type:this.type},f=this.mainParameter;return f&&(y[f]=this[f]),y},toJSON:function(){return this.toObject()}}),w.Image.filters.BaseFilter.fromObject=function(y,f){var p=new w.Image.filters[y.type](y);return f&&f(p),p},function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.ColorMatrix=(0,f.util.createClass)(p.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var c,v,C,D,S,o=l.imageData.data,h=o.length,g=this.matrix,x=this.colorsOnly;for(S=0;S<h;S+=4)c=o[S],v=o[S+1],C=o[S+2],x?(o[S]=c*g[0]+v*g[1]+C*g[2]+255*g[4],o[S+1]=c*g[5]+v*g[6]+C*g[7]+255*g[9],o[S+2]=c*g[10]+v*g[11]+C*g[12]+255*g[14]):(o[S]=c*g[0]+v*g[1]+C*g[2]+(D=o[S+3])*g[3]+255*g[4],o[S+1]=c*g[5]+v*g[6]+C*g[7]+D*g[8]+255*g[9],o[S+2]=c*g[10]+v*g[11]+C*g[12]+D*g[13]+255*g[14],o[S+3]=c*g[15]+v*g[16]+C*g[17]+D*g[18]+255*g[19])},getUniformLocations:function(l,u){return{uColorMatrix:l.getUniformLocation(u,"uColorMatrix"),uConstants:l.getUniformLocation(u,"uConstants")}},sendUniformData:function(l,u){var o=this.matrix,g=[o[4],o[9],o[14],o[19]];l.uniformMatrix4fv(u.uColorMatrix,!1,[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]]),l.uniform4fv(u.uConstants,g)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Brightness=(0,f.util.createClass)(p.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(0!==this.brightness){var h,o=l.imageData.data,g=o.length,c=Math.round(255*this.brightness);for(h=0;h<g;h+=4)o[h]=o[h]+c,o[h+1]=o[h+1]+c,o[h+2]=o[h+2]+c}},getUniformLocations:function(l,u){return{uBrightness:l.getUniformLocation(u,"uBrightness")}},sendUniformData:function(l,u){l.uniform1f(u.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.Image.filters;d.Convolute=(0,f.util.createClass)(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(u){var o=Math.sqrt(this.matrix.length),h=this.type+"_"+o+"_"+(this.opaque?1:0),g=this.fragmentSource[h];return u.programCache.hasOwnProperty(h)||(u.programCache[h]=this.createProgram(u.context,g)),u.programCache[h]},applyTo2d:function(u){var P,j,G,re,ae,he,ge,le,ce,De,de,Se,O,o=u.imageData,h=o.data,g=this.matrix,c=Math.round(Math.sqrt(g.length)),v=Math.floor(c/2),C=o.width,D=o.height,S=u.ctx.createImageData(C,D),x=S.data,M=this.opaque?1:0;for(de=0;de<D;de++)for(De=0;De<C;De++){for(ae=4*(de*C+De),P=0,j=0,G=0,re=0,O=0;O<c;O++)for(Se=0;Se<c;Se++)he=De+Se-v,!((ge=de+O-v)<0||ge>=D||he<0||he>=C)&&(P+=h[le=4*(ge*C+he)]*(ce=g[O*c+Se]),j+=h[le+1]*ce,G+=h[le+2]*ce,M||(re+=h[le+3]*ce));x[ae]=P,x[ae+1]=j,x[ae+2]=G,x[ae+3]=M?h[ae+3]:re}u.imageData=S},getUniformLocations:function(u,o){return{uMatrix:u.getUniformLocation(o,"uMatrix"),uOpaque:u.getUniformLocation(o,"uOpaque"),uHalfSize:u.getUniformLocation(o,"uHalfSize"),uSize:u.getUniformLocation(o,"uSize")}},sendUniformData:function(u,o){u.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return p(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Grayscale=(0,f.util.createClass)(p.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(l){var h,c,o=l.imageData.data,g=o.length,v=this.mode;for(h=0;h<g;h+=4)"average"===v?c=(o[h]+o[h+1]+o[h+2])/3:"lightness"===v?c=(Math.min(o[h],o[h+1],o[h+2])+Math.max(o[h],o[h+1],o[h+2]))/2:"luminosity"===v&&(c=.21*o[h]+.72*o[h+1]+.07*o[h+2]),o[h]=c,o[h+1]=c,o[h+2]=c},retrieveShader:function(l){var u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,this.fragmentSource[this.mode])),l.programCache[u]},getUniformLocations:function(l,u){return{uMode:l.getUniformLocation(u,"uMode")}},sendUniformData:function(l,u){l.uniform1i(u.uMode,1)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Invert=(0,f.util.createClass)(p.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(l){var h,o=l.imageData.data,g=o.length;for(h=0;h<g;h+=4)o[h]=255-o[h],o[h+1]=255-o[h+1],o[h+2]=255-o[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,u){return{uInvert:l.getUniformLocation(u,"uInvert")}},sendUniformData:function(l,u){l.uniform1i(u.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.Image.filters;d.Noise=(0,f.util.createClass)(d.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(u){if(0!==this.noise){var g,c,C,h=u.imageData.data,v=this.noise;for(g=0,c=h.length;g<c;g+=4)C=(.5-Math.random())*v,h[g]+=C,h[g+1]+=C,h[g+2]+=C}},getUniformLocations:function(u,o){return{uNoise:u.getUniformLocation(o,"uNoise"),uSeed:u.getUniformLocation(o,"uSeed")}},sendUniformData:function(u,o){u.uniform1f(o.uNoise,this.noise/255),u.uniform1f(o.uSeed,Math.random())},toObject:function(){return p(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Pixelate=(0,f.util.createClass)(p.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(l){var c,v,C,D,S,x,M,P,j,G,re,u=l.imageData,o=u.data,h=u.height,g=u.width;for(v=0;v<h;v+=this.blocksize)for(C=0;C<g;C+=this.blocksize)for(D=o[c=4*v*g+4*C],S=o[c+1],x=o[c+2],M=o[c+3],G=Math.min(v+this.blocksize,h),re=Math.min(C+this.blocksize,g),P=v;P<G;P++)for(j=C;j<re;j++)o[c=4*P*g+4*j]=D,o[c+1]=S,o[c+2]=x,o[c+3]=M},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(l,u){return{uBlocksize:l.getUniformLocation(u,"uBlocksize"),uStepW:l.getUniformLocation(u,"uStepW"),uStepH:l.getUniformLocation(u,"uStepH")}},sendUniformData:function(l,u){l.uniform1f(u.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,d=f.Image.filters;d.RemoveColor=(0,f.util.createClass)(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(u){var g,v,C,D,h=u.imageData.data,c=255*this.distance,S=new f.Color(this.color).getSource(),x=[S[0]-c,S[1]-c,S[2]-c],M=[S[0]+c,S[1]+c,S[2]+c];for(g=0;g<h.length;g+=4)C=h[g+1],D=h[g+2],(v=h[g])>x[0]&&C>x[1]&&D>x[2]&&v<M[0]&&C<M[1]&&D<M[2]&&(h[g+3]=0)},getUniformLocations:function(u,o){return{uLow:u.getUniformLocation(o,"uLow"),uHigh:u.getUniformLocation(o,"uHigh")}},sendUniformData:function(u,o){var h=new f.Color(this.color).getSource(),g=parseFloat(this.distance),v=[h[0]/255+g,h[1]/255+g,h[2]/255+g,1];u.uniform4fv(o.uLow,[0+h[0]/255-g,0+h[1]/255-g,0+h[2]/255-g,1]),u.uniform4fv(o.uHigh,v)},toObject:function(){return p(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters,d=f.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in l)p[u]=d(p.ColorMatrix,{type:u,matrix:l[u],mainParameter:!1,colorsOnly:!0}),f.Image.filters[u].fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric,p=f.Image.filters;p.BlendColor=(0,f.util.createClass)(p.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(l){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[l]+"}\n}"},retrieveShader:function(l){var o,u=this.type+"_"+this.mode;return l.programCache.hasOwnProperty(u)||(o=this.buildSource(this.mode),l.programCache[u]=this.createProgram(l.context,o)),l.programCache[u]},applyTo2d:function(l){var g,c,v,C,D,S,x,o=l.imageData.data,h=o.length,M=1-this.alpha;g=(x=new f.Color(this.color).getSource())[0]*this.alpha,c=x[1]*this.alpha,v=x[2]*this.alpha;for(var P=0;P<h;P+=4)switch(C=o[P],D=o[P+1],S=o[P+2],this.mode){case"multiply":o[P]=C*g/255,o[P+1]=D*c/255,o[P+2]=S*v/255;break;case"screen":o[P]=255-(255-C)*(255-g)/255,o[P+1]=255-(255-D)*(255-c)/255,o[P+2]=255-(255-S)*(255-v)/255;break;case"add":o[P]=C+g,o[P+1]=D+c,o[P+2]=S+v;break;case"diff":case"difference":o[P]=Math.abs(C-g),o[P+1]=Math.abs(D-c),o[P+2]=Math.abs(S-v);break;case"subtract":o[P]=C-g,o[P+1]=D-c,o[P+2]=S-v;break;case"darken":o[P]=Math.min(C,g),o[P+1]=Math.min(D,c),o[P+2]=Math.min(S,v);break;case"lighten":o[P]=Math.max(C,g),o[P+1]=Math.max(D,c),o[P+2]=Math.max(S,v);break;case"overlay":o[P]=g<128?2*C*g/255:255-2*(255-C)*(255-g)/255,o[P+1]=c<128?2*D*c/255:255-2*(255-D)*(255-c)/255,o[P+2]=v<128?2*S*v/255:255-2*(255-S)*(255-v)/255;break;case"exclusion":o[P]=g+C-2*g*C/255,o[P+1]=c+D-2*c*D/255,o[P+2]=v+S-2*v*S/255;break;case"tint":o[P]=g+C*M,o[P+1]=c+D*M,o[P+2]=v+S*M}},getUniformLocations:function(l,u){return{uColor:l.getUniformLocation(u,"uColor")}},sendUniformData:function(l,u){var o=new f.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,l.uniform4fv(u.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric,p=f.Image.filters;p.BlendImage=(0,f.util.createClass)(p.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(l){var u=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(u)||(l.programCache[u]=this.createProgram(l.context,o)),l.programCache[u]},applyToWebGL:function(l){var u=l.context,o=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(u,o,u.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(l,u){return l.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var l=this.image;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/l._element.width,-l.top/l._element.height,1]},applyTo2d:function(l){var C,D,S,x,M,P,j,G,re,ae,ge,u=l.imageData,o=l.filterBackend.resources,h=u.data,g=h.length,c=u.width,v=u.height,he=this.image;o.blendImage||(o.blendImage=f.util.createCanvasElement()),ae=(re=o.blendImage).getContext("2d"),re.width!==c||re.height!==v?(re.width=c,re.height=v):ae.clearRect(0,0,c,v),ae.setTransform(he.scaleX,0,0,he.scaleY,he.left,he.top),ae.drawImage(he._element,0,0,c,v),ge=ae.getImageData(0,0,c,v).data;for(var le=0;le<g;le+=4)switch(M=h[le],P=h[le+1],j=h[le+2],G=h[le+3],C=ge[le],D=ge[le+1],S=ge[le+2],x=ge[le+3],this.mode){case"multiply":h[le]=M*C/255,h[le+1]=P*D/255,h[le+2]=j*S/255,h[le+3]=G*x/255;break;case"mask":h[le+3]=x}},getUniformLocations:function(l,u){return{uTransformMatrix:l.getUniformLocation(u,"uTransformMatrix"),uImage:l.getUniformLocation(u,"uImage")}},sendUniformData:function(l,u){var o=this.calculateMatrix();l.uniform1i(u.uImage,1),l.uniformMatrix3fv(u.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(l,u){f.Image.fromObject(l.image,function(o){var h=f.util.object.clone(l);h.image=o,u(new f.Image.filters.BlendImage(h))})}}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=Math.pow,d=Math.floor,l=Math.sqrt,u=Math.abs,o=Math.round,h=Math.sin,g=Math.ceil,c=f.Image.filters;c.Resize=(0,f.util.createClass)(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,D){return{uDelta:C.getUniformLocation(D,"uDelta"),uTaps:C.getUniformLocation(D,"uTaps")}},sendUniformData:function(C,D){C.uniform2fv(D.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(D.uTaps,this.taps)},retrieveShader:function(C){var D=this.getFilterWindow(),S=this.type+"_"+D;if(!C.programCache.hasOwnProperty(S)){var x=this.generateShader(D);C.programCache[S]=this.createProgram(C.context,x)}return C.programCache[S]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),D=this.tempScale,S=this.getFilterWindow(),x=new Array(S),M=1;M<=S;M++)x[M-1]=C(M*D);return x},generateShader:function(x){for(var D=new Array(x),S=this.fragmentSourceTOP,M=1;M<=x;M++)D[M-1]=M+".0 * uDelta";return S+="uniform float uTaps["+x+"];\n",S+="void main() {\n",S+="  vec4 color = texture2D(uTexture, vTexCoord);\n",S+="  float sum = 1.0;\n",D.forEach(function(P,j){S+="  color += texture2D(uTexture, vTexCoord + "+P+") * uTaps["+j+"];\n",S+="  color += texture2D(uTexture, vTexCoord - "+P+") * uTaps["+j+"];\n",S+="  sum += 2.0 * uTaps["+j+"];\n"}),S+="  gl_FragColor = color / sum;\n",S+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(C){return function(D){if(D>=C||D<=-C)return 0;if(D<1.1920929e-7&&D>-1.1920929e-7)return 1;var S=(D*=Math.PI)/C;return h(D)/D*h(S)/S}},applyTo2d:function(C){var D=C.imageData,S=this.scaleX,x=this.scaleY;this.rcpScaleX=1/S,this.rcpScaleY=1/x;var re,M=D.width,P=D.height,j=o(M*S),G=o(P*x);"sliceHack"===this.resizeType?re=this.sliceByTwo(C,M,P,j,G):"hermite"===this.resizeType?re=this.hermiteFastResize(C,M,P,j,G):"bilinear"===this.resizeType?re=this.bilinearFiltering(C,M,P,j,G):"lanczos"===this.resizeType&&(re=this.lanczosResize(C,M,P,j,G)),C.imageData=re},sliceByTwo:function(C,D,S,x,M){var le,ce,P=C.imageData,j=.5,G=!1,re=!1,ae=D*j,he=S*j,ge=f.filterBackend.resources,De=0,de=0,Se=D,O=0;for(ge.sliceByTwo||(ge.sliceByTwo=document.createElement("canvas")),((le=ge.sliceByTwo).width<1.5*D||le.height<S)&&(le.width=1.5*D,le.height=S),(ce=le.getContext("2d")).clearRect(0,0,1.5*D,S),ce.putImageData(P,0,0),x=d(x),M=d(M);!G||!re;)D=ae,S=he,x<d(ae*j)?ae=d(ae*j):(ae=x,G=!0),M<d(he*j)?he=d(he*j):(he=M,re=!0),ce.drawImage(le,De,de,D,S,Se,O,ae,he),De=Se,de=O,O+=he;return ce.getImageData(De,de,x,M)},lanczosResize:function(C,D,S,x,M){var j=C.imageData.data,G=C.ctx.createImageData(x,M),re=G.data,ae=this.lanczosCreate(this.lanczosLobes),he=this.rcpScaleX,ge=this.rcpScaleY,le=2/this.rcpScaleX,ce=2/this.rcpScaleY,De=g(he*this.lanczosLobes/2),de=g(ge*this.lanczosLobes/2),Se={},O={},F={};return function P(L){var k,$,R,I,B,H,z,W,ee,se,ue;for(O.x=(L+.5)*he,F.x=d(O.x),k=0;k<M;k++){for(O.y=(k+.5)*ge,F.y=d(O.y),B=0,H=0,z=0,W=0,ee=0,$=F.x-De;$<=F.x+De;$++)if(!($<0||$>=D)){se=d(1e3*u($-O.x)),Se[se]||(Se[se]={});for(var Y=F.y-de;Y<=F.y+de;Y++)Y<0||Y>=S||(ue=d(1e3*u(Y-O.y)),Se[se][ue]||(Se[se][ue]=ae(l(p(se*le,2)+p(ue*ce,2))/1e3)),(R=Se[se][ue])>0&&(B+=R,H+=R*j[I=4*(Y*D+$)],z+=R*j[I+1],W+=R*j[I+2],ee+=R*j[I+3]))}re[I=4*(k*x+L)]=H/B,re[I+1]=z/B,re[I+2]=W/B,re[I+3]=ee/B}return++L<x?P(L):G}(0)},bilinearFiltering:function(C,D,S,x,M){var ae,he,ge,le,ce,De,de,F,O=0,L=this.rcpScaleX,k=this.rcpScaleY,$=4*(D-1),I=C.imageData.data,B=C.ctx.createImageData(x,M),H=B.data;for(ge=0;ge<M;ge++)for(le=0;le<x;le++)for(ce=L*le-(ae=d(L*le)),De=k*ge-(he=d(k*ge)),F=4*(he*D+ae),de=0;de<4;de++)H[O++]=I[F+de]*(1-ce)*(1-De)+I[F+4+de]*ce*(1-De)+I[F+$+de]*De*(1-ce)+I[F+$+4+de]*ce*De;return B},hermiteFastResize:function(C,D,S,x,M){for(var P=this.rcpScaleX,j=this.rcpScaleY,G=g(P/2),re=g(j/2),he=C.imageData.data,ge=C.ctx.createImageData(x,M),le=ge.data,ce=0;ce<M;ce++)for(var De=0;De<x;De++){for(var de=4*(De+ce*x),Se=0,O=0,F=0,L=0,k=0,$=0,R=0,I=(ce+.5)*j,B=d(ce*j);B<(ce+1)*j;B++)for(var H=u(I-(B+.5))/re,z=(De+.5)*P,W=H*H,ee=d(De*P);ee<(De+1)*P;ee++){var se=u(z-(ee+.5))/G,ue=l(W+se*se);ue>1&&ue<-1||(Se=2*ue*ue*ue-3*ue*ue+1)>0&&(R+=Se*he[3+(se=4*(ee+B*D))],F+=Se,he[se+3]<255&&(Se=Se*he[se+3]/250),L+=Se*he[se],k+=Se*he[se+1],$+=Se*he[se+2],O+=Se)}le[de]=L/O,le[de+1]=k/O,le[de+2]=$/O,le[de+3]=R/F}return ge},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Contrast=(0,f.util.createClass)(p.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(0!==this.contrast){var o,h=l.imageData.data,g=h.length,c=Math.floor(255*this.contrast),v=259*(c+255)/(255*(259-c));for(o=0;o<g;o+=4)h[o]=v*(h[o]-128)+128,h[o+1]=v*(h[o+1]-128)+128,h[o+2]=v*(h[o+2]-128)+128}},getUniformLocations:function(l,u){return{uContrast:l.getUniformLocation(u,"uContrast")}},sendUniformData:function(l,u){l.uniform1f(u.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Saturation=(0,f.util.createClass)(p.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(0!==this.saturation){var c,v,o=l.imageData.data,h=o.length,g=-this.saturation;for(c=0;c<h;c+=4)v=Math.max(o[c],o[c+1],o[c+2]),o[c]+=v!==o[c]?(v-o[c])*g:0,o[c+1]+=v!==o[c+1]?(v-o[c+1])*g:0,o[c+2]+=v!==o[c+2]?(v-o[c+2])*g:0}},getUniformLocations:function(l,u){return{uSaturation:l.getUniformLocation(u,"uSaturation")}},sendUniformData:function(l,u){l.uniform1f(u.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Vibrance=(0,f.util.createClass)(p.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(0!==this.vibrance){var c,v,D,o=l.imageData.data,h=o.length,g=-this.vibrance;for(c=0;c<h;c+=4)v=Math.max(o[c],o[c+1],o[c+2]),D=2*Math.abs(v-(o[c]+o[c+1]+o[c+2])/3)/255*g,o[c]+=v!==o[c]?(v-o[c])*D:0,o[c+1]+=v!==o[c+1]?(v-o[c+1])*D:0,o[c+2]+=v!==o[c+2]?(v-o[c+2])*D:0}},getUniformLocations:function(l,u){return{uVibrance:l.getUniformLocation(u,"uVibrance")}},sendUniformData:function(l,u){l.uniform1f(u.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Blur=(0,f.util.createClass)(p.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var o,h,u=l.filterBackend.resources,g=l.imageData.width,c=l.imageData.height;u.blurLayer1||(u.blurLayer1=f.util.createCanvasElement(),u.blurLayer2=f.util.createCanvasElement()),h=u.blurLayer2,((o=u.blurLayer1).width!==g||o.height!==c)&&(h.width=o.width=g,h.height=o.height=c);var S,x,M,P,v=o.getContext("2d"),C=h.getContext("2d"),D=15,j=.06*this.blur*.5;for(v.putImageData(l.imageData,0,0),C.clearRect(0,0,g,c),P=-D;P<=D;P++)M=j*(x=P/D)*g+(S=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(x),C.drawImage(o,M,S),v.drawImage(h,0,0),C.globalAlpha=1,C.clearRect(0,0,h.width,h.height);for(P=-D;P<=D;P++)M=j*(x=P/D)*c+(S=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(x),C.drawImage(o,S,M),v.drawImage(h,0,0),C.globalAlpha=1,C.clearRect(0,0,h.width,h.height);l.ctx.drawImage(o,0,0);var G=l.ctx.getImageData(0,0,o.width,o.height);return v.globalAlpha=1,v.clearRect(0,0,o.width,o.height),G},getUniformLocations:function(l,u){return{delta:l.getUniformLocation(u,"uDelta")}},sendUniformData:function(l,u){var o=this.chooseRightDelta();l.uniform2fv(u.delta,o)},chooseRightDelta:function(){var o,l=1,u=[0,0];return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),o=l*this.blur*.12,this.horizontal?u[0]=o:u[1]=o,u}}),p.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Gamma=(0,f.util.createClass)(p.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],p.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var D,o=l.imageData.data,h=this.gamma,g=o.length,c=1/h[0],v=1/h[1],C=1/h[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),D=0,g=256;D<g;D++)this.rVals[D]=255*Math.pow(D/255,c),this.gVals[D]=255*Math.pow(D/255,v),this.bVals[D]=255*Math.pow(D/255,C);for(D=0,g=o.length;D<g;D+=4)o[D]=this.rVals[o[D]],o[D+1]=this.gVals[o[D+1]],o[D+2]=this.bVals[o[D+2]]},getUniformLocations:function(l,u){return{uGamma:l.getUniformLocation(u,"uGamma")}},sendUniformData:function(l,u){l.uniform3fv(u.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Composed=(0,f.util.createClass)(p.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(l)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(l,u){var h=(l.subFilters||[]).map(function(c){return new f.Image.filters[c.type](c)}),g=new f.Image.filters.Composed({subFilters:h});return u&&u(g),g}}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.HueRotation=(0,f.util.createClass)(p.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,u=f.util.cos(l),o=f.util.sin(l),h=1/3,g=Math.sqrt(h)*o,c=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+c/3,this.matrix[1]=h*c-g,this.matrix[2]=h*c+g,this.matrix[5]=h*c+g,this.matrix[6]=u+h*c,this.matrix[7]=h*c-g,this.matrix[10]=h*c-g,this.matrix[11]=h*c+g,this.matrix[12]=u+h*c},isNeutralState:function(l){return this.calculateMatrix(),p.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),p.BaseFilter.prototype.applyTo.call(this,l)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(Ne),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.clone;if(f.Text)f.warn("fabric.Text is already defined");else{var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(d),cacheProperties:f.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,u){this.styles=u&&u.styles||{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=f.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,u,h,g,c,v,C=0,D=this._textLines.length;C<D;C++)if(("justify"===this.textAlign||C!==D-1&&!this.isEndOfWrapping(C))&&(h=0,g=this._textLines[C],(u=this.getLineWidth(C))<this.width&&(v=this.textLines[C].match(this._reSpacesAndTabs)))){l=(this.width-u)/v.length;for(var S=0,x=g.length;S<=x;S++)c=this.__charBounds[C][S],this._reSpaceAndTab.test(g[S])?(c.width+=l,c.kernedWidth+=l,c.left+=h,h+=l):c.left+=h}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return l.width+=u*l.zoomX,l.height+=u*l.zoomY,l},_render:function(l){var u=this.path;u&&!u.isNotVisible()&&u._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){"stroke"===this.paintFirst?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,u,o){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom"}l.font=this._getFontDeclaration(u,o)},calcTextWidth:function(){for(var l=this.getLineWidth(0),u=1,o=this._textLines.length;u<o;u++){var h=this.getLineWidth(u);h>l&&(l=h)}return l},_renderTextLine:function(l,u,o,h,g,c){this._renderChars(l,u,o,h,g,c)},_renderTextLinesBackground:function(l){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var u,o,g,c,x,M,j,h=l.fillStyle,v=this._getLeftOffset(),C=this._getTopOffset(),D=0,S=0,P=this.path,G=0,re=this._textLines.length;G<re;G++)if(u=this.getHeightOfLine(G),this.textBackgroundColor||this.styleHas("textBackgroundColor",G)){g=this._textLines[G],o=this._getLineLeftOffset(G),S=0,D=0,c=this.getValueOfPropertyAt(G,0,"textBackgroundColor");for(var ae=0,he=g.length;ae<he;ae++)x=this.__charBounds[G][ae],M=this.getValueOfPropertyAt(G,ae,"textBackgroundColor"),P?(l.save(),l.translate(x.renderLeft,x.renderTop),l.rotate(x.angle),l.fillStyle=M,M&&l.fillRect(-x.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),x.width,u/this.lineHeight),l.restore()):M!==c?(j=v+o+D,"rtl"===this.direction&&(j=this.width-j-S),l.fillStyle=c,c&&l.fillRect(j,C,S,u/this.lineHeight),D=x.left,S=x.width,c=M):S+=x.kernedWidth;M&&!P&&(j=v+o+D,"rtl"===this.direction&&(j=this.width-j-S),l.fillStyle=M,l.fillRect(j,C,S,u/this.lineHeight)),C+=u}else C+=u;l.fillStyle=h,this._removeShadow(l)}},getFontCache:function(l){var u=l.fontFamily.toLowerCase();f.charWidthsCache[u]||(f.charWidthsCache[u]={});var o=f.charWidthsCache[u],h=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return o[h]||(o[h]={}),o[h]},_measureChar:function(l,u,o,h){var S,x,M,j,g=this.getFontCache(u),C=o+l,D=this._getFontDeclaration(u)===this._getFontDeclaration(h),P=u.fontSize/this.CACHE_FONT_SIZE;if(o&&void 0!==g[o]&&(M=g[o]),void 0!==g[l]&&(j=S=g[l]),D&&void 0!==g[C]&&(j=(x=g[C])-M),void 0===S||void 0===M||void 0===x){var G=this.getMeasuringContext();this._setTextStyles(G,u,!0)}return void 0===S&&(j=S=G.measureText(l).width,g[l]=S),void 0===M&&D&&o&&(M=G.measureText(o).width,g[o]=M),D&&void 0===x&&(x=G.measureText(C).width,g[C]=x,j=x-M),{width:S*P,kernedWidth:j*P}},getHeightOfChar:function(l,u){return this.getValueOfPropertyAt(l,u,"fontSize")},measureLine:function(l){var u=this._measureLine(l);return 0!==this.charSpacing&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(l){var o,h,c,v,x,M,u=0,g=this._textLines[l],D=new Array(g.length),S=0,P=this.path,j="right"===this.pathSide;for(this.__charBounds[l]=D,o=0;o<g.length;o++)v=this._getGraphemeBox(h=g[o],l,o,c),D[o]=v,u+=v.kernedWidth,c=h;if(D[o]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},P){switch(M=P.segmentsInfo[P.segmentsInfo.length-1].length,(x=f.util.getPointOnPath(P.path,0,P.segmentsInfo)).x+=P.pathOffset.x,x.y+=P.pathOffset.y,this.textAlign){case"left":S=j?M-u:0;break;case"center":S=(M-u)/2;break;case"right":S=j?0:M-u}for(S+=this.pathStartOffset*(j?-1:1),o=j?g.length-1:0;j?o>=0:o<g.length;j?o--:o++)S>M?S%=M:S<0&&(S+=M),this._setGraphemeOnPath(S,v=D[o],x),S+=v.kernedWidth}return{width:u,numOfSpaces:0}},_setGraphemeOnPath:function(l,u,o){var g=this.path,c=f.util.getPointOnPath(g.path,l+u.kernedWidth/2,g.segmentsInfo);u.renderLeft=c.x-o.x,u.renderTop=c.y-o.y,u.angle=c.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(l,u,o,h,g){var x,c=this.getCompleteStyleDeclaration(u,o),v=h?this.getCompleteStyleDeclaration(u,o-1):{},C=this._measureChar(l,c,h,v),D=C.kernedWidth,S=C.width;0!==this.charSpacing&&(S+=x=this._getWidthOfCharSpacing(),D+=x);var M={width:S,left:0,height:c.fontSize,kernedWidth:D,deltaY:c.deltaY};if(o>0&&!g){var P=this.__charBounds[u][o-1];M.left=P.left+P.width+C.kernedWidth-C.width}return M},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var u=this._textLines[l],o=this.getHeightOfChar(l,0),h=1,g=u.length;h<g;h++)o=Math.max(this.getHeightOfChar(l,h),o);return this.__lineHeights[l]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,u=0,o=0,h=this._textLines.length;o<h;o++)l=this.getHeightOfLine(o),u+=o===h-1?l/this.lineHeight:l;return u},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,u){l.save();for(var o=0,h=this._getLeftOffset(),g=this._getTopOffset(),c=0,v=this._textLines.length;c<v;c++){var C=this.getHeightOfLine(c),D=C/this.lineHeight,S=this._getLineLeftOffset(c);this._renderTextLine(u,l,this._textLines[c],h+S,g+o+D,c),o+=C}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,u,o,h,g,c){var D,S,M,j,v=this.getHeightOfLine(c),C=-1!==this.textAlign.indexOf("justify"),x="",P=0,G=this.path,re=!C&&0===this.charSpacing&&this.isEmptyStyles(c)&&!G,ae="ltr"===this.direction,he="ltr"===this.direction?1:-1,le=u.canvas.getAttribute("dir");if(u.save(),le!==this.direction&&(u.canvas.setAttribute("dir",ae?"ltr":"rtl"),u.direction=ae?"ltr":"rtl",u.textAlign=ae?"left":"right"),g-=v*this._fontSizeFraction/this.lineHeight,re)return this._renderChar(l,u,c,0,o.join(""),h,g,v),void u.restore();for(var ce=0,De=o.length-1;ce<=De;ce++)j=ce===De||this.charSpacing||G,x+=o[ce],M=this.__charBounds[c][ce],0===P?(h+=he*(M.kernedWidth-M.width),P+=M.width):P+=M.kernedWidth,C&&!j&&this._reSpaceAndTab.test(o[ce])&&(j=!0),j||(D=D||this.getCompleteStyleDeclaration(c,ce),S=this.getCompleteStyleDeclaration(c,ce+1),j=f.util.hasStyleChanged(D,S,!1)),j&&(G?(u.save(),u.translate(M.renderLeft,M.renderTop),u.rotate(M.angle),this._renderChar(l,u,c,ce,x,-P/2,0,v),u.restore()):this._renderChar(l,u,c,ce,x,h,g,v),x="",D=S,h+=he*P,P=0);u.restore()},_applyPatternGradientTransformText:function(l){var o,u=f.util.createCanvasElement(),h=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return u.width=h,u.height=g,(o=u.getContext("2d")).beginPath(),o.moveTo(0,0),o.lineTo(h,0),o.lineTo(h,g),o.lineTo(0,g),o.closePath(),o.translate(h/2,g/2),o.fillStyle=l.toLive(o),this._applyPatternGradientTransform(o,l),o.fill(),o.createPattern(u,"no-repeat")},handleFiller:function(l,u,o){var h,g;return o.toLive?"percentage"===o.gradientUnits||o.gradientTransform||o.patternTransform?(l.translate(h=-this.width/2,g=-this.height/2),l[u]=this._applyPatternGradientTransformText(o),{offsetX:h,offsetY:g}):(l[u]=o.toLive(l,this),this._applyPatternGradientTransform(l,o)):(l[u]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,u){return l.lineWidth=u.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",u.stroke)},_setFillStyles:function(l,u){return this.handleFiller(l,"fillStyle",u.fill)},_renderChar:function(l,u,o,h,g,c,v){var M,P,C=this._getStyleDeclaration(o,h),D=this.getCompleteStyleDeclaration(o,h),S="fillText"===l&&D.fill,x="strokeText"===l&&D.stroke&&D.strokeWidth;!x&&!S||(u.save(),S&&(M=this._setFillStyles(u,D)),x&&(P=this._setStrokeStyles(u,D)),u.font=this._getFontDeclaration(D),C&&C.textBackgroundColor&&this._removeShadow(u),C&&C.deltaY&&(v+=C.deltaY),S&&u.fillText(g,c-M.offsetX,v-M.offsetY),x&&u.strokeText(g,c-P.offsetX,v-P.offsetY),u.restore())},setSuperscript:function(l,u){return this._setScript(l,u,this.superscript)},setSubscript:function(l,u){return this._setScript(l,u,this.subscript)},_setScript:function(l,u,o){var h=this.get2DCursorLocation(l,!0),g=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),c=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY");return this.setSelectionStyles({fontSize:g*o.size,deltaY:c+g*o.baseline},l,u),this},_getLineLeftOffset:function(l){var u=this.getLineWidth(l),o=this.width-u,h=this.textAlign,g=this.direction,c=0,v=this.isEndOfWrapping(l);return"justify"===h||"justify-center"===h&&!v||"justify-right"===h&&!v||"justify-left"===h&&!v?0:("center"===h&&(c=o/2),"right"===h&&(c=o),"justify-center"===h&&(c=o/2),"justify-right"===h&&(c=o),"rtl"===g&&(c-=o),c)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(void 0!==this.__lineWidths[l])return this.__lineWidths[l];var o=this.measureLine(l).width;return this.__lineWidths[l]=o,o},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,u,o){var h=this._getStyleDeclaration(l,u);return h&&typeof h[o]<"u"?h[o]:this[o]},_renderTextDecoration:function(l,u){if(this[u]||this.styleHas(u)){for(var o,h,g,c,v,C,D,S,P,j,G,re,ae,he,ge,le,x=this._getLeftOffset(),M=this._getTopOffset(),ce=this.path,De=this._getWidthOfCharSpacing(),de=this.offsets[u],Se=0,O=this._textLines.length;Se<O;Se++)if(o=this.getHeightOfLine(Se),this[u]||this.styleHas(u,Se)){D=this._textLines[Se],he=o/this.lineHeight,c=this._getLineLeftOffset(Se),j=0,G=0,S=this.getValueOfPropertyAt(Se,0,u),le=this.getValueOfPropertyAt(Se,0,"fill"),P=M+he*(1-this._fontSizeFraction),h=this.getHeightOfChar(Se,0),v=this.getValueOfPropertyAt(Se,0,"deltaY");for(var F=0,L=D.length;F<L;F++)if(re=this.__charBounds[Se][F],ae=this.getValueOfPropertyAt(Se,F,u),ge=this.getValueOfPropertyAt(Se,F,"fill"),g=this.getHeightOfChar(Se,F),C=this.getValueOfPropertyAt(Se,F,"deltaY"),ce&&ae&&ge)l.save(),l.fillStyle=le,l.translate(re.renderLeft,re.renderTop),l.rotate(re.angle),l.fillRect(-re.kernedWidth/2,de*g+C,re.kernedWidth,this.fontSize/15),l.restore();else if((ae!==S||ge!==le||g!==h||C!==v)&&G>0){var k=x+c+j;"rtl"===this.direction&&(k=this.width-k-G),S&&le&&(l.fillStyle=le,l.fillRect(k,P+de*h+v,G,this.fontSize/15)),j=re.left,G=re.width,S=ae,le=ge,h=g,v=C}else G+=re.kernedWidth;k=x+c+j,"rtl"===this.direction&&(k=this.width-k-G),l.fillStyle=ge,ae&&ge&&l.fillRect(k,P+de*h+v,G-De,this.fontSize/15),M+=o}else M+=o;this._removeShadow(l)}},_getFontDeclaration:function(l,u){var o=l||this,h=this.fontFamily,g=f.Text.genericFonts.indexOf(h.toLowerCase())>-1,c=void 0===h||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||g?o.fontFamily:'"'+o.fontFamily+'"';return[f.isLikelyNode?o.fontWeight:o.fontStyle,f.isLikelyNode?o.fontStyle:o.fontWeight,u?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",c].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var u=l.split(this._reNewline),o=new Array(u.length),h=["\n"],g=[],c=0;c<u.length;c++)o[c]=f.util.string.graphemeSplit(u[c]),g=g.concat(o[c],h);return g.pop(),{_unwrappedLines:o,lines:u,graphemeText:g,graphemeLines:o}},toObject:function(l){var u=d.concat(l),o=this.callSuper("toObject",u);return o.styles=f.util.stylesToArray(this.styles,this.text),o.path&&(o.path=this.path.toObject()),o},set:function(l,u){this.callSuper("set",l,u);var o=!1,h=!1;if("object"==typeof l)for(var g in l)"path"===g&&this.setPathInfo(),o=o||-1!==this._dimensionAffectingProps.indexOf(g),h=h||"path"===g;else o=-1!==this._dimensionAffectingProps.indexOf(l),h="path"===l;return h&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(l,u,o){if(!l)return u(null);var h=f.parseAttributes(l,f.Text.ATTRIBUTE_NAMES),g=h.textAnchor||"left";if((o=f.util.object.extend(o?p(o):{},h)).top=o.top||0,o.left=o.left||0,h.textDecoration){var c=h.textDecoration;-1!==c.indexOf("underline")&&(o.underline=!0),-1!==c.indexOf("overline")&&(o.overline=!0),-1!==c.indexOf("line-through")&&(o.linethrough=!0),delete o.textDecoration}"dx"in h&&(o.left+=h.dx),"dy"in h&&(o.top+=h.dy),"fontSize"in o||(o.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&null!==l.firstChild&&"data"in l.firstChild&&null!==l.firstChild.data&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=o.strokeWidth;o.strokeWidth=0;var D=new f.Text(v,o),S=D.getScaledHeight()/D.height,M=((D.height+D.strokeWidth)*D.lineHeight-D.height)*S,P=D.getScaledHeight()+M,j=0;"center"===g&&(j=D.getScaledWidth()/2),"right"===g&&(j=D.getScaledWidth()),D.set({left:D.left-j,top:D.top-(P-D.fontSize*(.07+D._fontSizeFraction))/D.lineHeight,strokeWidth:typeof C<"u"?C:1}),u(D)},f.Text.fromObject=function(l,u){var o=p(l),h=l.path;return delete o.path,f.Object._fromObject("Text",o,function(g){g.styles=f.util.stylesFromArray(l.styles,l.text),h?f.Object._fromObject("Path",h,function(c){g.set("path",c),u(g)},"path"):u(g)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}}(Ne),w.util.object.extend(w.Text.prototype,{isEmptyStyles:function(y){if(!this.styles||typeof y<"u"&&!this.styles[y])return!0;var f=typeof y>"u"?this.styles:{line:this.styles[y]};for(var p in f)for(var d in f[p])for(var l in f[p][d])return!1;return!0},styleHas:function(y,f){if(!this.styles||!y||""===y||typeof f<"u"&&!this.styles[f])return!1;var p=typeof f>"u"?this.styles:{0:this.styles[f]};for(var d in p)for(var l in p[d])if(typeof p[d][l][y]<"u")return!0;return!1},cleanStyle:function(y){if(!this.styles||!y||""===y)return!1;var d,l,f=this.styles,p=0,u=!0,o=0;for(var g in f){for(var c in d=0,f[g]){var h;p++,(h=f[g][c]).hasOwnProperty(y)?(l?h[y]!==l&&(u=!1):l=h[y],h[y]===this[y]&&delete h[y]):u=!1,0!==Object.keys(h).length?d++:delete f[g][c]}0===d&&delete f[g]}for(var C=0;C<this._textLines.length;C++)o+=this._textLines[C].length;u&&p===o&&(this[y]=l,this.removeStyle(y))},removeStyle:function(y){if(this.styles&&y&&""!==y){var p,d,l,f=this.styles;for(d in f){for(l in p=f[d])delete p[l][y],0===Object.keys(p[l]).length&&delete p[l];0===Object.keys(p).length&&delete f[d]}}},_extendStyles:function(y,f){var p=this.get2DCursorLocation(y);this._getLineStyle(p.lineIndex)||this._setLineStyle(p.lineIndex),this._getStyleDeclaration(p.lineIndex,p.charIndex)||this._setStyleDeclaration(p.lineIndex,p.charIndex,{}),w.util.object.extend(this._getStyleDeclaration(p.lineIndex,p.charIndex),f)},get2DCursorLocation:function(y,f){typeof y>"u"&&(y=this.selectionStart);for(var p=f?this._unwrappedTextLines:this._textLines,d=p.length,l=0;l<d;l++){if(y<=p[l].length)return{lineIndex:l,charIndex:y};y-=p[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:p[l-1].length<y?p[l-1].length:y}},getSelectionStyles:function(y,f,p){typeof y>"u"&&(y=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||y);for(var d=[],l=y;l<f;l++)d.push(this.getStyleAtPosition(l,p));return d},getStyleAtPosition:function(y,f){var p=this.get2DCursorLocation(y);return(f?this.getCompleteStyleDeclaration(p.lineIndex,p.charIndex):this._getStyleDeclaration(p.lineIndex,p.charIndex))||{}},setSelectionStyles:function(y,f,p){typeof f>"u"&&(f=this.selectionStart||0),typeof p>"u"&&(p=this.selectionEnd||f);for(var d=f;d<p;d++)this._extendStyles(d,y);return this._forceClearCache=!0,this},_getStyleDeclaration:function(y,f){var p=this.styles&&this.styles[y];return p?p[f]:null},getCompleteStyleDeclaration:function(y,f){for(var l,p=this._getStyleDeclaration(y,f)||{},d={},u=0;u<this._styleProperties.length;u++)d[l=this._styleProperties[u]]=typeof p[l]>"u"?this[l]:p[l];return d},_setStyleDeclaration:function(y,f,p){this.styles[y][f]=p},_deleteStyleDeclaration:function(y,f){delete this.styles[y][f]},_getLineStyle:function(y){return!!this.styles[y]},_setLineStyle:function(y){this.styles[y]={}},_deleteLineStyle:function(y){delete this.styles[y]}}),function(){function y(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}w.IText=w.util.createClass(w.Text,w.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,p){this.callSuper("initialize",f,p),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,p){this[f]!==p&&(this._fireSelectionChanged(),this[f]=p),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var p=this.canvas.contextTop,d=this.canvas.viewportTransform;p.save(),p.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(p),this._clearTextArea(p),f||p.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var f=this._getCursorBoundaries(),p=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,p):this.renderSelection(f,p),p.restore()}},_clearTextArea:function(f){var p=this.width+4,d=this.height+4;f.clearRect(-p/2,-d/2,p,d)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var p=this._getLeftOffset(),d=this._getTopOffset(),l=this._getCursorBoundariesOffsets(f);return{left:p,top:d,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var p,d,l,h,u=0,o=0,g=this.get2DCursorLocation(f);l=g.charIndex,d=g.lineIndex;for(var c=0;c<d;c++)u+=this.getHeightOfLine(c);p=this._getLineLeftOffset(d);var v=this.__charBounds[d][l];return v&&(o=v.left),0!==this.charSpacing&&l===this._textLines[d].length&&(o-=this._getWidthOfCharSpacing()),h={top:u,left:p+(o>0?o:0)},"rtl"===this.direction&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(f,p){var d=this.get2DCursorLocation(),l=d.lineIndex,u=d.charIndex>0?d.charIndex-1:0,o=this.getValueOfPropertyAt(l,u,"fontSize"),h=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/h,c=f.topOffset,v=this.getValueOfPropertyAt(l,u,"deltaY");c+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,p),p.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,u,"fill"),p.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,p.fillRect(f.left+f.leftOffset-g/2,c+f.top+v,g,o)},renderSelection:function(f,p){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(d),h=this.get2DCursorLocation(l),g=o.lineIndex,c=h.lineIndex,v=o.charIndex<0?0:o.charIndex,C=h.charIndex<0?0:h.charIndex,D=g;D<=c;D++){var M,S=this._getLineLeftOffset(D)||0,x=this.getHeightOfLine(D),P=0,j=0;if(D===g&&(P=this.__charBounds[g][v].left),D>=g&&D<c)j=u&&!this.isEndOfWrapping(D)?this.width:this.getLineWidth(D)||5;else if(D===c)if(0===C)j=this.__charBounds[c][C].left;else{var G=this._getWidthOfCharSpacing();j=this.__charBounds[c][C-1].left+this.__charBounds[c][C-1].width-G}M=x,(this.lineHeight<1||D===c&&this.lineHeight>1)&&(x/=this.lineHeight);var re=f.left+S+P,ae=j-P,he=x,ge=0;this.inCompositionMode?(p.fillStyle=this.compositionColor||"black",he=1,ge=x):p.fillStyle=this.selectionColor,"rtl"===this.direction&&(re=this.width-re-ae),p.fillRect(re,f.top+f.topOffset+ge,ae,he),f.topOffset+=M}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0);return{l:f.lineIndex,c:f.charIndex>0?f.charIndex-1:0}}}),w.IText.fromObject=function(f,p){var d=w.util.stylesFromArray(f.styles,f.text),l=Object.assign({},f,{styles:d});if(y(l),l.styles)for(var u in l.styles)for(var o in l.styles[u])y(l.styles[u][o]);w.Object._fromObject("IText",l,p,"text")}}(),function(){var y=w.util.object.clone;w.util.object.extend(w.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var p=f.canvas;p&&(p._hasITextHandlers||(p._hasITextHandlers=!0,f._initCanvasHandlers(p)),p._iTextInstances=p._iTextInstances||[],p._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var p=f.canvas;p&&(p._iTextInstances=p._iTextInstances||[],w.util.removeFromArray(p._iTextInstances,f),0===p._iTextInstances.length&&(p._hasITextHandlers=!1,f._removeCanvasHandlers(p)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(p){p.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,p,d,l){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",p,{duration:d,onComplete:function(){u.isAborted||f[l]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var p=this,d=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){p._tick()},d)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,p=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&p&&p.clearContext(p.contextTop||p.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var p=0,d=f-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)p++,d--;for(;/\S/.test(this._text[d])&&d>-1;)p++,d--;return f-p},findWordBoundaryRight:function(f){var p=0,d=f;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)p++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)p++,d++;return f+p},findLineBoundaryLeft:function(f){for(var p=0,d=f-1;!/\n/.test(this._text[d])&&d>-1;)p++,d--;return f-p},findLineBoundaryRight:function(f){for(var p=0,d=f;!/\n/.test(this._text[d])&&d<this._text.length;)p++,d++;return f+p},searchWordBoundary:function(f,p){for(var d=this._text,l=this._reSpace.test(d[f])?f-1:f,u=d[l],o=w.reNonWord;!o.test(u)&&l>0&&l<d.length;)u=d[l+=p];return o.test(u)&&(l+=1===p?0:1),l},selectWord:function(f){var p=this.searchWordBoundary(f=f||this.selectionStart,-1),d=this.searchWordBoundary(f,1);this.selectionStart=p,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){var p=this.findLineBoundaryLeft(f=f||this.selectionStart),d=this.findLineBoundaryRight(f);return this.selectionStart=p,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(p){p.selected=!1,p.isEditing&&p.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var p=this.getSelectionStartFromPointer(f.e),d=this.selectionStart,l=this.selectionEnd;(p!==this.__selectionStartOnMouseDown||d===l)&&(d===p||l===p)||(p>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=p):(this.selectionStart=p,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,p,d){var l=d.slice(0,f),u=w.util.string.graphemeSplit(l).length;if(f===p)return{selectionStart:u,selectionEnd:u};var o=d.slice(f,p);return{selectionStart:u,selectionEnd:u+w.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(f,p,d){var u=d.slice(0,f).join("").length;return f===p?{selectionStart:u,selectionEnd:u}:{selectionStart:u,selectionEnd:u+d.slice(f,p).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,p=this._getCursorBoundaries(f),d=this.get2DCursorLocation(f),o=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"fontSize")*this.lineHeight,h=p.leftOffset,g=this.calcTransformMatrix(),c={x:p.left+h,y:p.top+p.topOffset+o},v=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,D=C.width/v,S=C.height/v,x=D-o,M=S-o,P=C.clientWidth/D,j=C.clientHeight/S;return c=w.util.transformPoint(c,g),(c=w.util.transformPoint(c,this.canvas.viewportTransform)).x*=P,c.y*=j,c.x<0&&(c.x=0),c.x>x&&(c.x=x),c.y<0&&(c.y=0),c.y>M&&(c.y=M),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,p=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,p&&(p.blur&&p.blur(),p.parentNode&&p.parentNode.removeChild(p)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,p){var c,v,d=this.get2DCursorLocation(f,!0),l=this.get2DCursorLocation(p,!0),u=d.lineIndex,o=d.charIndex,h=l.lineIndex,g=l.charIndex;if(u!==h){if(this.styles[u])for(c=o;c<this._unwrappedTextLines[u].length;c++)delete this.styles[u][c];if(this.styles[h])for(c=g;c<this._unwrappedTextLines[h].length;c++)(v=this.styles[h][c])&&(this.styles[u]||(this.styles[u]={}),this.styles[u][o+c-g]=v);for(c=u+1;c<=h;c++)delete this.styles[c];this.shiftLineStyles(h,u-h)}else if(this.styles[u]){v=this.styles[u];var D,S,C=g-o;for(c=o;c<g;c++)delete v[c];for(S in this.styles[u])(D=parseInt(S,10))>=g&&(v[D-C]=v[S],delete v[S])}},shiftLineStyles:function(f,p){var d=y(this.styles);for(var l in this.styles){var u=parseInt(l,10);u>f&&(this.styles[u+p]=d[u],d[u-p]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,p,d,l){var u,o={},h=!1,g=this._unwrappedTextLines[f].length===p;for(var c in d||(d=1),this.shiftLineStyles(f,d),this.styles[f]&&(u=this.styles[f][0===p?p:p-1]),this.styles[f]){var v=parseInt(c,10);v>=p&&(h=!0,o[v-p]=this.styles[f][c],g&&0===p||delete this.styles[f][c])}var C=!1;for(h&&!g&&(this.styles[f+d]=o,C=!0),C&&d--;d>0;)l&&l[d-1]?this.styles[f+d]={0:y(l[d-1])}:u?this.styles[f+d]={0:y(u)}:delete this.styles[f+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(f,p,d,l){this.styles||(this.styles={});var u=this.styles[f],o=u?y(u):{};for(var h in d||(d=1),o){var g=parseInt(h,10);g>=p&&(u[g+d]=o[g],o[g-d]||delete u[g])}if(this._forceClearCache=!0,l)for(;d--;)Object.keys(l[d]).length&&(this.styles[f]||(this.styles[f]={}),this.styles[f][p+d]=y(l[d]));else if(u)for(var c=u[p?p-1:1];c&&d--;)this.styles[f][p+d]=y(c)},insertNewStyleBlock:function(f,p,d){for(var l=this.get2DCursorLocation(p,!0),u=[0],o=0,h=0;h<f.length;h++)"\n"===f[h]?u[++o]=0:u[o]++;for(u[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,u[0],d),d=d&&d.slice(u[0]+1)),o&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+u[0],o),h=1;h<o;h++)u[h]>0?this.insertCharStyleObject(l.lineIndex+h,0,u[h],d):d&&this.styles[l.lineIndex+h]&&d[0]&&(this.styles[l.lineIndex+h][0]=d[0]),d=d&&d.slice(u[h]+1);u[h]>0&&this.insertCharStyleObject(l.lineIndex+h,0,u[h],d)},setSelectionStartEndWithShift:function(f,p,d){d<=f?(p===f?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=d):d>f&&d<p?"right"===this._selectionDirection?this.selectionEnd=d:this.selectionStart=d:(p===f?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=p),this.selectionEnd=d)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),w.util.object.extend(w.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(y){if(this.canvas){this.__newClickTime=+new Date;var f=y.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",y),this._stopEvent(y.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(y){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===y.x&&this.__lastPointer.y===y.y},_stopEvent:function(y){y.preventDefault&&y.preventDefault(),y.stopPropagation&&y.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(y){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(y.e))},tripleClickHandler:function(y){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(y.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(y.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(y){if(this.__isMousedown=!1,!(!this.editable||this.group||y.transform&&y.transform.actionPerformed||y.e.button&&1!==y.e.button)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(y.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(y){var f=this.getSelectionStartFromPointer(y);y.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(y){for(var g,f=this.getLocalPointer(y),p=0,d=0,l=0,u=0,o=0,c=0,v=this._textLines.length;c<v&&l<=f.y;c++)l+=this.getHeightOfLine(c)*this.scaleY,o=c,c>0&&(u+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));d=this._getLineLeftOffset(o)*this.scaleX,g=this._textLines[o],"rtl"===this.direction&&(f.x=this.width*this.scaleX-f.x+d);for(var C=0,D=g.length;C<D&&(p=d,(d+=this.__charBounds[o][C].kernedWidth*this.scaleX)<=f.x);C++)u++;return this._getNewSelectionStartFromOffset(f,p,d,u,D)},_getNewSelectionStartFromOffset:function(y,f,p,d,l){var o=p-y.x,g=d+(o>y.x-f||o<0?0:1);return this.flipX&&(g=l-g),g>this._text.length&&(g=this._text.length),g}}),w.util.object.extend(w.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=w.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var y=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+y.top+"; left: "+y.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+y.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):w.document.body.appendChild(this.hiddenTextarea),w.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),w.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),w.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),w.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(w.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(y){if(this.isEditing){var f="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(y.keyCode in f)this[f[y.keyCode]](y);else{if(!(y.keyCode in this.ctrlKeysMapDown)||!y.ctrlKey&&!y.metaKey)return;this[this.ctrlKeysMapDown[y.keyCode]](y)}y.stopImmediatePropagation(),y.preventDefault(),y.keyCode>=33&&y.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(y){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:y.keyCode in this.ctrlKeysMapUp&&(y.ctrlKey||y.metaKey)&&(this[this.ctrlKeysMapUp[y.keyCode]](y),y.stopImmediatePropagation(),y.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(y){var f=this.fromPaste;if(this.fromPaste=!1,y&&y.stopPropagation(),this.isEditing){var u,o,C,D,S,p=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,l=p.length,h=l-d,g=this.selectionStart,c=this.selectionEnd,v=g!==c;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=g>x.selectionStart;v?(u=this._text.slice(g,c),h+=c-g):l<d&&(u=M?this._text.slice(c+h,c):this._text.slice(g,g-h)),o=p.slice(x.selectionEnd-h,x.selectionEnd),u&&u.length&&(o.length&&(C=this.getSelectionStyles(g,g+1,!1),C=o.map(function(){return C[0]})),v?(D=g,S=c):M?(D=c-u.length,S=c):(D=c,S=c+u.length),this.removeStyleFromTo(D,S)),o.length&&(f&&o.join("")===w.copiedText&&!w.disableStyleCopyPaste&&(C=w.copiedTextStyle),this.insertNewStyleBlock(o,g,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(y){this.compositionStart=y.target.selectionStart,this.compositionEnd=y.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(w.copiedText=this.getSelectedText(),w.copiedTextStyle=w.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(y){return y&&y.clipboardData||w.window.clipboardData},_getWidthBeforeCursor:function(y,f){var d,p=this._getLineLeftOffset(y);return f>0&&(p+=(d=this.__charBounds[y][f-1]).left+d.width),p},getDownCursorOffset:function(y,f){var p=this._getSelectionForOffset(y,f),d=this.get2DCursorLocation(p),l=d.lineIndex;if(l===this._textLines.length-1||y.metaKey||34===y.keyCode)return this._text.length-p;var u=d.charIndex,o=this._getWidthBeforeCursor(l,u),h=this._getIndexOnLine(l+1,o);return this._textLines[l].slice(u).length+h+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(y,f){return y.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(y,f){var p=this._getSelectionForOffset(y,f),d=this.get2DCursorLocation(p),l=d.lineIndex;if(0===l||y.metaKey||33===y.keyCode)return-p;var u=d.charIndex,o=this._getWidthBeforeCursor(l,u),h=this._getIndexOnLine(l-1,o),g=this._textLines[l].slice(0,u),c=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+h-g.length+(1-c)},_getIndexOnLine:function(y,f){for(var o,h,p=this._textLines[y],l=this._getLineLeftOffset(y),u=0,g=0,c=p.length;g<c;g++)if((l+=o=this.__charBounds[y][g].width)>f){h=!0;var C=l,D=Math.abs(l-o-f);u=Math.abs(C-f)<D?g:g-1;break}return h||(u=p.length-1),u},moveCursorDown:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",y)},moveCursorUp:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",y)},_moveCursorUpOrDown:function(y,f){var d=this["get"+y+"CursorOffset"](f,"right"===this._selectionDirection);f.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),0!==d&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(y){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+y:this.selectionEnd+y),0!==y},moveCursorWithoutShift:function(y){return y<0?(this.selectionStart+=y,this.selectionEnd=this.selectionStart):(this.selectionEnd+=y,this.selectionStart=this.selectionEnd),0!==y},moveCursorLeft:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",y)},_move:function(y,f,p){var d;if(y.altKey)d=this["findWordBoundary"+p](this[f]);else{if(!y.metaKey&&35!==y.keyCode&&36!==y.keyCode)return this[f]+="Left"===p?-1:1,!0;d=this["findLineBoundary"+p](this[f])}if(typeof d<"u"&&this[f]!==d)return this[f]=d,!0},_moveLeft:function(y,f){return this._move(y,f,"Left")},_moveRight:function(y,f){return this._move(y,f,"Right")},moveCursorLeftWithoutShift:function(y){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(f=this._moveLeft(y,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(y){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(y,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(y,"selectionStart")):void 0},moveCursorRight:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",y)},_moveCursorLeftOrRight:function(y,f){var p="moveCursor"+y+"With";this._currentCursorOpacity=1,this[p+=f.shiftKey?"Shift":"outShift"](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(y){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(y,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(y,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(y){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(y,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(y,f){typeof f>"u"&&(f=y+1),this.removeStyleFromTo(y,f),this._text.splice(y,f-y),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(y,f,p,d){typeof d>"u"&&(d=p),d>p&&this.removeStyleFromTo(p,d);var l=w.util.string.graphemeSplit(y);this.insertNewStyleBlock(l,p,f),this._text=[].concat(this._text.slice(0,p),l,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var y=w.util.toFixed,f=/  +/g;w.util.object.extend(w.Text.prototype,{_toSVG:function(){var p=this._getSVGLeftTopOffsets(),d=this._getSVGTextAndBg(p.textTop,p.textLeft);return this._wrapSVGTextAndBg(d)},toSVG:function(p){return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(p){var l=this.getSvgTextDecoration(this);return[p.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",p.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(p,d){var h,l=[],u=[],o=p;this._setSVGBg(u);for(var g=0,c=this._textLines.length;g<c;g++)h=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(u,g,d+h,o),this._setSVGTextLineText(l,g,d+h,o),o+=this.getHeightOfLine(g);return{textSpans:l,textBgRects:u}},_createTextCharSpan:function(p,d,l,u){var o=p!==p.trim()||p.match(f),h=this.getSvgSpanStyles(d,o),g=h?'style="'+h+'"':"",c=d.deltaY,v="",C=w.Object.NUM_FRACTION_DIGITS;return c&&(v=' dy="'+y(c,C)+'" '),['<tspan x="',y(l,C),'" y="',y(u,C),'" ',v,g,">",w.util.string.escapeXml(p),"</tspan>"].join("")},_setSVGTextLineText:function(p,d,l,u){var g,c,C,D,M,o=this.getHeightOfLine(d),h=-1!==this.textAlign.indexOf("justify"),v="",S=0,x=this._textLines[d];u+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var P=0,j=x.length-1;P<=j;P++)M=P===j||this.charSpacing,v+=x[P],C=this.__charBounds[d][P],0===S?(l+=C.kernedWidth-C.width,S+=C.width):S+=C.kernedWidth,h&&!M&&this._reSpaceAndTab.test(x[P])&&(M=!0),M||(g=g||this.getCompleteStyleDeclaration(d,P),c=this.getCompleteStyleDeclaration(d,P+1),M=w.util.hasStyleChanged(g,c,!0)),M&&(D=this._getStyleDeclaration(d,P)||{},p.push(this._createTextCharSpan(v,D,l,u)),v="",g=c,l+=S,S=0)},_pushTextBgRect:function(p,d,l,u,o,h){var g=w.Object.NUM_FRACTION_DIGITS;p.push("\t\t<rect ",this._getFillAttributes(d),' x="',y(l,g),'" y="',y(u,g),'" width="',y(o,g),'" height="',y(h,g),'"></rect>\n')},_setSVGTextLineBg:function(p,d,l,u){for(var v,C,o=this._textLines[d],h=this.getHeightOfLine(d)/this.lineHeight,g=0,c=0,D=this.getValueOfPropertyAt(d,0,"textBackgroundColor"),S=0,x=o.length;S<x;S++)v=this.__charBounds[d][S],(C=this.getValueOfPropertyAt(d,S,"textBackgroundColor"))!==D?(D&&this._pushTextBgRect(p,D,l+c,u,g,h),c=v.left,g=v.width,D=C):g+=v.kernedWidth;C&&this._pushTextBgRect(p,C,l+c,u,g,h)},_getFillAttributes:function(p){var d=p&&"string"==typeof p?new w.Color(p):"";return d&&d.getSource()&&1!==d.getAlpha()?'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"':'fill="'+p+'"'},_getSVGLineTopOffset:function(p){for(var l,d=0,u=0;u<p;u++)d+=this.getHeightOfLine(u);return l=this.getHeightOfLine(u),{lineTop:d,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(p){return w.Object.prototype.getSvgStyles.call(this,p)+" white-space: pre;"}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(p){for(var d=0,l=0,u=0,o={},h=0;h<p.graphemeLines.length;h++)"\n"===p.graphemeText[u]&&h>0?(l=0,u++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(p.graphemeText[u])&&h>0&&(l++,u++),o[h]={line:d,offset:l},u+=p.graphemeLines[h].length,l+=p.graphemeLines[h].length;return o},styleHas:function(p,d){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[d];l&&(d=l.line)}return f.Text.prototype.styleHas.call(this,p,d)},isEmptyStyles:function(p){if(!this.styles)return!0;var u,o,d=0,h=!1,g=this._styleMap[p],c=this._styleMap[p+1];for(var v in g&&(p=g.line,d=g.offset),c&&(h=c.line===p,u=c.offset),o=typeof p>"u"?this.styles:{line:this.styles[p]})for(var C in o[v])if(C>=d&&(!h||C<u))for(var D in o[v][C])return!1;return!0},_getStyleDeclaration:function(p,d){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[p];if(!l)return null;p=l.line,d=l.offset+d}return this.callSuper("_getStyleDeclaration",p,d)},_setStyleDeclaration:function(p,d,l){var u=this._styleMap[p];this.styles[p=u.line][d=u.offset+d]=l},_deleteStyleDeclaration:function(p,d){var l=this._styleMap[p];delete this.styles[p=l.line][d=l.offset+d]},_getLineStyle:function(p){return!!this.styles[this._styleMap[p].line]},_setLineStyle:function(p){this.styles[this._styleMap[p].line]={}},_wrapText:function(p,d){var u,l=[];for(this.isWrapping=!0,u=0;u<p.length;u++)l=l.concat(this._wrapLine(p[u],u,d));return this.isWrapping=!1,l},_measureWord:function(p,d,l){var o,u=0;l=l||0;for(var g=0,c=p.length;g<c;g++)u+=this._getGraphemeBox(p[g],d,g+l,o,!0).kernedWidth,o=p[g];return u},_wrapLine:function(p,d,l,re){var o=0,h=this.splitByGrapheme,g=[],c=[],v=h?f.util.string.graphemeSplit(p):p.split(this._wordJoiners),C="",D=0,S=h?"":" ",x=0,M=0,P=0,j=!0,G=this._getWidthOfCharSpacing();re=re||0,0===v.length&&v.push([]),l-=re;for(var ae=0;ae<v.length;ae++)C=h?v[ae]:f.util.string.graphemeSplit(v[ae]),x=this._measureWord(C,d,D),D+=C.length,(o+=M+x-G)>l&&!j?(g.push(c),c=[],o=x,j=!0):o+=G,!j&&!h&&c.push(S),c=c.concat(C),M=h?0:this._measureWord([S],d,D),D++,j=!1,x>P&&(P=x);return ae&&g.push(c),P+re>this.dynamicMinWidth&&(this.dynamicMinWidth=P-G+re),g},isEndOfWrapping:function(p){return!this._styleMap[p+1]||this._styleMap[p+1].line!==this._styleMap[p].line},missingNewlineOffset:function(p){return this.splitByGrapheme?this.isEndOfWrapping(p)?1:0:1},_splitTextIntoLines:function(p){for(var d=f.Text.prototype._splitTextIntoLines.call(this,p),l=this._wrapText(d.lines,this.width),u=new Array(l.length),o=0;o<l.length;o++)u[o]=l[o].join("");return d.lines=u,d.graphemeLines=l,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var p={};for(var d in this._styleMap)this._textLines[d]&&(p[this._styleMap[d].line]=1);for(var d in this.styles)p[d]||delete this.styles[d]},toObject:function(p){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(p))}}),f.Textbox.fromObject=function(p,d){var l=f.util.stylesFromArray(p.styles,p.text),u=Object.assign({},p,{styles:l});return f.Object._fromObject("Textbox",u,d,"text")}}(Ne),function(){var y=w.controlsUtils,f=y.scaleSkewCursorStyleHandler,p=y.scaleCursorStyleHandler,d=y.scalingEqually,l=y.scalingYOrSkewingX,u=y.scalingXOrSkewingY,o=y.scaleOrSkewActionName,h=w.Object.prototype.controls;if(h.ml=new w.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:o}),h.mr=new w.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:o}),h.mb=new w.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:l,getActionName:o}),h.mt=new w.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:l,getActionName:o}),h.tl=new w.Control({x:-.5,y:-.5,cursorStyleHandler:p,actionHandler:d}),h.tr=new w.Control({x:.5,y:-.5,cursorStyleHandler:p,actionHandler:d}),h.bl=new w.Control({x:-.5,y:.5,cursorStyleHandler:p,actionHandler:d}),h.br=new w.Control({x:.5,y:.5,cursorStyleHandler:p,actionHandler:d}),h.mtr=new w.Control({x:0,y:-.5,actionHandler:y.rotationWithSnapping,cursorStyleHandler:y.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),w.Textbox){var g=w.Textbox.prototype.controls={};g.mtr=h.mtr,g.tr=h.tr,g.br=h.br,g.tl=h.tl,g.bl=h.bl,g.mt=h.mt,g.mb=h.mb,g.mr=new w.Control({x:.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),g.ml=new w.Control({x:-.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()},960:()=>{},759:()=>{},272:()=>{}},ho=>{ho(ho.s=187)}]);